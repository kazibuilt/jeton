"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6663],{28369:(e,t,i)=>{i.d(t,{EL:()=>h,ci:()=>s,f$:()=>u,jN:()=>p,l1:()=>l,uA:()=>d,z$:()=>c});var o=i(60484),n=i(49057),a=i(71281),r=i(88920);const l=()=>{var e;const{abTestVersion:t}=(0,o.L$)((0,n.W)((()=>["abTestVersion"]),[]));return{hasRedesign:"v1"===(null!==(e=(0,a.qt)(t,"fyp_redesign"))&&void 0!==e?e:"v0")}},s=()=>{const{hasRedesign:e}=l(),{isInProductHoldout:t}=(0,r.Vv)();return!(!e||t)},d=()=>{var e;const{abTestVersion:t}=(0,o.L$)((0,n.W)((()=>["abTestVersion"]),[])),i=null!==(e=(0,a.qt)(t,"immersive_player"))&&void 0!==e?e:"v0";return{enableImmersivePlayer:"v0"!==i,isCommentsDefaultOpen:"v1"===i||"v3"===i,hasForcedDarkMode:"v3"===i||"v4"===i}},c=()=>{var e;const{abTestVersion:t}=(0,o.L$)((0,n.W)((()=>["abTestVersion"]),[])),i=null!==(e=(0,a.qt)(t,"fyp_hide_music_info"))&&void 0!==e?e:"v0",{hasRedesign:r}=l();return{shouldHideMusicInfo:r&&"v0"!==i,isMusicInfoInActionBar:r&&"v1"===i,isMusicInfoInMoreMenu:r&&"v2"===i}},u=()=>{var e;const{abTestVersion:t}=(0,o.L$)((0,n.W)((()=>["abTestVersion"]),[])),i=null!==(e=(0,a.qt)(t,"preload_with_left"))&&void 0!==e?e:"0";return{preloadThreshold:Number(i)}},p=()=>{var e,t;const{abTestVersion:i}=(0,o.L$)((0,n.W)((()=>["abTestVersion"]),[])),r=null!==(e=(0,a.qt)(i,"fyp_comments_panel"))&&void 0!==e?e:"v0",l="v1"===(null!==(t=(0,a.qt)(i,"fyp_redesign"))&&void 0!==t?t:"v0")&&"v0"!==r,s=!1;return{isInCommentsPanelExperiment:l,hasNewCommentsDesign:l||s,hasSidebar:l,hasFloatingPanel:s,isDefaultOpen:"v2"===r}},h=()=>{const{abTestVersion:e}=(0,o.L$)((0,n.W)((()=>["abTestVersion"]),[]));return"v1"===(0,a.qt)(e,"image_fetch_priority")}},35281:(e,t,i)=>{i.d(t,{Hy:()=>d,Ih:()=>u,JQ:()=>r,Kq:()=>s,MO:()=>l,Nk:()=>c});var o=i(71111),n=i(31209);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const r={currentVideo:null},l=(0,o.atom)(r),{useServiceState:s,useServiceDispatchers:d,getStaticApi:c}=(0,n.i)(l,((e,t)=>({setCurrentVideo(e){t(l,(t=>{return i=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},o=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),o.forEach((function(t){a(e,t,i[t])}))}return e}({},t),o=null!=(o={currentVideo:e.currentVideo})?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t.push.apply(t,i)}return t}(Object(o)).forEach((function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))})),i;var i,o}))},updateVideo(e){this.setCurrentVideo(e)}}))),u=()=>s((e=>e.currentVideo))},87652:(e,t,i)=>{i.d(t,{$4:()=>y,Mu:()=>b,o$:()=>_});var o=i(71111),n=i(31209),a=i(5412),r=i(97071),l=i(8046),s=i(60072),d=i(22220),c=i(53764),u=i(41548),p=i(11983),h=i(18499),g=i(64747),m=i(69589),v=i(40046);const f={nickname:"",replyId:void 0,replyToReplyId:void 0,position:-1},x=(0,o.atom)({reply:Object.assign({},f),replyToOtherComment:Object.assign({},f),mentionUserList:[],isInputEmpty:!0,isReplyInputEmpty:!0,isInputFocus:!1,needClearInput:!1,needResetKeyword:!1,replyCid:""}),{useAtomService:b,useServiceDispatchers:y,useServiceState:_}=(0,n.i)(x,((e,t)=>({setReplyCid(e){t(x,(t=>Object.assign(Object.assign({},t),{replyCid:e})))},setReply(e){t(x,(t=>Object.assign(Object.assign({},t),{reply:null===e?Object.assign({},f):e})))},setReplyOptimize(e){t(x,(t=>Object.assign(Object.assign({},t),{replyToOtherComment:e})))},setMentionUserList(e){t(x,(t=>Object.assign(Object.assign({},t),{mentionUserList:null===e?[]:e})))},setIsReplyInputEmpty(e){t(x,(t=>Object.assign(Object.assign({},t),{isReplyInputEmpty:e})))},setIsInputEmpty(e){t(x,(t=>Object.assign(Object.assign({},t),{isInputEmpty:e})))},setIsInputFocus(e){t(x,(t=>Object.assign(Object.assign({},t),{isInputFocus:e})))},setNeedClearInput(e){t(x,(t=>Object.assign(Object.assign({},t),{needClearInput:e})))},setNeedResetKeyword(e){t(x,(t=>Object.assign(Object.assign({},t),{needResetKeyword:e})))},publishComment(t){return i=this,o=void 0,f=function*(){const i=(0,u.T)(),o=e(x),n=e(s.Pu),{awemeId:f,inputText:b,textExtra:y,teaParams:_,isReplyComment:w,shouldOptimizeReply:C,isCommentRedesign:k}=t,{reply:j,replyToOtherComment:S}=o,T=w?S:j,{replyId:P,replyToReplyId:D,nickname:I,position:O}=T,M=n[f],L={aweme_id:f,text:b,reply_id:P,reply_to_reply_id:D,text_extra:JSON.stringify(y)},B=Boolean(I)&&!C||w;try{const{status_code:e,comment:t}=yield(0,d.lG)(L);if(0===e){const e=B?"0"===D?"reply":"reply_to_reply":"original",o=i(I?"comment_reply_success":"comment_post_success");p.F.destroy(),p.F.open({content:o,duration:3,getContainer:c.M,getContainerPosition:"fixed"}),a.ao.handlePostComment(Object.assign(Object.assign({},_),{comment_category:e,comment_id:t.cid}));const n=null==M?void 0:M.ad_info;if(n){const e=(0,r.n5)({ad_info:n,play_mode:_.play_mode});l.pg.handleComment(e)}}else 22===e?(p.F.destroy(),p.F.open({content:i("comment_banned_toast"),duration:3,getContainer:c.M,getContainerPosition:"fixed"})):e?(p.F.destroy(),p.F.open({content:i("comment_post_failed"),duration:3,getContainer:c.M,getContainerPosition:"fixed"})):(p.F.destroy(),p.F.open({content:i("comment_nointernet_toast"),duration:3,getContainer:c.M,getContainerPosition:"fixed"}));if(0===e){const e=(0,g.OL)(),i=(0,s.ud)(),o=["comment","reply",t.reply_id],n=["comment",t.aweme_id];(0,h.unstable_batchedUpdates)((()=>{w&&C?(k&&((0,m.performManualOptimisticUpdate)(o,(0,v.qZ)({reply:t,parentCid:null!=P?P:""})),(0,m.performManualOptimisticUpdate)(n,(0,v.uv)({awemeId:f,parentCid:null!=P?P:""}))),this.setReplyCid(""),e.handleReplySuccess({comment:t,position:O})):B?(k&&((0,m.performManualOptimisticUpdate)(o,(0,v.qZ)({reply:t,parentCid:null!=P?P:""})),(0,m.performManualOptimisticUpdate)(n,(0,v.uv)({awemeId:f,parentCid:null!=P?P:""}))),this.setNeedClearInput(!0),e.handleReplySuccess({comment:t,position:O})):(this.setNeedClearInput(!0),k&&(0,m.performManualOptimisticUpdate)(n,(0,v.nK)({comment:t})),e.handlePostSuccess(t)),i.addMlModelTrainData({id:f,action:"post_comment"})}))}}catch(e){}},new((n=void 0)||(n=Promise))((function(e,t){function a(e){try{l(f.next(e))}catch(e){t(e)}}function r(e){try{l(f.throw(e))}catch(e){t(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof n?i:new n((function(e){e(i)}))).then(a,r)}l((f=f.apply(i,o||[])).next())}));var i,o,n,f}})))},22220:(e,t,i)=>{i.d(t,{dj:()=>c,fM:()=>s,i_:()=>d,lG:()=>u});var o=i(39228),n=i(26325),a=function(e,t,i,o){return new(i||(i=Promise))((function(n,a){function r(e){try{s(o.next(e))}catch(e){a(e)}}function l(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,l)}s((o=o.apply(e,t||[])).next())}))};const r=30,l=25;function s(){return a(this,void 0,void 0,(function*(){return o.hd.get("/api/at/default/list/",{query:{cursor:0,count:l},baseUrlType:2})}))}function d(e){return a(this,void 0,void 0,(function*(){return o.hd.get("/api/mention/recent/contact/list/v1/",{query:{mentionType:3,secUid:e},baseUrlType:2})}))}function c(e,t){return a(this,void 0,void 0,(function*(){return o.hd.get("/api/comment/search/sug/user/",{query:{keyword:e,count:r,mention_type:3,uid_filter_list:t},baseUrlType:2})}))}function u(e){return a(this,void 0,void 0,(function*(){return o.hd.post("/api/comment/publish/",{query:e,baseUrlType:8,headers:{[n.nk]:o.hd.csrfToken}})}))}},42858:(e,t,i)=>{i.d(t,{Y:()=>bt});var o=i(24643),n=i(46682),a=i(41271),r=i(40099),l=i(68652),s=i(12527),d=i(54622),c=i(25616),u=i(95481),p=i(47926),h=i(89311),g=i(78305),m=i(67518),v=i(71615),f=i(26722),x=i(21512),b=i(84827),y=i(25342),_=i(49057),w=i(4712),C=i(33843),k=i(37568),j=i(62186);const S=(0,j.default)("div",{target:"ejurlyw0"})((({top:e})=>({textAlign:"center",margin:`${e}px auto 0px`})),"label:DivMid;"),T=(0,j.default)("button",{target:"ejurlyw1"})((({theme:e})=>({width:"240px",height:"44px",margin:"133px auto 0px",border:`1px solid ${e.colors.LineSecondary2}`,borderRadius:"2px",textAlign:"center",cursor:"pointer",color:e.colors.TextPrimary,fontSize:"16px",lineHeight:"22px",padding:"11px 0px",background:e.colors.BGTertiary2,display:"block"})),"label:ButtonRetry;"),P=()=>{var e,t,i,d,u;const p=(0,c.s)(),{isRTL:j}=(0,h.m)(),{user:P}=null!==(e=(0,_.W)((()=>["user","region"]),[]))&&void 0!==e?e:{},D=(0,n.w)(g.y7),{colors:I}=(0,m.u)(),O=(0,a.P)(g.y7,{selector:e=>{const{lastStatus:t,requesting:i,loading:o,PageState:n,PageStateData:a,UserData:r,reportTarget:l,reasons:s}=e;return{lastStatus:t,requesting:i,loading:o,PageState:n,PageStateData:a,UserData:r,reportTarget:l,reasons:s}},dependencies:[]}),M=(0,r.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),O.reportTarget&&D.getReasons({reportTarget:O.reportTarget,uid:null==P?void 0:P.uid})}),[D,O.reportTarget]),L=e=>e.reason_type_id,B=(0,r.useCallback)((e=>t=>{var i,o,n,a,r,l,s,d,c,u,p,h,m,v,f,b;t.preventDefault(),t.stopPropagation();let _=null===(o=null===(i=O.PageStateData)||void 0===i?void 0:i.reasons)||void 0===o?void 0:o.find((t=>L(t)===e));if(_&&D.setUserData({selectedReason:_,HistoryReason:[...null!==(n=O.UserData.HistoryReason)&&void 0!==n?n:[],_]}),!_)return;if(_.reason_type_id===x.ek.IPInfringementRightOwner){const e="https://www.tiktok.com/business/en/report?end_type=web";return void window.open(e,"_blank")}const C=(0,w.zW)(null===(a=O.reportTarget)||void 0===a?void 0:a.ad_info);k.J.handleAdReasonSelect({tag:(null===(r=O.reportTarget)||void 0===r?void 0:r.play_mode)&&y.EM[O.reportTarget.play_mode]||y.xY.OneColumn,category:y.XJ,refer:y.Hq.Button,value:String(null===(s=null===(l=O.reportTarget)||void 0===l?void 0:l.ad_info)||void 0===s?void 0:s.creative_id),log_extra:(null===(c=null===(d=O.reportTarget)||void 0===d?void 0:d.ad_info)||void 0===c?void 0:c.log_extra)||JSON.stringify({rit:(null===(u=O.reportTarget)||void 0===u?void 0:u.isVideoDetailBannerAds)?y.uY:y.OZ,req_id:null==C?void 0:C.req_id}),reason_id:`${(null===(p=O.UserData.selectedReason)||void 0===p?void 0:p.reason_type_id)||""}`,description:_.desc||"",is_ad_event:"1"});const j=null!==(h=_.sub_reason)&&void 0!==h?h:[],S=JSON.parse(null!==(m=_.option)&&void 0!==m?m:"{}"),{action:T}=S;if(j.length>0)D.handleNextReason({nextReason:null!==(v=_.sub_reason)&&void 0!==v?v:[],reason_id:_.reason_type_id});else switch((null==T?void 0:T.action_type)||"submit"){case"submit":case"route":break;default:const e=T.action_params.route_path||"Desc";D.handleNextForm(g.wl[e])}!_||Boolean(null===(f=_.sub_reason)||void 0===f?void 0:f.length)?D.handleNextReason({nextReason:null!==(b=_.sub_reason)&&void 0!==b?b:[],reason_id:_.reason_type_id}):D.handleNextForm((0,x.f2)(_.reason_type_id)?2:1)}),[O.PageStateData,D,O.UserData.HistoryReason,P,O.reportTarget]);return(0,o.jsx)(C.an,{children:O.loading?(0,o.jsx)(C.TU,{children:(0,o.jsx)(b.R,{})}):0===(null===(i=null===(t=O.PageStateData)||void 0===t?void 0:t.reasons)||void 0===i?void 0:i.length)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(S,{top:57,children:(0,o.jsx)(v.A,{width:72,height:72})}),(0,o.jsx)(S,{top:20,style:{fontSize:"18px",lineHeight:"24px",color:I.TextPrimary},children:p("pm_mt_live_page_sth_wrong")}),(0,o.jsx)(S,{top:12,style:{fontSize:"16px",lineHeight:"22px",color:I.TextSecondary},children:p("pm_mt_live_page_try_again")}),(0,o.jsxs)(T,{onClick:M,children:[(0,o.jsx)(f.A,{width:14,height:14,style:{verticalAlign:"middle",marginRight:"8px"}}),p("report_inbox_retry_btn")]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C.Rh,{children:p("Please select a scenario")}),null===(u=null===(d=O.PageStateData)||void 0===d?void 0:d.reasons)||void 0===u?void 0:u.map((e=>(0,o.jsxs)(C.KW,{onClick:B(L(e)),children:[(0,o.jsx)(C.Lo,{children:e.text}),j?(0,o.jsx)(s.A,{style:{color:I.TextTertiary},width:20,height:20}):(0,o.jsx)(l.A,{style:{color:I.TextTertiary},width:20,height:20})]},L(e))))]})})};var D=i(50700),I=i(73580),O=i(41077),M=i.n(O),L=i(73635),B=i(90046),E=i(68878),A=i(20157);const R=(0,j.default)("div",{target:"e1n238hh0"})({position:"fixed",left:0,top:0,right:0,bottom:0,zIndex:3001},"label:DivPreviewImageContainer;"),z=(0,j.default)("div",{target:"e1n238hh1"})((({theme:e})=>({position:"absolute",left:0,top:0,right:0,bottom:0,background:e.colors.SDPrimary})),"label:DivMaskContainer;"),F=(0,j.default)("div",{target:"e1n238hh2"})({position:"absolute",zIndex:1,left:0,top:0,right:0,bottom:0},"label:DivImageContainer;"),U=(0,j.default)("div",{target:"e1n238hh3"})({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"692px",height:"810px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"contain"},"label:DivPreviewImage;"),V=(0,j.default)("div",{target:"e1n238hh4"})((({theme:e})=>({position:"absolute",top:"20px",right:"20px",width:"48px",height:"48px",borderRadius:"24px",backgroundColor:e.colors.ConstTextInverse5,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",":hover":{opacity:.7}})),"label:DivIconClose;"),W={position:"absolute",top:"50%",transform:"translateY(-50%)",width:"48px",height:"48px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:.5,":hover":{opacity:1}},N=(0,j.default)("div",{target:"e1n238hh5"})(Object.assign(Object.assign({},W),{left:"32px"}),"label:DivIconPrev;"),q=(0,j.default)("div",{target:"e1n238hh6"})(Object.assign(Object.assign({},W),{left:"auto",right:"32px"}),"label:DivIconNext;"),H=(0,r.memo)((function({imgList:e,defaultIndex:t,onClose:i}){const[n,a]=(0,r.useState)(t>e.length-1?e.length-1:t<0?0:t),{showModal:d,hideModal:c}=(0,A.g)();(0,r.useEffect)((()=>(d(),()=>{c()})),[d,c]);const u=(0,r.useCallback)((()=>{null==i||i()}),[i]),p=(0,r.useCallback)((()=>a((e=>e-1))),[]),h=(0,r.useCallback)((()=>a((e=>e+1))),[]);return(0,o.jsxs)(R,{children:[(0,o.jsx)(z,{}),(0,o.jsxs)(F,{children:[(0,o.jsx)(U,{style:{backgroundImage:`url(${e[n]})`}}),(0,o.jsx)(V,{onClick:u,children:(0,o.jsx)(L.A,{height:24,width:24,fill:"#fff"})}),n>0&&(0,o.jsx)(N,{onClick:p,children:(0,o.jsx)(s.A,{height:30,width:30,fill:"#fff"})}),n<e.length-1&&(0,o.jsx)(q,{onClick:h,children:(0,o.jsx)(l.A,{height:30,width:30,fill:"#fff"})})]})]})})),$=(0,j.default)("div",{target:"e1nzkl7u0"})((({theme:e})=>({fontFamily:e.fontFamilies.TikTokFont,fontWeight:e.fontWeights.normal,display:"flex",flexWrap:"wrap"})),"label:DivUploadImageContainer;"),K=(0,j.default)("div",{target:"e1nzkl7u1"})((({theme:e,size:t})=>({boxSizing:"border-box",width:`${t}px`,height:`${t}px`,display:"flex",alignItems:"center",flexDirection:"column",background:e.colors.BGInput,borderRadius:"2px",overflow:"hidden",cursor:"pointer",paddingTop:(t-50)/2+"px"})),"label:DivImageUploadElement;"),G=(0,j.default)("div",{target:"e1nzkl7u2"})((({theme:e,size:t})=>({width:`${t}px`,height:`${t}px`,marginRight:"12px",position:"relative",borderRadius:"2px",overflow:"hidden",cursor:"pointer",":before":{content:'""',position:"absolute",width:"200%",height:"200%",borderRadius:"4px",border:`1px solid ${e.colors.LineSecondary}`,transform:"scale(.5)",left:"-50%",top:"-50%",boxSizing:"border-box"},img:{objectFit:"cover",zIndex:3,transform:"translateZ(10px)"}})),"label:DivImageItem;"),Y=(0,j.default)("span",{target:"e1nzkl7u3"})({position:"absolute",display:"flex",boxSizing:"border-box",padding:"5px",top:0,right:0,width:"16px",height:"16px",background:"rgba(22, 24, 35, 0.75)",borderBottomLeftRadius:"2px",cursor:"pointer"},"label:SpanClose;"),J=(0,j.default)("span",{target:"e1nzkl7u4"})((({theme:e})=>({fontSize:"12px",lineHeight:"15px",color:e.colors.TextTertiary,marginTop:"4px"})),"label:SpanImageNumber;"),Z=(0,j.default)("input",{target:"e1nzkl7u5"})({display:"none",width:0,height:0},"label:InputImage;"),X=(0,j.default)("div",{target:"e1nzkl7u6"})({position:"absolute",left:"50%",top:"50%",transform:"translate(-50% , -50%)"},"label:DivMid;");let Q=0;const ee=Number(1048576),te=(e,t)=>e>=5242880?t?.1:.2:e>=1572864?t?.3:.5:e>=524288?t?.4:.6:t?.6:.8,ie=(0,r.memo)((function({max:e,onChange:t,size:i=72}){const n=(0,I.Nj)(E.D),[a,l]=(0,r.useState)([]),[s,d]=(0,r.useState)(0),[c,u]=(0,r.useState)(!1),p=(0,r.useRef)([]),{colors:h}=(0,m.u)(),g=(0,r.useCallback)((t=>{const i=[],o=t.target.files,n=e-a.length;if(o){const e=o.length>n?n:o.length;for(let t=0;t<e;t++)if(o[t].type.match("image")){const n=new FileReader;n.readAsDataURL(o[t]),n.onload=t=>{i.push({id:Q++,uri:t.target.result,uploaded:!1}),i.length===e&&l((e=>[...e,...i]))},p.current.push(o[t])}t.target.value=""}}),[e,a.length]),v=(0,r.useCallback)((e=>()=>{d(e),u(!0)}),[]),f=(0,r.useCallback)((e=>{const t=p.current[e];new(M())(t,{quality:te(t.size),convertSize:ee,success:i=>{p.current[e]=i,i.width=t.width,i.height=t.height,n.uploadImage(i).subscribe((t=>{const o=[...a];o[e]=Object.assign(Object.assign({},o[e]),{url:t.data.url_list[0],size:i.size,uploaded:!0}),l(o)}))}})}),[a,p,n]),x=e=>()=>{const t=a.slice();t.splice(e,1),l(t),p.current.splice(e,1)},y=(0,r.useCallback)((()=>{u(!1)}),[]);return(0,r.useEffect)((()=>{a.forEach(((e,t)=>{!1===a[t].uploaded&&f(t)})),t(a)}),[a,t,f]),(0,o.jsxs)("div",{children:[(0,o.jsxs)($,{children:[a.map(((e,t)=>(0,o.jsxs)(G,{size:i,children:[(0,o.jsx)("img",{src:e.uri,width:i,height:i,style:e.uploaded?{}:{filter:"blur(1px)"},onClick:v(t)}),(0,o.jsx)(Y,{className:"close",onClick:x(t),children:(0,o.jsx)(L.A,{width:7,height:7,fill:"#fff"})}),e.uploaded?null:(0,o.jsx)(X,{children:(0,o.jsx)(b.R,{size:20})})]},e.id))),c&&(0,o.jsx)(H,{defaultIndex:s,imgList:a.map((e=>e.uri)),onClose:y}),e<=a.length?null:(0,o.jsx)("label",{htmlFor:"upload-image-file",children:(0,o.jsxs)(K,{size:i,children:[(0,o.jsx)(B.A,{height:30,width:30,fill:h.TextTertiary}),(0,o.jsxs)(J,{className:"img-number",children:[a.length,"/",e]})]})})]}),(0,o.jsx)(Z,{multiple:!0,className:"file-input",accept:"image/png,image/jpeg,image/jpg,image/bmp",type:"file",onChange:g,id:"upload-image-file"})]})}));var oe=i(72153);const ne=(0,j.default)("div",{target:"e1b69dc70"})({height:"413px",padding:"0px",overflowY:"auto",overflowX:"hidden",paddingBottom:"84px"},"label:DivMainContainer;"),ae=(0,j.default)("div",{target:"e1b69dc71"})({display:"flex",flexDirection:"column",alignItems:"stretch",padding:"0px"},"label:DivScrollContainer;"),re=(0,j.default)("div",{target:"e1b69dc72"})({display:"flex",flexDirection:"row",justifyContent:"center",boxSizing:"border-box",padding:"16px 24px 12px"},"label:DivSectionHeader;"),le=(0,j.default)("div",{target:"e1b69dc73"})((({theme:e})=>({display:"flex",flexDirection:"column",boxSizing:"border-box",padding:"16px 24px",backgroundColor:e.colors.BGView,marginBottom:"8px"})),"label:DivSectionLine;"),se=(0,j.default)("div",{target:"e1b69dc74"})((({theme:e})=>({fontSize:"16px",lineHeight:"22px",color:e.colors.TextSecondary})),"label:DivSectionLineTitle;"),de=(0,j.default)("div",{target:"e1b69dc75"})((({theme:e})=>({marginTop:"4px",fontSize:"12px",lineHeight:"16px",color:e.colors.TextQuaternary})),"label:DivSectionLineSubTitle;"),ce=(0,j.default)("span",{target:"e1b69dc76"})((({theme:e})=>[(0,oe.zy)({theme:e,color:"Link",fontWeight:"semiBold",cursor:"pointer"})]),"label:LinkSpan;"),ue=(0,j.default)("span",{target:"e1b69dc77"})((({theme:e})=>({flex:1,fontSize:"18px",lineHeight:"24px",fontFamily:e.fontFamilies.TikTokFont,fontWeight:e.fontWeights.semiBold,color:e.colors.TextPrimary})),"label:SpanSectionTitle;"),pe=(0,j.default)("span",{target:"e1b69dc78"})((({theme:e})=>({fontSize:"16px",lineHeight:"22px",color:e.colors.TextSecondary})),"label:SpanWordCount;"),he=(0,j.default)("textarea",{target:"e1b69dc79"})((({theme:e})=>Object.assign(Object.assign({},(e=>({borderStyle:"none",borderColor:"transparent",boxShadow:"none",outline:"none",margin:"0px 24px",borderRadius:"4px",fontSize:"16px",fontFamily:e.fontFamilies.TikTokFont,fontWeight:e.fontWeights.normal,color:e.colors.TextPrimary,":placeholder":{color:e.colors.TextTertiary}}))(e)),{resize:"none",height:"80px",backgroundColor:e.colors.BGPrimary})),"label:TextareaDescription;"),ge=(0,j.default)("div",{target:"e1b69dc711"})({margin:"4px 24px"},"label:DivImageUploader;"),me=(0,j.default)("div",{target:"e1b69dc712"})((({theme:e})=>({margin:"12px 24px 0 24px",fontFamily:e.fontFamilies.TikTokFont,fontSize:"14px",color:"rgba(0, 0, 0, 0.56)"})),"label:DivTiper;"),ve=(0,j.default)("div",{target:"e1b69dc713"})((({theme:e})=>({marginTop:"4px",fontFamily:e.fontFamilies.TikTokFont,fontWeight:e.fontWeights.normal,fontSize:"12px",color:e.colors.Primary})),"label:DivFileSizeWarning;"),fe=(0,r.memo)((function({onClose:e}){var t,i;const l=(0,c.s)(),s=(0,n.w)(g.y7),d=(0,a.P)(g.y7,{selector:e=>{const{UserData:t,PreState:i,reportTarget:o}=e;return{UserData:t,PreState:i,reportTarget:o}},dependencies:[]}),[u,p]=(0,r.useState)(""),[h,m]=(0,r.useState)([]),[v,f]=(0,r.useState)(!1),[b,j]=(0,r.useState)(!1),{region:S="",user:T}=null!==(t=(0,_.W)((()=>["region","user"]),[]))&&void 0!==t?t:{},P=(0,r.useMemo)((()=>{var e,t,i;return null!==(i=null===(t=null===(e=d.UserData)||void 0===e?void 0:e.selectedReason)||void 0===t?void 0:t.reason_type_id)&&void 0!==i?i:0}),[]),I=(0,r.useMemo)((()=>{var e,t,i;return null!==(i=null===(t=null===(e=d.UserData)||void 0===e?void 0:e.selectedReason)||void 0===t?void 0:t.text)&&void 0!==i?i:""}),[]);(0,r.useEffect)((()=>{j(!0)}),[u,h,v]),(0,r.useEffect)((()=>{var e,t,i,o,n,a,r;const l=(0,w.zW)(null===(e=d.reportTarget)||void 0===e?void 0:e.ad_info);k.J.handleAdEditPageView({tag:(null===(t=d.reportTarget)||void 0===t?void 0:t.play_mode)&&y.EM[d.reportTarget.play_mode]||y.xY.OneColumn,category:y.XJ,log_extra:(null===(o=null===(i=d.reportTarget)||void 0===i?void 0:i.ad_info)||void 0===o?void 0:o.log_extra)||JSON.stringify({rit:(null===(n=d.reportTarget)||void 0===n?void 0:n.isVideoDetailBannerAds)?y.uY:y.OZ,req_id:null==l?void 0:l.req_id}),value:String(null===(r=null===(a=d.reportTarget)||void 0===a?void 0:a.ad_info)||void 0===r?void 0:r.creative_id),refer:y.Hq.Button,reason_id:`${P}`,description:I,is_ad_event:"1"})}),[]);const O=(0,r.useCallback)((e=>{f(!1);for(const t of e)t.size&&t.size>10485760&&f(!0);m(e)}),[]),M=(0,r.useCallback)((e=>{e.stopPropagation()}),[]),L=(0,r.useCallback)((e=>p(e.target.value)),[]),B=(0,r.useCallback)((()=>{e()}),[e]),E=(0,r.useCallback)((e=>{if(e.preventDefault(),e.stopPropagation(),P&&b){const e={description:u,uri:h.map((e=>e.url)).join(",")};s.postReport({reason:P,text:I,extraData:e,region:S,uid:null==T?void 0:T.uid,closeModal:B})}}),[u,h,P,b,s]),A=(()=>{var e,t;return P===x.YB.AISynthetic?(0,o.jsxs)(de,{children:[l("ad_report_reason_L1Misinfo_L2aigc_0"),(0,o.jsxs)("ul",{style:{margin:0,marginTop:"5px",paddingLeft:"20px"},children:[(0,o.jsx)("li",{children:l("ad_report_reason_L1Misinfo_L2aigc_1")}),(0,o.jsx)("li",{children:l("ad_report_reason_L1Misinfo_L2aigc_2")}),(0,o.jsx)("li",{children:l("ad_report_reason_L1Misinfo_L2aigc_3")}),(0,o.jsx)("li",{children:l("ad_report_reason_L1Misinfo_L2aigc_4")}),(0,o.jsx)("li",{children:l("ad_report_reason_L1Misinfo_L2aigc_5")}),(0,o.jsx)("li",{children:l("ad_report_reason_L1Misinfo_L2aigc_6")})]})]}):(null===(e=d.UserData.selectedReason)||void 0===e?void 0:e.desc)?(0,o.jsxs)(de,{children:[`${d.UserData.selectedReason.desc}`,(null===(t=d.UserData.selectedReason)||void 0===t?void 0:t.link)&&(0,o.jsx)(ce,{onClick:()=>{var e;window.open((null===(e=d.UserData.selectedReason)||void 0===e?void 0:e.link)||"","_blank")},children:l("dsa_illegal_placeholder_learnmore")})]}):null})();return(0,o.jsxs)(ne,{children:[(0,o.jsxs)(ae,{children:[(0,o.jsxs)(le,{children:[(0,o.jsx)(se,{children:`${l("Web_report_reason_select")} ${null===(i=d.UserData.selectedReason)||void 0===i?void 0:i.text}`}),A]}),(0,o.jsxs)(re,{children:[(0,o.jsx)(ue,{children:l("Web_report_description")}),(0,o.jsxs)(pe,{children:[u.length,"/",5e3]})]}),(0,o.jsx)(he,{rows:5,maxLength:5e3,placeholder:l("report_details_toast"),value:u,onChange:L,onKeyDown:M}),(0,o.jsxs)(ge,{children:[(0,o.jsx)(ie,{max:4,onChange:O}),v&&(0,o.jsx)(ve,{children:l("attachment_upload_limit")})]}),(0,o.jsxs)(me,{children:[(0,o.jsx)(D.A,{style:{marginRight:"4px"},width:12,height:12}),l("report_img_toast")]})]}),(0,o.jsx)(C.rW,{children:(0,o.jsx)(C.jl,{disabled:!b,onClick:E,children:l("Submit")})})]})}));var xe=i(7399);const be=(0,j.default)("div",{target:"e13phqsp0"})({height:"580px",padding:"0px",overflowY:"auto",overflowX:"hidden",paddingBottom:"84px"},"label:DivKopigContainer;"),ye=(0,j.default)(be,{target:"e13phqsp1"})({height:"708px"},"label:DivDSAContainer;"),_e=(0,j.default)("div",{target:"e13phqsp2"})({display:"flex",marginTop:"24px",marginBottom:"32px",paddingLeft:"24px",paddingRight:"24px"},"label:DivLegalContainer;"),we=(0,j.default)("div",{target:"e13phqsp3"})({marginBottom:"16px",paddingLeft:"24px",paddingRight:"24px"},"label:DivDescriptionContainer;"),Ce=(0,j.default)("div",{target:"e13phqsp4"})((({theme:e})=>({fontSize:"18px",lineHeight:"26px",color:e.colors.TextPrimary,fontWeight:600,display:"flex"})),"label:DivTitle;"),ke=(0,j.default)("div",{target:"e13phqsp5"})((({theme:e})=>({fontSize:"16px",lineHeight:"24px",color:e.colors.TextSecondary,fontWeight:400,marginInlineStart:"auto"})),"label:DivCounter;"),je=(0,j.default)("div",{target:"e13phqsp6"})((({theme:e})=>({color:e.colors.Primary})),"label:AsteriskColor;"),Se=(0,j.default)(ke,{target:"e13phqsp7"})({display:"flex",marginInlineStart:"auto",alignItems:"center",cursor:"pointer"},"label:DivChooseCountry;"),Te=(0,j.default)("textarea",{target:"e13phqsp8"})((({theme:e})=>Object.assign(Object.assign({},(e=>({borderStyle:"none",borderColor:"transparent",boxShadow:"none",outline:"none",margin:"0px 24px",borderRadius:"4px",fontSize:"16px",fontFamily:e.fontFamilies.TikTokFont,fontWeight:e.fontWeights.normal,color:e.colors.TextPrimary,":placeholder":{color:e.colors.TextTertiary}}))(e)),{resize:"none",height:"80px",backgroundColor:e.colors.BGPrimary})),"label:TextareaDescription;"),Pe=(0,j.default)(Te,{target:"e13phqsp9"})((({})=>({margin:"0px",width:"100%",height:"unset",marginTop:"10px",fontSize:"16px",lineHeight:"24px"})),"label:DivInputArea;"),De=(0,j.default)("div",{target:"e13phqsp10"})((({theme:e})=>({height:"0.5px",background:e.colors.LineSecondary,marginTop:"12.5px"})),"label:DivLine;"),Ie=(0,j.default)("div",{target:"e13phqsp11"})((({})=>({padding:"16px 24px",display:"flex",alignItems:"center"})),"label:DivCheckBoxContainer;"),Oe=(0,j.default)("div",{target:"e13phqsp12"})((({theme:e})=>({fontSize:"16px",lineHeight:"24px",fontWeight:"400px",marginInlineStart:"9px",color:e.colors.TextPrimary})),"label:DivCheckBoxDesc;"),Me=(0,j.default)("div",{target:"e13phqsp13"})((({theme:e})=>({display:"flex",alignContent:"center",marginTop:"9px",color:e.colors.Negative})),"label:DivWarningContainer;"),Le=(0,j.default)("div",{target:"e13phqsp14"})({fontSize:"14px",fontWeight:"400px",marginInlineStart:"9px"},"label:DivWarning;"),Be=(0,j.default)("div",{target:"e13phqsp18"})((({theme:e})=>({fontSize:"14px",fontWeight:"400",lineHeight:"22px",padding:"0px 24px",color:e.colors.TextQuaternary})),"label:DivWarnText;"),Ee=(0,j.default)("span",{target:"e13phqsp19"})((({theme:e})=>({fontSize:"18px",lineHeight:"26px",color:e.colors.TextTertiary,marginLeft:"8px"})),"label:OptionalTag;"),Ae=(0,j.default)("div",{target:"e13phqsp20"})((({theme:e})=>({fontSize:"14px",fontWeight:400,lineHeight:"130%",color:e.colors.TextTertiary,marginTop:"10px"})),"label:OptionalEmailTip;");var Re=i(88091);function ze(e,t){const i=Object.keys(t),n=new RegExp(`(${i.join("|")})`,"g"),a=e.split(n);return(0,o.jsx)(o.Fragment,{children:a.map((e=>i.includes(e)?t[e]:e))})}const Fe=(0,j.default)("p",{target:"eclkyfe0"})((({theme:e})=>({fontSize:"18px",lineHeight:"26px",color:e.colors.TextPrimary,fontWeight:600,marginTop:"16px",marginBottom:"16px",paddingLeft:"24px",paddingRight:"24px"})),"label:TrustedFlaggerText;"),Ue=(0,j.default)("a",{target:"eclkyfe1"})((({theme:e})=>({color:e.colors.AssistColorAzure,fontWeight:700,textDecoration:"none"})),"label:TrustedFlaggerLink;"),Ve=(0,j.default)("div",{target:"eclkyfe2"})((({theme:e})=>({color:e.colors.BGPrimary})),"label:ModalWrapper;"),We=(0,j.default)("span",{target:"eclkyfe3"})((({theme:e})=>({color:e.colors.TextPrimary,fontWeight:700})),"label:Title;"),Ne=(0,j.default)("span",{target:"eclkyfe4"})((({theme:e})=>({color:e.colors.TextPrimary,fontSize:"14px",lienHeight:"18px"})),"label:Description;"),qe=(0,j.default)("button",{target:"eclkyfe5"})((({theme:e})=>({padding:"8px 10px",fontSize:"16px",lineheight:"20px",cursor:"pointer",borderRadius:"4px",color:e.colors.TextPrimary,backgroundColor:e.colors.UIShapeNeutral4,minWidth:"160px"})),"label:LeftButton;"),He=(0,j.default)("button",{target:"eclkyfe6"})((({theme:e})=>({padding:"8px 10px",fontSize:"16px",lineheight:"20px",cursor:"pointer",borderRadius:"4px",color:e.colors.ConstTextInverse,backgroundColor:e.colors.Primary,minWidth:"160px"})),"label:RightButton;"),$e=(0,j.default)("div",{target:"eclkyfe7"})({display:"flex",padding:"0 24px 32px",alignItems:"center",justifyContent:"space-between",gap:"16px"},"label:ModalFooter;");var Ke=i(11983);const Ge=({onSetIsTrustedFlagger:e})=>{const[t,i]=(0,r.useState)(!1),n=(0,c.s)(),a=()=>{i(!t)},{isTrustedFlagger:l,register:s,unbindTrustedFlagger:d}=(({handleDialog:e})=>{const[t,i]=(0,r.useState)(null),o=(0,I.Nj)(E.D),n=(0,c.s)(),a=()=>{o.getTustedFlaggerState().subscribe((e=>{var t;0===(null===(t=null==e?void 0:e.base)||void 0===t?void 0:t.status_code)?i(e.is_trusted_flagger):i(!1)}))};return(0,r.useEffect)((()=>{let e="";void 0!==document.hidden?e="visibilitychange":void 0!==document.msHidden?e="msvisibilitychange":void 0!==document.webkitHidden&&(e="webkitvisibilitychange");const t=()=>{document.hidden||document.msHidden||document.webkitHidden||a()};return a(),e&&document.addEventListener(e,t),()=>{e&&document.removeEventListener(e,t)}}),[]),{isTrustedFlagger:t,register:()=>{window.open("https://www.tiktok.com/dsa-trusted-flagger/login")},unbindTrustedFlagger:()=>{o.unbindTrustedFlagger().subscribe((t=>{var i;0===(null===(i=null==t?void 0:t.base)||void 0===i?void 0:i.status_code)?(a(),e()):Ke.F.open({content:n("Sorry, something wrong with the server, please try again."),duration:1.2,widthType:"half"})}))}}})({handleDialog:a});return(0,r.useEffect)((()=>{e(l)}),[l]),(0,o.jsxs)(o.Fragment,{children:[(()=>{switch(l){case!0:return(0,o.jsx)(Fe,{children:ze(n("dsa_illegal_report_trustedflagger_signout"),{"{s_tapHere}":(0,o.jsx)(Ue,{onClick:a,children:n("dsa_illegal_report_trustedflaggerlink")})})});case!1:return(0,o.jsx)(Fe,{children:ze(n("dsa_illegal_report_trustedflagger"),{"%s":(0,o.jsx)(Ue,{onClick:s,children:n("dsa_illegal_report_trustedflaggerlink")})})});default:return null}})(),(0,o.jsx)(Re.Mw,{isOpen:t,onClose:a,size:"Small",children:(0,o.jsxs)(Ve,{children:[(0,o.jsx)(Re.ND,{children:(0,o.jsx)(We,{children:n("dsa_illegal_report_trustedflagger_signout_popup")})}),(0,o.jsx)(Re.Te,{children:(0,o.jsx)(Re.Fm,{children:(0,o.jsx)(Ne,{children:n("dsa_illegal_report_trustedflagger_signout_popup_desc")})})}),(0,o.jsxs)($e,{children:[(0,o.jsx)(qe,{onClick:d,children:n("dsa_illegal_report_trustedflagger_signout_popup_yes")}),(0,o.jsx)(He,{onClick:a,children:n("dsa_illegal_report_trustedflagger_signout_popup_no")})]})]})})]})};var Ye=i(23359);function Je(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}const Ze=(0,r.memo)((function({onClose:e}){var t,i,l;const[s,d]=(0,r.useState)(null),u=function(e){const t=(0,r.useRef)(e);return t.current=e,t}(s),p=(0,c.s)(),[h,m]=(0,r.useState)({relevantLaw:"",reportExplanation:"",signature:"",checked:!1,loggedOutEmail:""}),{region:v="",user:f}=null!==(t=(0,_.W)((()=>["region","user"]),[]))&&void 0!==t?t:{},x=(0,r.useMemo)((()=>Boolean(f)),[f]),b=(0,n.w)(g.y7),y=(0,a.P)(g.y7,{selector:e=>{const{UserData:t,PreState:i,choosenDSACountry:o,PageStateData:n,reportTarget:a,DSACountriesList:r}=e;return{UserData:t,PreState:i,choosenDSACountry:o,PageStateData:n,reportTarget:a,DSACountriesList:r}},dependencies:[]}),w=(0,r.useMemo)((()=>{var e,t;return(null===(t=null===(e=y.UserData)||void 0===e?void 0:e.selectedReason)||void 0===t?void 0:t.reason_type_id)>20}),[y.UserData]),[k,j]=(0,r.useState)({loggedOutInvalid:!1});(0,r.useEffect)((()=>{y.PageStateData&&"relevantLaw"in y.PageStateData&&m(Object.assign({},y.PageStateData))}),[y.PageStateData]);const S=(0,r.useMemo)((()=>{var e,t,i;return null!==(i=null===(t=null===(e=y.UserData)||void 0===e?void 0:e.selectedReason)||void 0===t?void 0:t.reason_type_id)&&void 0!==i?i:0}),[]),T=(0,r.useMemo)((()=>{var e,t,i;return null!==(i=null===(t=null===(e=y.UserData)||void 0===e?void 0:e.selectedReason)||void 0===t?void 0:t.text)&&void 0!==i?i:""}),[]),P=S>=17&&S<=20,D=(0,r.useMemo)((()=>""!==h.reportExplanation.trim()&&(!w||""!==h.signature.trim())&&h.checked&&void 0!==y.choosenDSACountry&&(x||!x&&P||!x&&!P&&""!==h.loggedOutEmail.trim()&&Je(h.loggedOutEmail))),[h]),I=(0,r.useCallback)((()=>{e()}),[e]),O=(0,r.useCallback)((e=>{var t,i;if(e.preventDefault(),e.stopPropagation(),S&&D){const e={signature:h.signature,relevant_law:h.relevantLaw,description:h.reportExplanation,report_scene:"0",law_country_code:null!==(i=null===(t=y.choosenDSACountry)||void 0===t?void 0:t.code)&&void 0!==i?i:"",is_trusted_flagger:u.current,email:h.loggedOutEmail},o={isDsaMode:!0,reason:S,text:T,extraData:e,region:v,uid:null==f?void 0:f.uid,closeModal:I};b.postReport(o)}}),[S,b,h,D]),M=(0,r.useCallback)((()=>{b.setPageStateData(h),b.handleNextForm(3)}),[h]);(0,r.useEffect)((()=>()=>{b.setChoosenDSACountry(void 0)}),[]);const L=(0,r.useCallback)((()=>(0,o.jsx)(Be,{children:p("dsa_illegal_report_penalty_reminder")})),[]);return(0,o.jsx)(ye,{children:(0,o.jsxs)(C.C8,{children:[(0,o.jsx)(C.XP,{children:`${p("Web_report_reason_select")} ${null===(i=y.UserData.selectedReason)||void 0===i?void 0:i.text}`}),!x&&(0,o.jsxs)(we,{style:{marginTop:"16px"},children:[(0,o.jsxs)(Ce,{children:[p("dsa_illegal_report_email"),P?(0,o.jsx)(Ee,{children:p("dsa_illegal_cite_law_optional")}):(0,o.jsx)(je,{children:"*"})]}),(0,o.jsx)(Pe,{rows:1,placeholder:p("dsa_illegal_report_fill_email"),value:h.loggedOutEmail,onBlur:()=>{j({loggedOutInvalid:!Je(h.loggedOutEmail)})},onChange:e=>{var t;m(Object.assign(Object.assign({},h),{loggedOutEmail:null!==(t=null==e?void 0:e.target.value)&&void 0!==t?t:""}))}}),(0,o.jsx)(De,{}),P?(0,o.jsx)(Ae,{children:p("cseReasons_reportPg_emailAddForm_body")}):null,k.loggedOutInvalid&&(0,o.jsxs)(Me,{children:[(0,o.jsx)(Ye.A,{}),(0,o.jsx)(Le,{children:p("dsa_illegal_report_trustedflagger_fill_email")})]})]}),(0,o.jsxs)(_e,{children:[(0,o.jsxs)(Ce,{children:[p("dsa_illegal_detail_country"),(0,o.jsx)(je,{children:"*"})]}),(0,o.jsxs)(Se,{onClick:M,children:[null===(l=y.choosenDSACountry)||void 0===l?void 0:l.desc,(0,o.jsx)(C._k,{children:(0,o.jsx)(xe.A,{width:16,height:16})})]})]}),(0,o.jsxs)(we,{children:[(0,o.jsxs)(Ce,{children:[p("dsa_illegal_detail_law"),(0,o.jsx)(Ee,{children:p("dsa_illegal_cite_law_optional")}),(0,o.jsxs)(ke,{children:[h.relevantLaw.length,"/200"]})]}),(0,o.jsx)(Pe,{rows:2,maxLength:200,placeholder:p("dsa_illegal_cite_law_desc"),value:h.relevantLaw,onChange:e=>{var t;m(Object.assign(Object.assign({},h),{relevantLaw:null!==(t=null==e?void 0:e.target.value)&&void 0!==t?t:""}))}}),(0,o.jsx)(De,{})]}),(0,o.jsxs)(we,{children:[(0,o.jsxs)(Ce,{children:[p("dsa_illegal_detail_explanation"),(0,o.jsx)(je,{children:"*"}),(0,o.jsxs)(ke,{children:[h.reportExplanation.length,"/400"]})]}),(0,o.jsx)(Pe,{rows:2,maxLength:400,placeholder:p("dsa_illegal_report_explanation_desc"),value:h.reportExplanation,onChange:e=>{var t;m(Object.assign(Object.assign({},h),{reportExplanation:null!==(t=null==e?void 0:e.target.value)&&void 0!==t?t:""}))}}),(0,o.jsx)(De,{})]}),w&&(0,o.jsxs)(we,{children:[(0,o.jsxs)(Ce,{children:[p("dsa_illegal_appeal_signature"),(0,o.jsx)(je,{children:"*"})]}),(0,o.jsx)(Pe,{rows:1,placeholder:p("dsa_illegal_sign_legal_name"),value:h.signature,onChange:e=>{var t;m(Object.assign(Object.assign({},h),{signature:null!==(t=null==e?void 0:e.target.value)&&void 0!==t?t:""}))}}),(0,o.jsx)(De,{})]}),(0,o.jsx)(Ge,{onSetIsTrustedFlagger:e=>{d(e)}}),(0,o.jsxs)(Ie,{onClick:()=>{m(Object.assign(Object.assign({},h),{checked:!h.checked}))},children:[(0,o.jsx)(Re.h$,{checked:h.checked,label:""}),(0,o.jsx)(Oe,{children:p("dsa_illegal_confirm_accuracy")})]}),L(),(0,o.jsx)(C.rW,{children:(0,o.jsx)(C.jl,{onClick:O,disabled:!D,children:p("Submit")})})]})})})),Xe=(0,j.default)("div",{target:"e1cnlexo0"})((({theme:e})=>({borderTop:`1px solid ${e.colors.LineSecondary}`,height:"703px",overflowY:"auto",overflowX:"hidden"})),"label:DivChooseCountryContainer;"),Qe=(0,j.default)("div",{target:"e1cnlexo1"})((({theme:e})=>({borderTop:`1px solid ${e.colors.LineSecondary}`,position:"relative"})),"label:DivSubmitContainer;");var et=i(84987);const tt={id:"search-35c41e45",use:"search-35c41e45-usage",viewBox:"0 0 19 19",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 19" id="search-35c41e45"><path fill="#161823" fill-opacity=".34" fill-rule="evenodd" d="M8 14A6 6 0 1 1 8 2a6 6 0 0 1 0 12m0 2a8 8 0 1 1 6.32-3.094l4.362 4.362a.5.5 0 0 1 0 .707l-.707.707a.5.5 0 0 1-.707 0l-4.362-4.362A7.97 7.97 0 0 1 8 16" clip-rule="evenodd" /></symbol>'};function it(e){const t=(0,r.useContext)(et.X);return(0,r.useLayoutEffect)((()=>(t.add(tt),()=>{t.remove("search-35c41e45")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#search-35c41e45"},void 0)}),void 0)}const ot=(0,j.default)("div",{target:"e9911am0"})((({theme:e})=>({background:e.colors.BGInput,borderRadius:"92px",height:"40px",position:"relative",display:"flex",alignItems:"center"})),"label:DivSearchBoxContainer;"),nt=(0,j.default)("input",{target:"e9911am1"})((({theme:e})=>({marginInlineStart:"16px",fontWeight:"400px",fontSize:"16px",lineHeight:"24px",color:e.colors.TextTertiary,userSelect:"none",border:"none",background:"none",resize:"none",width:"100%",height:"100%",outline:"none"})),"label:DivSearchBoxInput;"),at=(0,j.default)("div",{target:"e9911am2"})((({})=>[{marginInlineStart:"auto",marginInlineEnd:"52px",position:"relative",display:"flex",alignItems:"center"}]),"label:DivSearchContainer;"),rt=(0,j.default)("div",{target:"e9911am3"})((({theme:e})=>({height:"22px",width:"2px",background:e.colors.LineSecondary})),"label:DivVerticalLine;"),lt=(0,j.default)(it,{target:"e9911am4"})((({theme:{direction:e}})=>[{position:"absolute",left:"rtl"===e?"0px":"15px",right:"rtl"===e?"15px":"0px"}]),"label:DivSearchIconContainer;"),st=({placeholder:e,value:t,onChange:i,style:n={}})=>(0,o.jsxs)(ot,{style:n,children:[(0,o.jsx)(nt,{placeholder:e,value:t,onChange:i}),(0,o.jsxs)(at,{children:[(0,o.jsx)(rt,{}),(0,o.jsx)(lt,{})]})]}),dt=(0,j.default)("div",{target:"e15w45vc0"})((({theme:e})=>({padding:"16px 15px",display:"flex",alignItems:"center",color:e.colors.TextPrimary,lineHeight:"24px",fontSize:"16px",fontWeight:"400",cursor:"pointer"})),"label:DivItemContainer;"),ct=(0,j.default)("div",{target:"e15w45vc1"})({marginInlineStart:"auto"},"label:DivRadioWrapper;");var ut=i(54502);const pt=(0,j.default)("label",{target:"et49api0"})((({theme:e})=>({display:"flex",fontFamily:e.fontFamilies.TikTokFont,fontWeight:e.fontWeights.normal,fontSize:"16px",color:e.colors.TextSecondary,cursor:"pointer"})),"label:LabelCheckbox;"),ht=(0,j.default)("div",{target:"et49api1"})((({size:e})=>({color:"#fff",position:"relative",height:`${e}px`,width:`${e}px`,lineHeight:`${e}px`,marginInlineEnd:"8px"})),"label:DivCheckboxSymbol;"),gt=(0,j.default)("input",{target:"et49api2"})((({selected:e,bordertype:t,theme:i,size:o})=>Object.assign(Object.assign({appearance:"none",width:`${o}px`,height:`${o}px`,border:`1.5px solid ${i.colors.LineSecondary}`,margin:"0 10px -2.5px 0"},e?{border:"none",backgroundColor:i.colors.Primary}:{}),"radio"===t?{borderRadius:"50%"}:{borderRadius:"2px"})),"label:InputCheckbox;"),mt=(0,j.default)("div",{target:"et49api3"})((({size:e})=>({pointerEvents:"none",position:"absolute",left:`calc(50% - (${e}px * 0.618) / 2 + 0.5px)`,top:`calc(50% - (${e}px * 0.455) / 2 + 0.04px)`,width:`calc(${e}px * 0.618)`,height:`calc(${e}px * 0.455)`,lineHeight:"0px"})),"label:DivCheckboxIcon;"),vt=(0,r.memo)((function({id:e,value:t,label:i,onChange:n,bordertype:a="radio",style:l={},size:s=22}){const d=(0,r.useCallback)((e=>{n&&n(e.target.checked)}),[n]);return(0,o.jsxs)(pt,{htmlFor:e,style:l,children:[(0,o.jsxs)(ht,{size:s,className:"checkbox-symbol"+(t?" selected":""),children:[(0,o.jsx)(gt,{bordertype:a,selected:t,id:e,checked:t,type:"checkbox",size:s,onChange:d}),t&&(0,o.jsx)(mt,{size:s,children:(0,o.jsx)(ut.A,{width:.618*s,height:.455*s})})]}),i]})})),ft=({list:e=[],style:t={},onSelect:i,selectedIndex:n=-1,isMobile:a=!1})=>(0,o.jsx)("div",{style:t,children:e.map(((e,t)=>(0,o.jsxs)(dt,{onClick:()=>{i&&i(t,e)},children:[e.text,(0,o.jsx)(ct,{children:a?(0,o.jsx)(vt,{label:"",value:n===t}):(0,o.jsx)(Re.v3,{name:"",label:"",value:1,checked:n===t})})]},e.key)))}),xt=(0,r.memo)((function(){const e=(0,c.s)(),[t,i]=(0,r.useState)(""),[l,s]=(0,r.useState)(),[d,u]=(0,r.useState)(-1),p=(0,n.w)(g.y7),h=(0,a.P)(g.y7,{selector:e=>{const{UserData:t,PreState:i,DSACountriesList:o}=e;return{UserData:t,PreState:i,DSACountriesList:o}},dependencies:[]}),m=(0,r.useCallback)((e=>{null==e||e.preventDefault(),void 0!==l&&(p.setChoosenDSACountry(l),p.handlePrevStep())}),[l]),v=(0,r.useCallback)((e=>e.map((e=>({key:e.code,text:e.desc}))).sort(((e,t)=>e.key.localeCompare(t.key)))),[]),f=(0,r.useMemo)((()=>""===t.trim()?v(h.DSACountriesList):v(h.DSACountriesList).filter((e=>e.text.toLowerCase().startsWith(t.toLowerCase())))),[t,h.DSACountriesList]);return(0,o.jsxs)(Xe,{children:[(0,o.jsx)(st,{value:t,onChange:e=>{i(e.target.value),u(-1),s(void 0)},placeholder:e("dsa_illegal_select_region"),style:{margin:"24px 24px 16px 24px"}}),(0,o.jsx)(ft,{selectedIndex:d,list:f,style:{height:"522px",overflowY:"auto",padding:"0px 24px 0px 24px"},onSelect:e=>{u(e),s({code:f[e].key,desc:f[e].text})}}),(0,o.jsx)(Qe,{children:(0,o.jsx)(C.jl,{onClick:m,children:e("Confirm")})})]})})),bt=(0,r.memo)((function({onClose:e,visible:t=!1,asComponent:i=!1,setPage:m,onBack:v,useBack:f,onSubmit:x}){const b=(0,c.s)(),{isRTL:y}=(0,h.m)(),_=(0,n.w)(g.y7),w=(0,a.P)(g.y7,{selector:e=>{const{PageState:t,PreState:i,reportTarget:o,reasons:n,UserData:a}=e;return{PageState:t,PreState:i,reportTarget:o,reasons:n,UserData:a}},dependencies:[]}),k=(0,r.useCallback)((()=>{e()}),[e,w.reportTarget]),j=(0,r.useCallback)((()=>{_.resetState()}),[_]),S=(0,r.useCallback)((()=>{_.handlePrevStep(),null==v||v()}),[_]);(0,r.useEffect)((()=>{x&&_.setSubmitCallback(x)}),[x]),(0,r.useEffect)((()=>{m&&_.setPageState(m)}),[m]);const T=(0,r.useMemo)((()=>3===w.PageState?b("dsa_illegal_select_country_optional"):b("Report")),[w.PageState]),D=w.PreState.length>0||f,I=()=>0===w.PageState?(0,o.jsx)(P,{}):1===w.PageState?(0,o.jsx)(fe,{onClose:k}):2===w.PageState?(0,o.jsx)(Ze,{onClose:k}):3===w.PageState?(0,o.jsx)(xt,{}):void 0,O="undefined"!=typeof document&&document.fullscreenElement;return(0,r.useEffect)((()=>{O&&!t&&_.resetState()}),[_,O,t]),i?(0,o.jsx)(o.Fragment,{children:[0,1].includes(w.PageState)?(0,o.jsxs)(C.JS,{"data-e2e":"report-form",children:[(0,o.jsxs)(C.JN,{isBackable:D,children:[D&&(0,o.jsx)(C.D_,{onClick:S,children:y?(0,o.jsx)(l.A,{width:20,height:20}):(0,o.jsx)(s.A,{width:20,height:20})}),(0,o.jsx)(C.Fh,{"data-e2e":"report-title",children:T}),(0,o.jsx)(C.Ko,{"data-e2e":"report-card-cancel",onClick:k,children:(0,o.jsx)(d.A,{width:14,height:14})})]}),I()]}):(0,o.jsx)(C.bq,{"data-e2e":"report-form",children:I()})}):"undefined"!=typeof document&&document.fullscreenElement?(0,o.jsx)(u.aF,{parentRef:document.fullscreenElement,visible:t,onClose:k,maskCloseable:!1,keyboardCloseable:!1,children:[0,1,2,3].includes(w.PageState)?(0,o.jsxs)(C.JS,{"data-e2e":"report-form",children:[(0,o.jsxs)(C.JN,{isBackable:D,children:[D&&(0,o.jsx)(C.D_,{onClick:S,children:y?(0,o.jsx)(l.A,{width:20,height:20}):(0,o.jsx)(s.A,{width:20,height:20})}),(0,o.jsx)(C.Fh,{"data-e2e":"report-title",children:T}),(0,o.jsx)(C.Ko,{"data-e2e":"report-card-cancel",onClick:k,children:(0,o.jsx)(d.A,{width:14,height:14})})]}),I()]}):(0,o.jsx)(C.bq,{"data-e2e":"report-form",children:I()})}):(0,o.jsx)(p.i,{compact:!0,isOpen:t,onClose:k,onCloseComplete:j,closeOnBackdropClick:!1,closeOnEsc:!1,children:[0,1,2,3].includes(w.PageState)?(0,o.jsxs)(C.JS,{"data-e2e":"report-form",children:[(0,o.jsxs)(C.JN,{isBackable:D,children:[D&&(0,o.jsx)(C.D_,{onClick:S,children:y?(0,o.jsx)(l.A,{width:20,height:20}):(0,o.jsx)(s.A,{width:20,height:20})}),(0,o.jsx)(C.Fh,{"data-e2e":"report-title",children:T}),(0,o.jsx)(C.Ko,{"data-e2e":"report-card-cancel",onClick:k,children:(0,o.jsx)(d.A,{width:14,height:14})})]}),I()]}):(0,o.jsx)(C.bq,{"data-e2e":"report-form",children:I()})})}))},80704:(e,t,i)=>{i.d(t,{B:()=>p});var o=i(24643),n=i(46682),a=i(40099),r=i(60322),l=i(20157),s=i(29793),d=i(78305),c=i(42858);var u=i(37361);function p(e){const t=function(t){const i=function({onClose:e}={}){const{hideModal:t}=(0,l.g)(),[i,r]=(0,n.S)(s.hf,{selector:({showing:e})=>e,dependencies:[]}),d=(0,a.useCallback)((()=>{null==e||e(),t(),r.hideReport()}),[r,t,e]);return(0,o.jsx)(u.p,{onClose:d,visible:i})}(),r=function({onClose:e}={}){const{hideModal:t}=(0,l.g)(),[i,r]=(0,n.S)(d.y7,{selector:({showing:e})=>e,dependencies:[]}),s=(0,a.useCallback)((()=>{null==e||e(),t(),r.hideReport()}),[r,t,e]);return(0,o.jsx)(c.Y,{onClose:s,visible:i})}();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e,Object.assign({},t)),i,r]})};return t.displayName=`WithReport(${(0,r.x)(e)})`,t}},82595:(e,t,i)=>{i.d(t,{Y:()=>K});var o,n=i(58632),a=i(24643),r=i(40099),l=i(19744),s=i(32337),d=i(20934),c=i(38739),u=i(93608),p=i(4474),h=i(91257);!function(e){e.ManualClick="manual_click",e.Auto="auto",e.Keyboard="keyboard"}(o||(o={}));const g=(e,t)=>{const{itemId:i,authorId:o,autoplayStatus:n=0,searchId:a="",searchKeyword:r,searchResultId:l,questionId:s,isMute:d=!1,fromTab:c,collectionId:g,collectionName:m,isPaidPartnership:v=!1,poiId:f,duration:x,awemeType:b,picCnt:y,tab_name:_,playMode:w,enterMethod:C,always_translate_post_mode:k,see_original_show:j,see_translation_show:S,caption_language:T,caption_mode:P,caption_options:D}=t,I=Object.assign({group_id:i,author_id:o,autoplay_status:n,search_id:a,search_keyword:r,search_result_id:l,question_id:s,from_tab:c,collection_id:g,collection_name:m,poi_id:f,duration:x,aweme_type:null!=b?b:0,pic_cnt:y,tab_name:_,play_mode:h.Jr[w],enter_method:C,always_translate_post_mode:k,caption_language:T,caption_mode:P,caption_options:D,see_original_show:j,see_translation_show:S},(()=>{var e;const{href:t,search:i}=window.location;return{is_from_webapp:null!==(e=(0,p.parse)(i).is_from_webapp)&&void 0!==e?e:"0",page_url:t}})());I.is_mute=d?"1":"0",I.is_partnership=v?"1":"0",u.f.sendEvent(e,I)};var m,v=i(48615),f=i(89311),x=i(73580),b=i(15343),y=i(96959),_=i(21367),w=i(35281),C=i(67169),k=i(60484),j=i(63438),S=i(42983),T=i(87802);!function(e){e.NoInteract="failed because the user didn't interact with the document first.",e.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context",e.FireFox="The play method is not allowed by the user agent or the platform in the current context, possibly because the user denied permission."}(m||(m={}));const P=e=>({buffered:null==e?void 0:e.buffered,currentSrc:null==e?void 0:e.currentSrc,currentTime:null==e?void 0:e.currentTime,duration:null==e?void 0:e.duration,readyState:null==e?void 0:e.readyState,error:null==e?void 0:e.error,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted}),D=(0,r.memo)((0,r.forwardRef)((function(e,t){var{playProgress:i,muteSetting:o,onUnmount:l,onEnded:s,onWaiting:d,onError:c,disableDownload:u=!1,itemMute:p=!1}=e,h=(0,n.__rest)(e,["playProgress","muteSetting","onUnmount","onEnded","onWaiting","onError","disableDownload","itemMute"]);const g=(0,r.useRef)(null),m=(0,r.useRef)(!1),{mute:v,volume:f,playing:x}=(0,S.O2)(o),{setMute:b}=(0,T.S4)();(0,r.useImperativeHandle)(t,(()=>{const e=g.current;return{play:null==e?void 0:e.play.bind(e),pause:null==e?void 0:e.pause.bind(e),onTimeUpdate:t=>{null==e||e.addEventListener("timeupdate",(()=>{var i,o;const n=null!==(i=e.currentTime)&&void 0!==i?i:0,a=null!==(o=e.duration)&&void 0!==o?o:0;t(n/a,n,a)}))},onCanPlay:t=>{null==e||e.addEventListener("canplay",t)},getPlayerAttributes:()=>P(e)}}));const y=(0,r.useCallback)(((e=0)=>(0,n.__awaiter)(this,void 0,void 0,(function*(){var t,i,o,n;if(!(e>=3))try{yield null===(t=g.current)||void 0===t?void 0:t.play()}catch(t){const a=null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"";(null!==(n=null!==(o=a.match("failed because the user didn't interact with the document first."))&&void 0!==o?o:a.match("The request is not allowed by the user agent or the platform in the current context"))&&void 0!==n?n:a.match("The play method is not allowed by the user agent or the platform in the current context, possibly because the user denied permission."))?(b(!0),setTimeout((()=>{y(e+1)}),0)):y(e+1),null==c||c(t)}}))),[b]);(0,r.useEffect)((()=>{g.current&&(g.current.volume=f)}),[f]),(0,r.useEffect)((()=>{y(),g.current&&Math.abs(g.current.currentTime-i)>.2&&(g.current.currentTime=i)}),[i,y]),(0,r.useEffect)((()=>{var e;x?m.current&&(m.current=!1,y()):(m.current=!0,null===(e=g.current)||void 0===e||e.pause())}),[x,y]),(0,r.useEffect)((()=>{const e=g.current;return()=>{null==l||l(P(e))}}),[]),(0,r.useEffect)((()=>{u&&(g.current.oncontextmenu=e=>(e.preventDefault(),!1))}),[u,g]);const _=(0,r.useCallback)((e=>{null==d||d(e)}),[d]),w=(0,r.useCallback)((e=>{null==s||s(e),y()}),[s,y]);return(0,a.jsx)("audio",Object.assign({ref:g},h,{muted:p||v,playsInline:!0,autoPlay:!0,onEnded:w,onWaiting:_}))})));var I,O=i(18072);!function(e){e.NoInteract="failed because the user didn't interact with the document first.",e.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context"}(I||(I={}));const M=e=>({buffered:null==e?void 0:e.buffered,currentSrc:null==e?void 0:e.currentSrc,currentTime:null==e?void 0:e.currentTime,duration:null==e?void 0:e.duration,readyState:null==e?void 0:e.readyState,error:null==e?void 0:e.error,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted}),L=(0,r.memo)((0,r.forwardRef)((function(e,t){var{playProgress:i,muteSetting:o,onUnmount:l,onEnded:s,onWaiting:d,onError:c,disableDownload:u=!1,itemMute:p=!1}=e,h=(0,n.__rest)(e,["playProgress","muteSetting","onUnmount","onEnded","onWaiting","onError","disableDownload","itemMute"]);const g=(0,r.useRef)(null),m=(0,O.M2)(),{setMobileDefaultMute:v,setForcePause:f}=(0,O._B)();(0,r.useImperativeHandle)(t,(()=>{const e=g.current;return{play:null==e?void 0:e.play.bind(e),pause:null==e?void 0:e.pause.bind(e),onTimeUpdate:t=>{null==e||e.addEventListener("timeupdate",(()=>{var i,o;const n=null!==(i=e.currentTime)&&void 0!==i?i:0,a=null!==(o=e.duration)&&void 0!==o?o:0;t(n/a,n,a)}))},onCanPlay:t=>{null==e||e.addEventListener("canplay",t)},getPlayerAttributes:()=>M(e)}}));const x=(0,r.useCallback)((()=>(0,n.__awaiter)(this,void 0,void 0,(function*(){var e,t,i;try{yield null===(t=null===(e=g.current)||void 0===e?void 0:e.play)||void 0===t?void 0:t.call(e)}catch(e){return null==c||c(e),null!==(i=e.message)&&void 0!==i?i:""}return""}))),[c]),b=(0,r.useCallback)((()=>{x().then((e=>{(e.match("failed because the user didn't interact with the document first.")||e.match("The request is not allowed by the user agent or the platform in the current context"))&&(f(!1),v(!0))}))}),[f,v,x]);(0,r.useEffect)((()=>{g.current&&b()}),[b]),(0,r.useEffect)((()=>{const e=g.current;return()=>{null==l||l(M(e))}}),[]),(0,r.useEffect)((()=>{u&&(g.current.oncontextmenu=e=>(e.preventDefault(),!1))}),[u,g]);const y=(0,r.useCallback)((e=>{null==d||d(e)}),[d]),_=(0,r.useCallback)((e=>{null==s||s(e),x()}),[s,x]);return(0,a.jsx)("audio",Object.assign({ref:g},h,{muted:p||m,playsInline:!0,autoPlay:!0,onEnded:_,onWaiting:y}))}))),B=(0,r.memo)((0,r.forwardRef)((function({playUrl:e,id:t,teaParams:i,index:o,mode:n,itemMute:l,onAudioPause:s,onAudioPlaying:d,onAudioPlay:u,onAudioEnded:p,onAudioError:h,onTimeUpdate:g},m){var f;const{isAndroid:S=!1,isMobile:T=!1}=null!==(f=(0,v.U)((()=>["isMobile","isAndroid"]),[]))&&void 0!==f?f:{},{currentVideo:P,playProgress:I}=(0,_.MY)(),O=(0,w.Ih)(),M=(0,r.useRef)(null),B=(0,r.useRef)(null),E=(0,x.Nj)(c.Gs),A=new y.re,R=(0,x.Nj)(b.AU),[z,F]=(0,r.useState)(!1),U=(0,r.useCallback)((()=>{var e,t;null===(t=null===(e=M.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e)}),[]),V=(0,r.useCallback)((()=>{var e,t;null===(t=null===(e=M.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e)}),[]),W=(0,r.useMemo)((()=>{if(T){if(!O)return!1;const{id:e,index:i}=O;return!S||e===t&&i===o}if(!P)return!1;const{id:e,index:i,mode:a}=P;return e===t&&i===o&&a===n}),[T,P,t,o,n,O,S]);(0,r.useImperativeHandle)(m,(()=>({play:()=>{U(),B.current=!0},pause:()=>{V(),B.current=!1},onTimeUpdate:e=>{var t;null===(t=M.current)||void 0===t||t.onTimeUpdate(e)},get currentTime(){var e,t;return null!==(t=null===(e=M.current)||void 0===e?void 0:e.getPlayerAttributes().currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=M.current)||void 0===e?void 0:e.getPlayerAttributes().duration)&&void 0!==t?t:0},get currentCanPlay(){return W&&z}})),[U,V,W,z]),(0,r.useEffect)((()=>{W||F(!1)}),[W]);const N=(0,C.jj)();(0,r.useEffect)((()=>{const e=null===B.current||B.current;N&&e?U():V()}),[N,U,V,E,W,n]);const q=(0,r.useCallback)((()=>{var o;const a=(0,k.L$)(null===(o=M.current)||void 0===o?void 0:o.getPlayerAttributes()),{bitrate:r,author_id:l,format:s,encodedType:d,videoQuality:c,encodeUserTag:u,codecType:p,definition:h,secret:g,forFriend:m,aweme_type:v,pic_cnt:f}=i;return Object.assign({id:t,authorId:l,playMode:n,bitrate:r,format:s,encodedType:d,videoQuality:c,encodeUserTag:u,codecType:p,definition:h,secret:g,forFriend:m,play_url:e,awemeType:v,picCnt:f},null!=a?a:{})}),[t,n,i,e]),{handlePauseWithLoading:H,handlePlayingWithLoading:$}=(0,C.iJ)({isCurrentVideo:W}),K=(0,r.useCallback)((()=>{A.handleLoadStart(q())}),[A,q]),G=(0,r.useCallback)((e=>{null==u||u(e)}),[u]),Y=(0,r.useCallback)((()=>{var e;const{currentTime:t=0,duration:i=0}=(0,k.L$)(null===(e=M.current)||void 0===e?void 0:e.getPlayerAttributes());A.handleTimeUpdate(q()),null==g||g(t/i)}),[A,q,g]),J=(0,r.useCallback)((e=>{null==s||s(e),H()}),[s,H]),Z=(0,r.useCallback)((t=>{null==d||d(t),$(),R.reportVideoInteract({endTime:Date.now(),videoSource:e})}),[d,$,R,e]),X=(0,r.useCallback)((e=>{null==p||p(e),A.handleEnded()}),[p,A]);return(0,r.useEffect)((()=>()=>{A.resetWhenSlideChange(Object.assign({},q()))}),[e]),W?T?(0,a.jsx)(L,{ref:M,c:!0,muteSetting:l||j.T5[n].forceMute,defaultMute:j.T5[n].defaultMute,playProgress:null!=I?I:0,src:e,onTimeUpdate:Y,onError:h,onPause:J,onPlay:G,onPlaying:Z,onEnded:X,onLoadStart:K}):(0,a.jsx)(D,{ref:M,c:!0,muteSetting:l||j.T5[n].forceMute,defaultMute:j.T5[n].defaultMute,playProgress:null!=I?I:0,src:e,onTimeUpdate:Y,onError:h,onPause:J,onPlay:G,onPlaying:Z,onEnded:X,onLoadStart:K}):null})));var E=i(62186);const A=(0,E.default)("div",{target:"e10jea830"})((({isMobile:e})=>e?{position:"absolute",top:"0",width:"100vw",height:"100%",pointerEvents:"none",opacity:"1"}:{width:"100%",height:"100%",objectFit:"cover",backgroundColor:"black",borderRadius:"8px"}),"label:DivPhotoVideoContainer;"),R=(0,E.default)("div",{target:"e10jea831"})({width:"100%",height:"100%"},"label:DivSwiperContainer;"),z=(0,E.default)("img",{target:"e10jea832"})({height:"100%",width:"100%",objectFit:"contain"},"label:ImgPhotoSlide;");var F=i(53438),U=i(11654),V=i(32098),W=i(60072),N=i(84908),q=i(32125),H=i(99282);const $={delay:2500,disableOnInteraction:!1},K=(0,r.memo)((0,r.forwardRef)((function({show:e=!0,item:t,playMode:i,index:o,teaParams:u,onAudioPlay:p,onAudioError:h,onTimeUpdate:m,onFinish:b,isActive:y=!0,shouldAutostart:w=!0},C){var j,S,P,D,I,O;const{video:{duration:M,volumeInfo:L},id:E,itemMute:K=!1}=(0,k.L$)(t),G=null!==(S=null===(j=null==t?void 0:t.music)||void 0===j?void 0:j.playUrl)&&void 0!==S?S:"",Y=null!==(D=null===(P=null==t?void 0:t.imagePost)||void 0===P?void 0:P.images)&&void 0!==D?D:[],{isMobile:J=!1}=null!==(I=(0,v.U)((()=>["isMobile"]),[]))&&void 0!==I?I:{},Z=(0,W.mG)(),X=(0,N.nW)((e=>(null==t?void 0:t.author)?e.users[t.author]:void 0),q.bN),[Q,ee]=(0,r.useState)(!1),[te,ie]=(0,r.useState)(!1),oe=(0,r.useRef)(!1),ne=(0,r.useRef)(-1),ae=(0,r.useRef)(-1),re=(0,r.useRef)(!1),le=(0,r.useRef)(null),se=(0,r.useRef)(null),de=(0,r.useRef)([]),{isRTL:ce}=(0,f.m)(),ue=(0,_.eu)(),pe=(0,T.i3)(),{handleBreakCount:he}=(0,V.K)(i),ge=(0,r.useMemo)((()=>y&&(Y.length>1||ue)),[y,ue,Y.length]),me=(0,r.useMemo)((()=>[""]),[]),ve=ce?"rtl":"ltr",{aweme_type:fe,pic_cnt:xe}=(0,F.MA)(t),be=(0,H.WH)(null!==(O=null==t?void 0:t.id)&&void 0!==O?O:""),ye=(0,r.useMemo)((()=>Object.assign(Object.assign({},u),{aweme_type:fe,pic_cnt:xe})),[fe,xe,u]),_e=(0,r.useMemo)((()=>{const{group_id:e="",author_id:t="",is_scheduled:o,search_id:n,search_keyword:a,search_result_id:r,question_id:l,collection_id:s,collection_name:d,isPaidPartnership:c,poi_id:p,tab_name:h,isReposted:g,enter_method:m}=u||{};return Object.assign({itemId:e,authorId:t,isScheduled:Boolean(o),autoplayStatus:1,searchId:n,searchKeyword:a,searchResultId:r,questionId:l,playMode:i,isMute:pe,collectionId:s,collectionName:d,isPaidPartnership:Boolean(c),poiId:p,awemeType:fe,picCnt:xe,isReposted:g,tab_name:h,enterMethod:m},be)}),[fe,i,pe,xe,u,be]),we=(0,r.useMemo)((()=>Object.assign(Object.assign({},_e),{currentTime:0,duration:0})),[_e]),Ce=(0,x.Nj)(c.Gs),ke=(0,r.useCallback)((()=>{if(ne.current<=0)return;const e=Number(new Date)-ne.current;we.duration=e,2!==i&&g("play_time",we)}),[i,we]),je=(0,r.useCallback)((()=>{var e;if(Y.length>1){const t=null===(e=se.current)||void 0===e?void 0:e.autoplay;null==t||t.start()}Ce.triggerPlay(),ne.current=Number(new Date),oe.current=!1}),[Y.length,Ce]),Se=(0,r.useCallback)((e=>{var t;const o=null===(t=se.current)||void 0===t?void 0:t.autoplay;null==o||o.stop(),Ce.triggerPause({aweme_type:fe,pic_cnt:xe,enter_method:e,playMode:i}),y&&ke()}),[fe,i,xe,Ce,y,ke]),Te=(0,x.Nj)(U.V),Pe=(0,r.useCallback)((()=>{Te.reportActualFMP()}),[Te]);(0,r.useEffect)((()=>{const e=()=>{var e,t,i,o;document.hidden?(y&&Se("other"),null===(t=null===(e=le.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e)):y&&(je(),null===(o=null===(i=le.current)||void 0===i?void 0:i.play)||void 0===o||o.call(i))};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)}),[y,Se,je]),(0,r.useEffect)((()=>{Q&&y&&(ne.current=Number(new Date),ae.current=ne.current,g("video_play",we),Ce.handleAudioPlay(E),Ce.triggerPlay(),oe.current=!1)}),[Q,y]),(0,r.useEffect)((()=>{var e;if(ge){const t=null===(e=se.current)||void 0===e?void 0:e.autoplay;null==t||t.start()}}),[ge]),(0,r.useEffect)((()=>ie(!0)),[]);const De=(0,r.useCallback)((()=>{he(),(0!==i||y)&&ke()}),[i,y,ke,he]),Ie=(0,r.useCallback)((()=>{var e,t,o;if(4!==i){null===(t=null===(e=le.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e);const i=null===(o=se.current)||void 0===o?void 0:o.autoplay;null==i||i.stop()}null==b||b()}),[i,b]),Oe=(0,r.useCallback)((e=>{e.realIndex===Y.length-1&&(oe.current?ue&&Ie():(he(),g("video_play_finish",we),oe.current=!0,Y.length>1&&ue&&Ie()))}),[Y.length,we,ue]),Me=(0,r.useCallback)((()=>{re.current=!0}),[]),Le=(0,r.useCallback)((()=>{re.current=!1}),[]),Be=(0,r.useCallback)((e=>{Y.length}),[Y.length]),Ee=(0,r.useCallback)((e=>{const i=t,{author:o}=i,a=(0,n.__rest)(i,["author"]);for(let t=0;t<a.imagePost.images.length;t++){const i=e.slides[t].firstElementChild,o=i.naturalHeight,n=i.naturalWidth;a.imagePost.images[t].imageHeight=o,a.imagePost.images[t].imageWidth=n}a.author=X,Z.setItem(a)}),[X,t,Z]);return(0,r.useImperativeHandle)(C,(()=>({audio:{play:()=>{var e,t;null===(t=null===(e=le.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e)},pause:()=>{var e,t;null===(t=null===(e=le.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e)},onTimeUpdate:e=>{var t;null===(t=le.current)||void 0===t||t.onTimeUpdate(e)},get currentTime(){var e,t;return null!==(t=null===(e=le.current)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=le.current)||void 0===e?void 0:e.duration)&&void 0!==t?t:0},get currentCanPlay(){var e,t;return null!==(t=null===(e=le.current)||void 0===e?void 0:e.currentCanPlay)&&void 0!==t&&t}},swiper:{play:je,pause:Se,slidePrev:e=>{var t,i;re.current||(null===(t=se.current)||void 0===t||t.slidePrev(),null===(i=se.current)||void 0===i||i.autoplay.stop(),ae.current===ne.current&&(ae.current=Number(new Date)),Y.length)},slideNext:e=>{var t,i;re.current||(null===(t=se.current)||void 0===t||t.slideNext(),null===(i=se.current)||void 0===i||i.autoplay.stop(),ae.current===ne.current&&(ae.current=Number(new Date)),Y.length)},slideToLoop:e=>{var t;null===(t=se.current)||void 0===t||t.slideToLoop(e)},onActiveIndexChange:e=>{de.current.push(e);const t=se.current;t&&(t.off("activeIndexChange"),de.current.forEach((e=>t.on("activeIndexChange",e))))},get paused(){var e;return!(null===(e=se.current)||void 0===e?void 0:e.autoplay.running)}}}))),te?(0,a.jsxs)(A,{isMobile:J,children:[(0,a.jsx)("link",{rel:"stylesheet",href:s}),e&&(0,a.jsx)(R,{children:Y.length>0?(0,a.jsx)(d.RC,{loop:!0,onInit:e=>{se.current=e,de.current.forEach((t=>e.on("activeIndexChange",t)))},style:{height:"100%",zIndex:0},speed:800,dir:ve,modules:[l.Ij],autoplay:!(!ge||!w)&&$,allowSlideNext:ge,allowSlidePrev:ge,preventClicks:!1,preventClicksPropagation:!1,onAfterInit:()=>ee(!0),onImagesReady:e=>{Ee(e)},onDestroy:De,onSlideNextTransitionEnd:Oe,onSlideChangeTransitionStart:Me,onSlideChangeTransitionEnd:Le,onAutoplay:Be,slidesPerView:"auto",touchStartPreventDefault:!1,children:Y.map((e=>{var t,i;return(0,a.jsx)(d.qr,{style:{height:"100%"},children:(0,a.jsx)(z,{src:(null!==(t=e.imageURL.urlList)&&void 0!==t?t:me)[0],onLoad:Pe})},(null!==(i=e.imageURL.urlList)&&void 0!==i?i:me)[0])}))}):null}),(0,a.jsx)(B,{ref:le,index:o,id:E,mode:i,duration:M,playUrl:G,teaParams:ye,volumeInfo:L,itemMute:K,onAudioPlay:p,onAudioError:h,onTimeUpdate:m,preload:"metadata",playsInline:!0})]}):null})))},99893:(e,t,i)=>{i.d(t,{Z:()=>h});var o=i(24643),n=i(67518),a=i(4408),r=i(40099),l=i(82436),s=i(25616),d=i(62186),c=i(72153);const u=(0,d.default)("div",{target:"e4cyjsy0"})((({theme:e,justifyContent:t})=>[(0,c.zy)({theme:e,fontFamily:"TikTokFont",color:"ConstTextInverse"}),{background:e.colors.BGInverse3,display:"flex",justifyContent:t,alignItems:"center"}]),"label:DivScheduleItemWarn;");function p(e){const t=(0,a.unix)(e).format("YYYY-M-D-H:mm"),[i,n,r,l]=t.split("-");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:""}),(0,o.jsx)("span",{children:i}),(0,o.jsx)("span",{children:"-"}),(0,o.jsx)("span",{children:n}),(0,o.jsx)("span",{children:"-"}),(0,o.jsx)("span",{children:r}),(0,o.jsx)("span",{children:""}),(0,o.jsx)("span",{children:l})]})}const h=(0,r.memo)((function({height:e,fontSize:t,scheduledTime:i,iconSize:a,iconMargin:r,className:d,isTextAlignStart:c=!1}){const{direction:h}=(0,n.u)(),g=(0,s.s)();return(0,o.jsxs)(u,{justifyContent:c?"center":void 0,className:d,style:{fontSize:t,height:e,lineHeight:e},children:[(0,o.jsx)(l.A,{width:a,height:a,style:{["ltr"===h?"marginRight":"marginLeft"]:r}}),g("scheduled_for"),p(i)]})}))},37350:(e,t,i)=>{i.d(t,{C7:()=>y,XY:()=>b,lO:()=>C,rY:()=>_,vV:()=>j});var o=i(24643),n=i(67518),a=i(46682),r=i(40099),l=i(73057),s=i(19434),d=i(23973),c=i(92067),u=i(16537),p=i(52016),h=i(43039),g=i(60751),m=i(69617),v=i(25616),f=i(67169),x=i(60445);const b=()=>{const[{dimmer:e},t]=(0,a.S)(x.aL,{selector:e=>({dimmer:e.dimmer}),dependencies:[]}),i=(0,r.useRef)(0);return{dimmer:e,handleLightenVideoControls:(0,r.useCallback)((()=>{window.clearTimeout(i.current),t.setDimmer(!1),i.current=window.setTimeout((()=>{t.setDimmer(!0)}),3e3)}),[t])}},y=({isActive:e=!1,group_id:t,author_id:i,playModeForTea:o})=>{const[n,a]=(0,r.useState)(1),l=(0,r.useCallback)((e=>()=>{e!==n&&(a(e),m.V.handleVideoControlChange({group_id:t,author_id:i,play_mode:o,click_section:"speed",enter_method:"click",change_params:e}))}),[i,t,o,n]),s=(0,r.useCallback)((()=>{a(1)}),[]);return(0,r.useEffect)((()=>{e||a(1)}),[e]),{playbackRate:n,handleChangePlaybackRate:l,handleResetPlayBack:s}},_=()=>{const[e,t]=(0,r.useState)(!1),i=(0,r.useRef)(0),o=(0,r.useCallback)((()=>{clearTimeout(i.current),e||t(!0)}),[e]),n=(0,r.useCallback)((()=>{i.current=window.setTimeout((()=>{t(!1)}),50)}),[]),a=(0,r.useCallback)((()=>{clearTimeout(i.current),t(!1)}),[]);return{active:e,handleDismissPanel:a,handleMouseMouseEnter:o,handleMouseLeave:n}},w={width:24,height:24,fill:"#fff"},C=({pause:e,fullscreen:t,playMode:i,ended:n,itemMute:a})=>{const{mute:m}=(0,f.ah)({playMode:i,itemMute:a});return{playIcon:(0,r.useMemo)((()=>n?(0,o.jsx)(l.A,Object.assign({},w)):e?(0,o.jsx)(s.A,Object.assign({},w)):(0,o.jsx)(d.A,Object.assign({},w))),[e,n]),muteIcon:(0,r.useMemo)((()=>m?(0,o.jsx)(c.A,Object.assign({},w)):(0,o.jsx)(u.A,Object.assign({},w))),[m]),fullscreenIcon:t?(0,o.jsx)(p.A,Object.assign({},w)):(0,o.jsx)(h.A,{width:18,height:18,fill:"#fff"}),settingIcon:(0,o.jsx)(g.A,Object.assign({},w))}},k={.75:"0.75x",1:"1.0x",1.25:"1.25x",1.5:"1.5x",2:"2.0x"},j=({playbackRate:e})=>{const{colors:t}=(0,n.u)(),i=(0,v.s)();return{fullScreenText:i("pc_web_fullscreen_btn"),speedText:1===e?i("pc_web_speed_btn"):k[e],tooltipStyle:(0,r.useMemo)((()=>({background:t.BGCreation2,paddingInlineStart:"20px",paddingInlineEnd:"20px",fontWeight:600,fontSize:"16px",lineHeight:"24px",whiteSpace:"nowrap"})),[t.BGCreation2]),volumeStyle:(0,r.useMemo)((()=>({background:t.BGCreation2,marginBottom:"27px"})),[t.BGCreation2])}}},53924:(e,t,i)=>{i.d(t,{w:()=>s});var o=i(60484),n=i(71281),a=i(49057),r=i(21367),l=i(96462);const s=()=>{var e;const{abTestVersion:t}=(0,o.L$)((0,a.W)((()=>["abTestVersion"]),[])),i=null!==(e=(0,n.qt)(t,"player_error_optimize"))&&void 0!==e?e:"v0",s=(0,r.ms)(),d="1"!==(0,l.vk)(),c=["v2","v3"].includes(i)&&s,u="v1"===i&&d;return{shouldShowPlayerError:c,shouldShowPlayerUnsupported:u,isPlayerErrorOrUnsupported:c||u,shouldShowLearnMore:"v2"===i}}},30772:(e,t,i)=>{i.d(t,{D:()=>h});var o=i(24643),n=i(40099),a=i(80417),r=i(25616),l=i(97008),s=i(62186),d=i(5227),c=i(72153);const u=(0,s.default)("button",{target:"ef0ywbl0"})(c.WA,(({theme:e})=>[(0,c.mp)({direction:e.direction,end:"26px"}),(0,c.zy)({theme:e,fontFamily:"TikTokFont",fontWeight:"semiBold",color:"TextPrimary",typography:"P3"})]),{display:"flex",justifyContent:"center",alignItems:"center",height:"20px",cursor:"pointer",":hover":{textDecoration:"underline"}},"label:ButtonDelete;"),p=(0,s.default)(d.A,{target:"ef0ywbl1"})((({theme:{direction:e}})=>(0,c.mp)({direction:e,marginEnd:6})),"label:StyledTrashBin;"),h=function({video:e}){const[t,i]=(0,n.useState)(!1),s=(0,r.s)(),d=(0,n.useCallback)((()=>{i(!0),a.y.handleScheduleConfirm(e.id)}),[e.id]),c=(0,n.useCallback)((()=>{i(!1)}),[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(u,{type:"button",onClick:d,children:[(0,o.jsx)(p,{width:18.33,height:18.33}),s("delete")]}),(0,o.jsx)(l.G,{visible:t,onClose:c,videoId:e.id,isScheduled:!0})]})}},97057:(e,t,i)=>{i.d(t,{CH:()=>h,D_:()=>l,HI:()=>s,IW:()=>d,M8:()=>m,ah:()=>u,ap:()=>c,xV:()=>g});var o=i(62186),n=i(72153),a=i(85041),r=i(35656);const l=(0,o.default)("div",{target:"evv7pft0"})({display:"flex",flexDirection:"row",alignItems:"center",padding:"0px",marginBottom:"15px",position:"relative",flex:"0 0 82px"},"label:DivInfoContainer;"),s=(0,o.default)("span",{target:"evv7pft1"})((({theme:e,shouldAvatarShowNickName:t})=>[(0,n.zy)({theme:e,typography:"P1",fontWeight:"bold",fontFamily:"TikTokDisplayFont"}),t&&{size:"20px",lineHeight:"28px"}]),"label:SpanUniqueId;");s.defaultProps=Object.assign(Object.assign({},s.defaultProps),{"data-e2e":"browse-username"});const d=(0,o.default)("span",{target:"evv7pft2"})(Object.assign(Object.assign({},(0,n.m4)(1)),{display:"inline"}),"label:SpanEllipsis;"),c=(0,o.default)("span",{target:"evv7pft3"})((({theme:e,shouldAvatarShowNickName:t,isDetailPage:i})=>[(0,n.zy)({theme:e,typography:"P3",fontFamily:"TikTokFont",color:i?"TextSecondary":void 0}),t&&{color:e.colors.TextTertiaryAlt},{display:"flex",alignItems:"center"}]),"label:SpanOtherInfos;");c.defaultProps=Object.assign(Object.assign({},c.defaultProps),{"data-e2e":"browser-nickname"});const u=(0,o.default)(a.E,{target:"evv7pft4"})(n.PR,n.AB,{flex:"1 1 auto",":hover":{[`${s}`]:{textDecoration:"underline"}}},(({theme:{direction:e}})=>(0,n.mp)({direction:e,marginEnd:"12px"})),"label:StyledLink;"),p=({theme:{direction:e}})=>[{flex:"0 0 40px",":hover":{[`~ ${u} ${s}`]:{textDecoration:"underline"}}},(0,n.mp)({direction:e,marginEnd:"12px"})];function h(e){return e?(0,o.default)(r.B,{target:"evv7pft5"})(p):(0,o.default)(a.E,{target:"evv7pft6"})(p)}const g=(0,o.default)("div",{target:"evv7pft7"})({justifySelf:"flex-end"},"label:DivBtnWrapper;");g.defaultProps=Object.assign(Object.assign({},g.defaultProps),{"data-e2e":"browse-follow"});const m=(0,o.default)("span",{target:"evv7pft8"})((({theme:e})=>({margin:"0px 4px",border:"0.5px",borderStyle:"solid",height:"13.5px",borderColor:e.colors.LinePrimary})),"label:SpanDivider;")},69152:(e,t,i)=>{i.d(t,{KE:()=>y});var o=i(24643),n=i(67518),a=i(40099),r=i(80417),l=i(25616),s=i(60342),d=i(97706),c=i(37992),u=i(62186),p=i(60751),h=i(72153);const g=(0,u.default)("div",{target:"e161jvwg0"})({position:"relative",flex:"0 0 24px",width:"24px",height:"24px"},"label:DivActionContainer;"),m=(0,u.default)(p.A,{target:"e161jvwg1"})({width:24,height:24,cursor:"pointer"},"label:StyledEllipsisHorizontal;"),v=(0,u.default)("ul",{target:"e161jvwg2"})((({theme:e})=>(0,h.zy)({theme:e,typography:"P2",fontWeight:"semiBold",fontFamily:"TikTokFont"})),{listStyle:"none",margin:"0",padding:"8px 16px",whiteSpace:"nowrap",minWidth:"200px"},"label:UlPopupContainer;"),f=(0,u.default)("li",{target:"e161jvwg3"})((({theme:{colors:e}})=>({position:"relative",padding:"13px",":last-of-type::before":{content:'""',position:"absolute",left:0,top:0,width:"100%",height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)"}})),"label:LiPopupItem;"),x=(0,u.default)("button",{target:"e161jvwg4"})(h.WA,(({theme:{colors:e}})=>({cursor:"pointer",color:e.TextPrimary,":hover":{color:e.Primary}})),"label:ButtonAction;");var b=i(97008);const y=function({videoId:e}){const{direction:t}=(0,n.u)(),i="ltr"===t?"bottomRight":"bottomLeft",u=(0,l.s)(),{active:p,handleMouseEnter:h,handleMouseLeave:y}=(0,s.K)(),[_,w]=(0,a.useState)(!1),C=(0,a.useCallback)((()=>{w(!0)}),[]),k=(0,a.useCallback)((()=>{w(!1)}),[]),[j,S]=(0,a.useState)(!1),T=(0,a.useCallback)((()=>{S(!0),r.y.handleClickDeleteVideo({group_id:e})}),[e]),P=(0,a.useCallback)((()=>{S(!1)}),[]),{colors:D}=(0,n.u)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(g,{"data-e2e":"video-setting",onMouseEnter:h,onMouseLeave:y,children:[(0,o.jsx)(m,{}),(0,o.jsx)(d.z,{backgroundColor:D.BGSecondary,placement:i,active:p,margin:-11,arrowMargin:10,children:(0,o.jsxs)(v,{children:[(0,o.jsx)(f,{"data-e2e":"video-privacy-settings",children:(0,o.jsx)(x,{onClick:C,type:"button",children:u("privacy_set")})}),(0,o.jsx)(f,{"data-e2e":"video-delete",children:(0,o.jsx)(x,{onClick:T,type:"button",children:u("delete")})})]})})]}),(0,o.jsx)(c.p,{videoId:e,visible:_,onClose:k}),(0,o.jsx)(b.G,{visible:j,onClose:P,videoId:e})]})}},37992:(e,t,i)=>{i.d(t,{p:()=>be});var o=i(24643),n=i(57432),a=i.n(n),r=i(87905),l=i(25616),s=i(47926),d=i(40099),c=i(75431),u=i(62186),p=i(3089),h=i(72153);const g=(0,u.default)("div",{target:"e1rwytmq0"})((({theme:e})=>[(0,h.zy)({theme:e,typography:"H6",fontFamily:"TikTokFont"}),{position:"relative",userSelect:"none"}]),"label:DivContainer;"),m=(0,u.default)("div",{target:"e1rwytmq1"})((({theme:{colors:e}})=>({display:"flex",flexDirection:"row",alignItems:"center",padding:"12px",borderRadius:"2px",border:`1px solid ${e.LineSecondary2}`,cursor:"pointer"})),"label:DivSelectionContainer;"),v=(0,u.default)("p",{target:"e1rwytmq2"})(h.PR,{flex:"1 1 auto"},"label:PSelected;"),f=(0,u.default)(p.A,{target:"e1rwytmq3"})({width:24,height:24,flex:"0 0 24px"},"label:StyledChevronDown;"),x=(0,u.default)("div",{target:"e1rwytmq4"})({position:"fixed",left:0,right:0,top:0,bottom:0},"label:DivSelectMask;"),b=(0,c.i7)({from:{opacity:"0",transform:"scale(0.6, 0.6)"},"70%":{opacity:"1",transform:"scale(1.01, 1.01)"},to:{opacity:"1",transform:"scale(1, 1)",animationTimingFunction:"cubic-bezier(0.215, 0.61, 0.355, 1)"}}),y=(0,u.default)("ul",{target:"e1rwytmq5"})((({theme:{colors:e}})=>({position:"absolute",left:0,right:0,margin:0,padding:0,listStyle:"none",border:`1px solid ${e.LineSecondary}`,background:e.BGPrimary,boxShadow:`0px 2px 8px ${e.ShadowPrimary}`,animation:`${b} 100ms normal`,transformOrigin:"center top",zIndex:1})),"label:UlOptionsContainer;"),_=(0,u.default)("li",{target:"e1rwytmq6"})((({theme:{colors:e}})=>({cursor:"pointer",padding:"8px 12px",":hover":{background:e.BGView}})),"label:LiOptionsItem;"),w=(0,u.default)("p",{target:"e1rwytmq7"})(h.PR,"label:POptionsTitle;"),C=(0,u.default)("p",{target:"e1rwytmq8"})({},(({theme:e})=>(0,h.zy)({theme:e,typography:"P4",color:"TextTertiary"})),"label:POptionsDesc;");function k({value:e,options:t,e2eData:i,itemE2eData:n,onChange:a,placeholder:r}){var l,s;const[c,u]=(0,d.useState)(!1),p=t.find((({value:t})=>t===e)),h=(0,d.useCallback)((()=>{u(!0)}),[]),b=(0,d.useCallback)((()=>{u(!1)}),[]),k=(0,d.useCallback)((e=>()=>{null==a||a(e),b()}),[b,a]);return(0,o.jsxs)(g,{children:[(0,o.jsxs)(m,{"data-e2e":i,onClick:h,children:[(0,o.jsx)(v,{children:null!==(s=null!==(l=null==p?void 0:p.title)&&void 0!==l?l:null==p?void 0:p.value)&&void 0!==s?s:r}),(0,o.jsx)(f,{width:24,height:24})]}),c&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(x,{onClick:b}),(0,o.jsx)(y,{children:t.map((({value:e,key:t,title:i,desc:a})=>{const r=String(null!=i?i:e);return(0,o.jsxs)(_,{"data-e2e":n,title:r,onClick:k(e),children:[(0,o.jsx)(w,{children:i}),a&&(0,o.jsx)(C,{children:a})]},null!=t?t:String(e))}))})]})]})}var j,S,T=i(40935),P=i(79395),D=i(46682),I=i(58632),O=i(64162),M=i(4126),L=i(93995),B=i(26324),E=i(95719),A=i(62564),R=i(35572),z=i(24451),F=i(93608);!function(e){e.PrivateAccountPop="private_account_pop",e.PrivateAccountPopClick="private_account_pop_click",e.CookieBannerShow="cookie_banner_show",e.CookieBannerEnterPolicy="enter_cookie_policy",e.ChangeCookieSetting="change_cookie_setting",e.ClickCookiePolicy="click_cookie_policy",e.ClickCookieSettings="click_cookie_settings"}(j||(j={})),function(e){e.ClickBannerAccept="click_banner_accept",e.ClickBannerDecline="click_banner_decline",e.ClickPolicy="click_banner_cookie_policy",e.ClickSettings="click_banner_cookie_settings",e.FYPPersonalization="fyp_personalization"}(S||(S={}));var U,V,W=i(22248),N=i(55322),q=i(54503);!function(e){e[e.Show=0]="Show",e[e.CanNotModify=1]="CanNotModify",e[e.Hide=2]="Hide"}(U||(U={})),function(e){e[e.NoRestriction=0]="NoRestriction",e[e.Compliance=1]="Compliance",e[e.FamilyPairing=2]="FamilyPairing",e[e.PrivateAccount=3]="PrivateAccount"}(V||(V={}));let H=class extends O.E{constructor(e){super(),this.service=e,this.defaultState={isPrivateBannerShowing:!1,videoPrivateSetting:{duet:{show_type:0,res_type:0},stitch:{show_type:0,res_type:0}}}}setIsPrivateBannerShowing(e,t){e.isPrivateBannerShowing=t}handleShowPrivateBanner(e){return e.pipe((0,E.M)((e=>{e&&F.f.event("private_account_pop")})),(0,A.T)((e=>this.getActions().setIsPrivateBannerShowing(e))))}handlePrivateBannerClose(e){return e.pipe((0,E.M)((()=>{var e;e="ok",F.f.event("private_account_pop_click",{result:e})})),(0,R.p)((()=>this.service.postPrivateBannerAck())),(0,E.M)((e=>{(0,W.G)(e.statusCode,[0])})),(0,A.T)((e=>0===e.statusCode?this.getActions().setIsPrivateBannerShowing(!1):this.noop())),(0,N.n)({}))}setVideoPrivateSetting(e,t){e.videoPrivateSetting=t}getVideoPrivateSetting(e){return e.pipe((0,z.E)(this.state$),(0,R.p)((([e,t])=>this.service.getVideoPrivateSetting().pipe((0,A.T)((e=>{var i,o,n,a;const{private_settings:r}=e;return this.getActions().setVideoPrivateSetting({duet:{show_type:null!==(i=null==r?void 0:r.video_privacy.duet.show_type)&&void 0!==i?i:t.videoPrivateSetting.duet.show_type,res_type:null!==(o=null==r?void 0:r.video_privacy.duet.res_type)&&void 0!==o?o:t.videoPrivateSetting.duet.res_type},stitch:{show_type:null!==(n=null==r?void 0:r.video_privacy.stitch.show_type)&&void 0!==n?n:t.videoPrivateSetting.stitch.show_type,res_type:null!==(a=null==r?void 0:r.video_privacy.stitch.res_type)&&void 0!==a?a:t.videoPrivateSetting.stitch.res_type}})}))))),(0,N.n)({}))}};(0,I.__decorate)([(0,M.h5)(),(0,I.__metadata)("design:type",Function),(0,I.__metadata)("design:paramtypes",[Object,Boolean]),(0,I.__metadata)("design:returntype",void 0)],H.prototype,"setIsPrivateBannerShowing",null),(0,I.__decorate)([(0,M.Mj)(),(0,I.__metadata)("design:type",Function),(0,I.__metadata)("design:paramtypes",[B.c]),(0,I.__metadata)("design:returntype",void 0)],H.prototype,"handleShowPrivateBanner",null),(0,I.__decorate)([(0,M.Mj)(),(0,I.__metadata)("design:type",Function),(0,I.__metadata)("design:paramtypes",[B.c]),(0,I.__metadata)("design:returntype",void 0)],H.prototype,"handlePrivateBannerClose",null),(0,I.__decorate)([(0,M.h5)(),(0,I.__metadata)("design:type",Function),(0,I.__metadata)("design:paramtypes",[Object,Object]),(0,I.__metadata)("design:returntype",void 0)],H.prototype,"setVideoPrivateSetting",null),(0,I.__decorate)([(0,M.Mj)(),(0,I.__metadata)("design:type",Function),(0,I.__metadata)("design:paramtypes",[B.c]),(0,I.__metadata)("design:returntype",void 0)],H.prototype,"getVideoPrivateSetting",null),H=(0,I.__decorate)([(0,L.n)("Compliance"),(0,I.__metadata)("design:paramtypes",[q.D])],H);var $=i(19442),K=i(88920),G=i(16085),Y=i(80417),J=i(39228),Z=i(26325),X=i(71111),Q=i(31209),ee=i(92032),te=i(29909),ie=i(60072),oe=i(49568),ne=function(e,t,i,o){return new(i||(i=Promise))((function(n,a){function r(e){try{s(o.next(e))}catch(e){a(e)}}function l(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,l)}s((o=o.apply(e,t||[])).next())}))};const ae={3:"friends",2:"private",1:"public"},re=(0,X.atom)({}),{useAtomService:le,useServiceDispatchers:se,useServiceState:de,getStaticApi:ce}=(0,Q.i)(re,((e,t)=>({setDeleteVideo(e){(0,ee.Ds)().setDeleteVideo(e),(0,te.HG)().setDeleteVideo(e)},postModifyVisibility(e){return ne(this,void 0,void 0,(function*(){const i=e.aweme_id,o=(0,oe.u8)();try{const{status_code:n,status_msg:a}=yield function(e){return ne(this,void 0,void 0,(function*(){return J.hd.post("/api/aweme/modify/visibility/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:J.hd.csrfToken}),headers:{[Z.nk]:J.hd.csrfToken},baseUrlType:2})}))}(e);if(t(re,{api:"postModifyVisibility",statusCode:n,statusMessage:a}),0!==n)return o.addToast({toastMessageType:oe.PU.Error,messageKey:"Sorry, something wrong with the server, please try again."}),void(2054===n&&this.setDeleteVideo(i));(0,ie.ud)().setItemPrivateState({id:i,visibility:e.type}),Y.y.handleSelectPrivacySettingVideo({to_status:ae[e.type]}),(0,W.G)(n,[0])}catch(e){o.addToast({toastMessageType:oe.PU.Error,messageKey:"Sorry, something wrong with the server, please try again."})}}))},postUserSetting(e){return ne(this,void 0,void 0,(function*(){const i=e.aweme_id,o=(0,oe.u8)();try{const{status_code:n}=yield function(e){return ne(this,void 0,void 0,(function*(){return J.hd.post("/api/user/set/settings/",{baseUrlType:2,query:Object.assign(Object.assign({},e),{tt_csrf_token:J.hd.csrfToken}),headers:{[Z.nk]:J.hd.csrfToken}})}))}(e);if(t(re,{api:"postUserSetting",statusCode:n}),0!==n)return o.addToast({toastMessageType:oe.PU.Error,messageKey:"Sorry, something wrong with the server, please try again."}),void(2054===n&&this.setDeleteVideo(i));(0,ie.ud)().updateItem({id:i,itemCommentStatus:e.private_setting}),Y.y.handlePrivateSetting({target:"comment",to_status:0===e.private_setting?"on":"off"})}catch(e){o.addToast({toastMessageType:oe.PU.Error,messageKey:"Sorry, something wrong with the server, please try again."})}}))},postDuetOrStitchChange({type:e,enable:i,aweme_id:o}){return ne(this,void 0,void 0,(function*(){const n=o,a=(0,oe.u8)();try{const{status_code:r}=yield function(e){return ne(this,void 0,void 0,(function*(){return J.hd.post("/api/aweme/set/react_duet_stitch/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:J.hd.csrfToken}),headers:{[Z.nk]:J.hd.csrfToken},baseUrlType:2})}))}({aweme_id:o,[e]:i});if(t(re,{api:"postDuetOrStitchChange",statusCode:r}),0!==r)return a.addToast({toastMessageType:oe.PU.Error,messageKey:"Sorry, something wrong with the server, please try again."}),void(2054===r&&this.setDeleteVideo(n));const l="item_duet"===e?"duetEnabled":"stitchEnabled";(0,ie.ud)().updateItem({id:n,[l]:0===i}),Y.y.handlePrivateSetting({target:e,to_status:i?"on":"off"})}catch(e){a.addToast({toastMessageType:oe.PU.Error,messageKey:"Sorry, something wrong with the server, please try again."})}}))}}))),ue=(0,u.default)("div",{target:"e1i2llgv1"})({padding:"32px",width:"332px"},"label:DivContentWrapper;"),pe=(0,u.default)("h2",{target:"e1i2llgv2"})((({theme:e})=>(0,h.zy)({theme:e,typography:"H4"})),{marginTop:"4px",textAlign:"center"},"label:H2Title;"),he=(0,u.default)("p",{target:"e1i2llgv3"})((({theme:e})=>(0,h.zy)({theme:e,typography:"P2",fontWeight:"semiBold",fontFamily:"TikTokFont"})),{marginTop:"24px",marginBottom:"8px"},"label:PDesc;"),ge=(0,u.default)("div",{target:"e1i2llgv4"})({marginTop:"16px"},"label:DivSwitchGroupContainer;"),me=(0,u.default)("div",{target:"e1i2llgv5"})({display:"flex",flexDirection:"row",alignItems:"center",height:"40px"},"label:DivSwitchItemContainer;"),ve=(0,u.default)("span",{target:"e1i2llgv6"})((({theme:e,disabled:t})=>[(0,h.zy)({theme:e,typography:"P2",fontWeight:"semiBold",color:t?"TextQuaternary":"TextPrimary"}),(0,h.mp)({direction:e.direction,marginEnd:"12px"}),{flex:"1 1 auto"}]),"label:SpanSwitchText;"),fe=(0,u.default)("p",{target:"e1i2llgv7"})((({theme:e})=>(0,h.zy)({theme:e,fontFamily:"TikTokFont",typography:"P4",color:"TextQuaternary"})),{marginTop:"4px"},"label:PHint;"),xe=(0,u.default)("button",{target:"e1i2llgv8"})(h.WA,(({theme:{colors:e}})=>({width:"100%",height:"48px",fontSize:"16px",lineHeight:"48px",borderTop:`1px solid ${e.LineSecondary}`,cursor:"pointer",color:e.TextPrimary})),"label:ButtonSave;"),be=function(e){const{videoId:t,visible:i,onClose:n=a()}=e,r=(0,l.s)(),c=(0,P.k)(t),u=(0,T.yS)(null==c?void 0:c.author),{handleChange:p,optionsList:h,visibilityValue:g}=function({item:e,author:t}){const i=(0,l.s)(),o=(0,K.jw)(),{isImmersivePlayerOpen:n}=(0,G.Z9)((e=>({isImmersivePlayerOpen:e.isOpen}))),a=se(),r=(0,$.YZ)(),s=n?a:r,{forFriend:c,secret:u,id:p="",adAuthorization:h,adLabelVersion:g}=null!=e?e:{},{privateAccount:m}=null!=t?t:{},v=(0,d.useMemo)((()=>c?"3":u?"2":"1"),[c,u]),f={Public:{title:i("who_can_view_public"),desc:i("public_desc")},Followers:{title:i("who_can_view_followers"),desc:i("followers_desc_for_private")},Friends:{title:i("who_can_view_friends"),desc:i("followers_desc")},Private:{title:i("video_label_private"),desc:i("private_desc")}};if(!o.default){const e={title:i("commonStrings_privacySettings_option_friends"),desc:i("commonStrings_privacySettings_optionDescription_friends")},t={title:i("commonStrings_privacySettings_option_onlyYou"),desc:""};if(f.Friends=e,f.Private=t,f.Public={title:i("commonStrings_privacySettings_option_everyone"),desc:i("commonStrings_privacySettings_option_onOffTikTok")},o.solution1){const e={title:i("commonStrings_privacySettings_option_everyone"),desc:i("useAlignedCopies_privacySettings_panel_description")};f.Public=e,f.Followers=e}}return{visibilityValue:v,optionsList:(0,d.useMemo)((()=>{if(h)return[Object.assign(Object.assign({},f.Public),{value:"1"}),{title:i("new_video_status"),desc:i("pull_video_expl_available_for_ads"),value:"2"}];const e=[{title:m?f.Followers.title:f.Public.title,desc:m?f.Followers.desc:f.Public.desc,value:"1"},Object.assign(Object.assign({},f.Friends),{value:"3"})];return 2!==g&&e.push(Object.assign(Object.assign({},f.Private),{value:"2"})),e}),[h,g,m,i]),handleChange:(0,d.useCallback)((e=>{s.postModifyVisibility({aweme_id:p,type:e})}),[s,p])}}({item:c,author:u}),{comment:m,duet:v,stitch:f,hintTextKey:x}=function({item:e}){var t;const[{isEnableDuet:i,isEnableStitch:o,isShowSafetyHint:n},a]=(0,D.S)(H,{selector:e=>({isEnableDuet:0===e.videoPrivateSetting.duet.show_type,isEnableStitch:0===e.videoPrivateSetting.stitch.show_type,isShowSafetyHint:1===e.videoPrivateSetting.duet.res_type||1===e.videoPrivateSetting.stitch.res_type}),dependencies:[]}),r=1===(null==e?void 0:e.duetDisplay)||1===(null==e?void 0:e.stitchDisplay),l=3!==(null==e?void 0:e.itemCommentStatus),s=Boolean(null==e?void 0:e.duetEnabled)&&!r,c=Boolean(null==e?void 0:e.stitchEnabled)&&!r,u=Number(null===(t=null==e?void 0:e.video)||void 0===t?void 0:t.duration)>=61,{isImmersivePlayerOpen:p}=(0,G.Z9)((e=>({isImmersivePlayerOpen:e.isOpen}))),h=se(),g=(0,$.YZ)(),m=p?h:g,[,v]=(0,d.useReducer)((e=>e+1),0),f=(0,d.useMemo)((()=>n?"setting_disabled_16":r?"duet_stitch_minor":u?"hint2":"hint1"),[u,n,r]);(0,d.useEffect)((()=>{a.getVideoPrivateSetting()}),[a]);const x=(0,d.useCallback)((t=>{var i;m.postUserSetting({field:"item_comment",aweme_id:null!==(i=null==e?void 0:e.id)&&void 0!==i?i:"",private_setting:t?0:3}).then(v)}),[null==e?void 0:e.id,m]),b=(0,d.useCallback)((t=>i=>{var o;m.postDuetOrStitchChange({aweme_id:null!==(o=null==e?void 0:e.id)&&void 0!==o?o:"",type:t,enable:i?0:1}).then(v)}),[null==e?void 0:e.id,m]);return{comment:{checked:l,onChange:x},duet:{checked:s,disabled:u||!i||r,onChange:b("item_duet")},stitch:{checked:c,disabled:u||!o||r,onChange:b("item_stitch")},hintTextKey:f}}({item:c,author:u});return(0,o.jsxs)(s.i,{e2eData:"video-setting-list",compact:!0,isOpen:i,onClose:n,closeOnBackdropClick:!0,closeOnEsc:!0,children:[(0,o.jsxs)(ue,{children:[(0,o.jsx)(pe,{children:r("privacy_set")}),(0,o.jsx)(he,{children:r("view_access")}),(0,o.jsx)(k,{e2eData:"video-setting-choose",itemE2eData:"video-watch-list",value:g,options:h,onChange:p}),(0,o.jsxs)(ge,{children:[(0,o.jsx)(ye,Object.assign({e2eData:"video-setting-comment",text:r("allow_comment")},m)),(0,o.jsx)(ye,Object.assign({e2eData:"video-setting-duet",text:r("allow_duet")},v)),(0,o.jsx)(ye,Object.assign({e2eData:"video-setting-stitch",text:r("allow_stitch")},f))]}),(0,o.jsx)(fe,{children:r(x)})]}),(0,o.jsx)(xe,{"data-e2e":"video-setting-down",onClick:e.onClose,children:r("privacy_settings_done")})]})},ye=function(e){const{disabled:t,checked:i,text:n,e2eData:a}=e;return(0,o.jsxs)(me,{children:[(0,o.jsx)(ve,{children:n}),(0,o.jsx)(r.d,{e2eData:a,checked:i,onChange:e.onChange,disabled:t})]})}},97008:(e,t,i)=>{i.d(t,{G:()=>I});var o=i(24643),n=i(57432),a=i.n(n),r=i(40099),l=i(80417),s=i(25616),d=i(47926),c=i(62186),u=i(72153);const p=(0,c.default)("p",{target:"e1qpteip0"})((({theme:e})=>(0,u.zy)({theme:e,typography:"H4",fontWeight:"bold"})),{padding:"36px 32px",textAlign:"center",width:"332px"},"label:PDeleteTitle;"),h=(0,c.default)("button",{target:"e1qpteip1"})(u.WA,(({theme:{colors:e}})=>({width:"100%",height:"48px",fontSize:"16px",lineHeight:"48px",borderTop:`1px solid ${e.LineSecondary}`,cursor:"pointer",color:e.TextSecondary})),"label:ButtonConfirm;"),g=(0,c.default)(h,{target:"e1qpteip2"})((({theme:{colors:e}})=>({color:e.TextSecondary})),"label:StyledButtonCancel;");var m=i(19442),v=i(16085),f=i(39228),x=i(26325),b=i(71111),y=i(31209),_=i(92032),w=i(29909),C=i(49568),k=function(e,t,i,o){return new(i||(i=Promise))((function(n,a){function r(e){try{s(o.next(e))}catch(e){a(e)}}function l(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,l)}s((o=o.apply(e,t||[])).next())}))};const j=(0,b.atom)({}),{useAtomService:S,useServiceDispatchers:T,useServiceState:P,getStaticApi:D}=(0,y.i)(j,((e,t)=>({setDeleteVideo(e){(0,_.Ds)().setDeleteVideo(e),(0,w.HG)().setDeleteVideo(e)},postVideoDelete(e){return k(this,void 0,void 0,(function*(){const i=(0,C.u8)();try{const{status_code:o,status_msg:n}=yield function(e){return k(this,void 0,void 0,(function*(){return f.hd.post("/api/aweme/delete/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:f.hd.csrfToken}),headers:{[x.nk]:f.hd.csrfToken},baseUrlType:2})}))}(e);t(j,{api:"postVideoDelete",statusCode:o,statusMessage:n}),0===o?(i.addToast({toastMessageType:C.PU.Notice,messageKey:"deleted"}),l.y.handleVideoDelete("delete"),this.setDeleteVideo(e.aweme_id)):i.addToast({toastMessageType:C.PU.Error,messageKey:"Sorry, something wrong with the server, please try again."})}catch(e){i.addToast({toastMessageType:C.PU.Error,messageKey:"Sorry, something wrong with the server, please try again."})}}))},postScheduleDelete(e){return k(this,void 0,void 0,(function*(){yield this.postScheduledVideoDelete(e)}))},postScheduledVideoDelete(e){return k(this,void 0,void 0,(function*(){const i=(0,C.u8)();try{yield function(e){return k(this,void 0,void 0,(function*(){return f.hd.post("/api/schedule/aweme/delete/",{query:e,headers:{[x.nk]:f.hd.csrfToken},baseUrlType:2})}))}({aweme_id:e}),t(j,{api:"postScheduleDelete",statusCode:0}),i.addToast({toastMessageType:C.PU.Notice,messageKey:"deleted"}),l.y.handleScheduleDelete("delete"),this.setDeleteVideo(e)}catch(e){i.addToast({toastMessageType:C.PU.Error,messageKey:"Sorry, something wrong with the server, please try again."})}}))}}))),I=function(e){const{visible:t,onClose:i=a(),videoId:n,isScheduled:c=!1}=e,u=(0,s.s)(),{isImmersivePlayerOpen:f}=(0,v.Z9)((e=>({isImmersivePlayerOpen:e.isOpen}))),x=T(),b=(0,m.YZ)(),y=f?x:b,_=(0,r.useCallback)((()=>{c?y.postScheduleDelete(n):y.postVideoDelete({aweme_id:n,target:n}),null==i||i()}),[c,y,i,n]),w=(0,r.useCallback)((()=>{c?l.y.handleScheduleDelete("cancel"):l.y.handleVideoDelete("cancel"),null==i||i()}),[c,i]);return(0,o.jsxs)(d.i,{e2eData:"video-delete-modal",isOpen:t,compact:!0,onClose:i,closeOnBackdropClick:!0,closeOnEsc:!0,children:[(0,o.jsx)(p,{children:u("delete_confirm")}),(0,o.jsx)(h,{"data-e2e":"video-modal-delete",type:"button",onClick:_,children:u("delete")}),(0,o.jsx)(g,{"data-e2e":"video-modal-cancel",type:"button",onClick:w,children:u("cancel_settings")})]})}},93811:(e,t,i)=>{i.d(t,{Em:()=>l,WA:()=>r,f8:()=>n,mo:()=>a});var o=i(87652);const n=()=>(0,o.o$)((e=>e.needClearInput)),a=()=>(0,o.o$)((e=>e.replyCid)),r=()=>(0,o.o$)((e=>e.isInputFocus)),l=e=>{const{isCommentInputEmpty:t,isReplyInputEmpty:i}=(0,o.o$)((({isInputEmpty:e,isReplyInputEmpty:t})=>({isCommentInputEmpty:e,isReplyInputEmpty:t})));return(e||t)&&i}},33274:(e,t,i)=>{i.d(t,{_:()=>j});var o=i(24643),n=i(69589),a=i(58542),r=i(85041),l=i(62186);const s=(0,l.default)("div",{target:"eutiz1z0"})({padding:"20px",display:"flex",flexDirection:"column",width:"320px"},"label:DivUserPopoverContainer;"),d=(0,l.default)("div",{target:"eutiz1z1"})({display:"flex",flexDirection:"column",gap:"8px"},"label:DivUserHeaderContainer;"),c=(0,l.default)("div",{target:"eutiz1z2"})({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},"label:DivAvatarFollowContainer;"),u=(0,l.default)(r.E,{target:"eutiz1z3"})({display:"flex",flexDirection:"column",gap:"2px",":hover":{textDecoration:"none"}},"label:DivUserTitleContainer;"),p=(0,l.default)("div",{target:"eutiz1z4"})({display:"flex",flexDirection:"column",gap:"2px"},"label:DivSkeletonUserTitleContainer;"),h=(0,l.default)("div",{target:"eutiz1z5"})({display:"flex",flexDirection:"row",gap:"3px"},"label:DivUsernameContainer;"),g=(0,l.default)("div",{target:"eutiz1z6"})({display:"flex",flexDirection:"row",gap:"12px"},"label:DivUserStatsContainer;"),m=(0,l.default)("div",{target:"eutiz1z7"})({display:"flex",flexDirection:"row",gap:"6px"},"label:DivUserNumberLabelContainer;"),v=(0,l.default)("div",{target:"eutiz1z8"})({marginTop:"16px",paddingTop:"16px",borderTop:"1px solid rgba(22, 24, 35, 0.12)"},"label:DivDescriptionContainer;");var f=i(92846),x=i(41183),b=i(40099),y=i(40935),_=i(35810),w=i(96689),C=i(61679),k=i(25616);const j=({uniqueId:e,secUid:t})=>{const{data:i,isLoading:l,isError:j}=(0,n.useData)({query:"getUserDetail",queryKeyParams:{uniqueId:e},queryParams:{uniqueId:e,secUid:t}}),S=(0,k.s)(),T=(0,w.G)({modalConfig:{query:{enter_method:"click_follow"}}}),{isFollowing:P,handleFollow:D,text:I}=(0,y._6)({uniqueId:e,secUid:t,onNeedLogin:T,teaParams:{enter_method:"click_hover"}});if((0,b.useEffect)((()=>{x.c.handleDropdownCardShow()}),[]),l||j)return(0,o.jsx)(s,{children:(0,o.jsxs)(d,{children:[(0,o.jsxs)(c,{children:[(0,o.jsx)(a.sO8,{width:"44px",height:"44px",borderRadius:"50%"}),(0,o.jsx)(a.sO8,{width:"108px",height:"40px",borderRadius:"5px"})]}),(0,o.jsxs)(p,{children:[(0,o.jsx)(h,{children:(0,o.jsx)(a.Fm,{color:"UIText1",size:18,weight:"bold","data-e2e":"user-card-username",children:e})}),(0,o.jsx)(a.sO8,{width:"72px",height:"21px",borderRadius:"5px"})]}),(0,o.jsxs)(g,{children:[(0,o.jsxs)(m,{children:[(0,o.jsx)(a.sO8,{width:"20px",height:"25.5px",borderRadius:"5px"}),(0,o.jsx)(a.sO8,{width:"72px",height:"25.5px",borderRadius:"5px"})]}),(0,o.jsxs)(m,{children:[(0,o.jsx)(a.sO8,{width:"20px",height:"25.5px",borderRadius:"5px"}),(0,o.jsx)(a.sO8,{width:"72px",height:"25.5px",borderRadius:"5px"})]})]})]})});const{avatarThumb:O,id:M,nickname:L,verified:B,signature:E,stateControlledMedia:A}=i.user,{followerCount:R,heart:z}=i.stats,F={to_user_id:M,author_id:M,enter_method:"click_dropdown_card"};return(0,o.jsxs)(s,{children:[(0,o.jsxs)(d,{children:[(0,o.jsxs)(c,{children:[(0,o.jsx)(r.E,{uniqueId:e,secUid:t,target:"_blank",rel:"opener",teaParams:F,"data-e2e":"user-card-avatar",children:(0,o.jsx)(f.e,{size:44,src:O})}),(0,o.jsx)(a.I05,{"data-e2e":"user-card-follow",size:"medium",variant:P?"secondary":"primary",label:I,onClick:D})]}),(0,o.jsxs)(u,{uniqueId:e,secUid:t,target:"_blank",rel:"opener",teaParams:F,children:[(0,o.jsxs)(h,{children:[(0,o.jsx)(a.Fm,{color:"UIText1",size:18,weight:"bold","data-e2e":"user-card-username",children:e}),B&&(0,o.jsx)(a.VA8,{size:"14","data-e2e":"user-card-bluev"})]}),(0,o.jsx)(a.Fm,{color:"UIText1",size:14,weight:"bold","data-e2e":"user-card-nickname",children:L}),(0,o.jsx)(_.w,{stateControlledMedia:A,labelType:2})]}),(0,o.jsxs)(g,{children:[(0,o.jsxs)(m,{children:[(0,o.jsx)(a.Fm,{color:"UIText1",size:17,weight:"bold","data-e2e":"user-card-follower-count",children:(0,C.D1)(R)}),(0,o.jsx)(a.Fm,{color:"UIText2",size:17,"data-e2e":"user-card-follower",children:S("Followers")})]}),(0,o.jsxs)(m,{children:[(0,o.jsx)(a.Fm,{color:"UIText1",size:17,weight:"bold","data-e2e":"user-card-like-count",children:(0,C.D1)(Number(z))}),(0,o.jsx)(a.Fm,{color:"UIText2",size:17,"data-e2e":"user-card-like",children:S("Likes")})]})]})]}),E&&(0,o.jsx)(v,{children:(0,o.jsx)(a.Fm,{color:"UIText1",size:14,"data-e2e":"user-card-user-bio",children:E})})]})}},93638:(e,t,i)=>{i.d(t,{Mi:()=>s,VW:()=>m,Ys:()=>d,Zh:()=>r,a_:()=>v,ex:()=>x,hJ:()=>u,mB:()=>g,oH:()=>p,pp:()=>c,qF:()=>f,rb:()=>h,wV:()=>l});var o=i(62186),n=i(72153),a=i(99893);const r=20,l=(0,o.default)("div",{target:"e1mecfx00"})((({noPaddingTop:e})=>[{flex:"0 0 544px",width:"544px",display:"flex",flexDirection:"column",padding:"32px 0 0",paddingTop:"24px"},e&&{paddingTop:0}]),"label:DivContentContainer;"),s=(0,o.default)("div",{target:"e1mecfx01"})((({shouldOptProfile:e,shouldOptimizeCta:t})=>[{padding:e?"":"0 32px",overflow:"visible",display:"flex",flexDirection:"column",flexShrink:0},t&&{padding:"0 20px"}]),"label:DivMainContent;"),d=(0,o.default)(a.Z,{target:"e1mecfx02"})((({theme:{colors:e}})=>({marginTop:"9px",marginBottom:"17px",background:"transparent",color:e.TextSecondary})),"label:StyledScheduleTime;"),c=(0,o.default)("div",{target:"e1mecfx03"})((({theme:{colors:e}})=>({width:"100%",padding:"0 32px",boxSizing:"border-box",backgroundColor:e.BGPrimary,borderTop:"none",borderBottom:"1px solid rgba(18, 18, 18, 0.12)",overflowX:"hidden",flexGrow:1})),"label:DivCommentContainerPolyfill;"),u=(0,o.default)("div",{target:"e1mecfx04"})((({theme:{colors:e}})=>({flex:"0 0 auto",backgroundColor:e.BGPrimary,margin:"0 30px",padding:"21px 0"})),"label:DivBottomCommentContainer;"),p=(0,o.default)("div",{target:"e1mecfx05"})((({theme:{colors:e}})=>({flex:"0 0 auto",backgroundColor:e.BGPrimary,margin:"0 30px",height:"78px",display:"flex",alignItems:"center",justifyContent:"center","& > button":{width:"496px"}})),"label:DivAltBottomCommentContainer;"),h=(0,o.default)("div",{target:"e1mecfx06"})((({theme:e})=>[(0,n.zy)({theme:e,typography:"P2",color:"TextSecondary"}),{flex:"1 1 0px",display:"flex",alignItems:"center",justifyContent:"center"}]),"label:DivErrorMessage;"),g=(0,o.default)("div",{target:"e1mecfx07"})((({theme:e,isUIOptimization:t})=>[(0,n.zy)({theme:e,fontWeight:"semiBold",color:t?"TextQuaternary":"Primary"}),{height:"100%",background:t?e.colors.BGInput:e.colors.BGPlaceholderOpaque,borderRadius:t?"8px":"2px",padding:"14px 16px",fontSize:"16px",cursor:"pointer",textAlign:t?"center":"unset",whiteSpace:"pre-wrap"}]),"label:DivLoginBar;"),m=(0,o.default)("div",{target:"e1mecfx08"})((({theme:e})=>[(0,n.zy)({theme:e,fontWeight:"semiBold",color:"Primary"}),{padding:"14px 16px",fontSize:"18px",lineHeight:"23.4px",cursor:"pointer",textAlign:"center"}]),"label:DivAltLoginBar;"),v=(0,o.default)("h1",{target:"e1mecfx09"})({marginBottom:"8px",fontWeight:"700",fontSize:"20px",lineHeight:"24px"},"label:H1PhotoTitle;"),f=(0,o.default)("div",{target:"e1mecfx010"})({display:"flex",gap:"4px"},"label:DivTagContainer;"),x=(0,o.default)("div",{target:"e1mecfx011"})((({shouldShowCommentsCnt:e,theme:t})=>({background:t.colors.BGView,borderRadius:"12px",marginLeft:`${r}px`,marginRight:`${r}px`,padding:"16px",paddingBottom:e?0:""})),"label:DivDescriptionContentWrapper;")},43626:(e,t,i)=>{i.d(t,{g:()=>m,m:()=>v});var o=i(58632),n=i(46682),a=i(57432),r=i.n(a),l=i(40099),s=i(32125),d=i(65852),c=i(91286),u=i(60484),p=i(52333),h=i(79881),g=i(19442);const m=(0,l.createContext)({isLiveBrowserShowing:!1,isBrowserModeShowing:!1,showBrowserMode:r(),closeBrowserMode:r()});function v(){const[e,t]=(0,l.useState)(!1),[i,a]=(0,l.useState)({}),[r,m]=(0,l.useState)(),[{showingBrowserMode:v,itemListKey:f,currentIndex:x,enterWindowTimeSec:b},y]=(0,g.BI)((e=>({showingBrowserMode:e.showingBrowserMode,itemListKey:e.itemListKey,currentIndex:e.currentIndex,enterWindowTimeSec:e.enterWindowTimeSec})),s.bN),_=(0,l.useRef)(0),w=(0,l.useRef)(0),C=(0,l.useRef)(0),k=(0,l.useRef)(0),j=(0,l.useRef)(0),S=(0,l.useRef)(null),T=(0,l.useRef)(null),{authorId:P,groupId:D}=(0,h.hL)({currentIndex:x}),{currentId:I=""}=(0,u.L$)((0,h.Og)({currentIndex:x})),[O]=(0,n.S)(p.k,{selector:e=>e[I],dependencies:[I]}),M=(0,l.useMemo)((()=>({author_id:P,group_id:D})),[P,D]),L=(0,l.useCallback)((()=>{const e=Math.floor((Number(new Date)-w.current)/1e3),t=Object.assign(Object.assign(Object.assign(Object.assign({},d.L.getScreenRatio()),{duration:e}),M),{play_mode:"browser_mode"});d.L.handleExitBrowser(t)}),[M]),B=()=>{null!==T.current&&window.removeEventListener("resize",T.current)};(0,l.useEffect)((()=>{let t;const i=()=>{if(!e)return;const{height_max:t,width_max:i,width:o,height:n,height_ratio:a,width_ratio:r}=d.L.getScreenRatio(),l=Number(new Date),s=Object.assign({height_ratio_after:a,width_ratio_after:r,height_ratio:k.current/t,width_ratio:j.current/i,height_after:n,width_after:o,height:k.current,width:j.current,height_max:t,width_max:i,duration:(l-C.current)/1e3},M);C.current=l,k.current=n,j.current=o,d.L.handleAdjustBrowserSize(s)};if(B(),e){const e=()=>{clearTimeout(t),t=setTimeout(i,500)};window.addEventListener("resize",e),T.current=e}if(0===_.current){const e=Number(new Date);_.current=e,w.current=e,C.current=e}return()=>{B()}}),[e,M]);const E=(0,l.useMemo)((()=>({capture:!0})),[]),A=(0,l.useCallback)((()=>{null!==S.current&&window.removeEventListener("beforeunload",S.current,E)}),[E]);(0,l.useEffect)((()=>{const t=()=>{const t=Math.floor((Number(new Date)-b)/1e3),i=Object.assign(Object.assign(Object.assign({},d.L.getScreenRatio()),{duration:t}),e?M:{});d.L.handleCloseWindow(i),e&&L()};return A(),S.current=t,window.addEventListener("beforeunload",t,E),()=>{A()}}),[A,b,e,E,L,M]);const R=(0,l.useCallback)((e=>{const{teaParams:i,reportTeaParams:n,enterFrom:r}=e,l=(0,o.__rest)(e,["teaParams","reportTeaParams","enterFrom"]);document.activeElement instanceof HTMLElement&&document.activeElement.blur(),y.showBrowserMode(l),t(!0),a(null!=i?i:{}),m(r);const s=d.L.getScreenRatio(),c=Object.assign(Object.assign(Object.assign({},null!=n?n:i),s),{play_mode:"browser_mode"}),{width:u,height:p}=s;k.current=p,j.current=u;const h=Number(new Date);w.current=h,C.current=h,d.L.handleEnterBrowserOpt(c)}),[y]),z=(0,l.useCallback)((e=>{t(!1),y.closeBrowserMode(e),L()}),[y,L]),F=(0,l.useMemo)((()=>{const e=new Set(["foryou","following"]);return Boolean(v)&&(0,c.Jl)(O)&&e.has(f)}),[v,f,O]);return{itemListKey:f,currentIndex:x,showBrowserMode:R,isLiveBrowserShowing:F,closeBrowserMode:z,isBrowserModeShowing:v,disableUpdate:!e,teaParams:i,enterFrom:r}}},79881:(e,t,i)=>{i.d(t,{DX:()=>me,Dk:()=>ue,FQ:()=>ne,GL:()=>le,JE:()=>te,Ky:()=>de,Og:()=>ce,Oz:()=>oe,V0:()=>ie,WQ:()=>ae,Wj:()=>re,dD:()=>Q,hL:()=>pe,ih:()=>ge,jd:()=>ve,rw:()=>he});var o,n=i(24643),a=i(46682),r=i(41271),l=i(99789),s=i.n(l),d=i(2387),c=i.n(d),u=i(4474),p=i(40099),h=i(47172),g=i(32125),m=i(98796),v=i(65491),f=i(8227),x=i(82715),b=i(69617),y=i(2584),_=i(65852),w=i(5412),C=i(509),k=i(87652),j=i(16680),S=i(64747),T=i(16085),P=i(36764),D=i(92597),I=i(39415),O=i(72688),M=i(25616),L=i(29793),B=i(78305),E=i(67169),A=i(88920),R=i(10745),z=i(60484),F=i(62047),U=i(89311),V=i(49057),W=i(89107),N=i(60445),q=i(40935),H=i(93811),$=i(19442),K=i(71777),G=i(79983),Y=i(52333),J=i(41632),Z=i(17566),X=i(44926);function Q({itemListKey:e,item:t,author:i,needUrlDelegate:o,onCloseBrowserMode:n,disableUpdate:r=!1}){const{pathname:l,search:d}=(0,h.useLocation)(),c=(0,h.useHistory)(),g=(0,Z._u)(),m=(0,p.useRef)(!1),[{searchValue:v,previousSearchValue:x},{setPreviousSearchValue:b,setSearchValue:y,setInputFocus:_}]=(0,a.S)(W.C,{dependencies:[],selector:e=>({searchValue:e.searchValue,previousSearchValue:e.previousSearchValue})});(0,p.useEffect)((()=>{b(v),y("");const e=()=>{y(x),_(!1),n({fromPopState:!0})};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}}),[]),(0,p.useEffect)((()=>{if(!t||!e||!o||r)return;Boolean((0,h.matchPath)(location.pathname,{path:f.vI.liveRoom}))&&(m.current=!0);const{scheduleTime:n,author:a=""}=t,l=s()((0,u.parse)(d),"sender_device","sender_web_id","item_id"),c=n?(0,O.fJR)({uniqueId:a,secUid:null==i?void 0:i.secUid}):(0,u.stringifyUrl)({url:g(t),query:l},{skipNull:!0});m.current&&null!==window.history.state&&/^(?!.*@.*\/video).*$/.test(location.pathname)&&/^(?!.*@.*\/photo).*$/.test(location.pathname)?window.history.replaceState(null,"",location.pathname):m.current?window.history.replaceState(window.history.state,"video-detail",c):(window.history.pushState(window.history.state,"video-detail",c),m.current=!0)}),[null==i?void 0:i.secUid,c,t,l,e,o,d,r])}!function(e){e[e.Null=0]="Null",e[e.Close=1]="Close",e[e.Prev=2]="Prev",e[e.Next=3]="Next",e[e.Redirect=4]="Redirect"}(o||(o={}));const ee=e=>{null==e||e.preventDefault(),null==e||e.stopPropagation()};function te({onCloseBrowserMode:e,onNextVideo:t,onPrevVideo:i,pause:o,setPause:n,embedVisibleRef:l,group_id:s,handleLikeClick:d,author_id:c,itemListKey:u,onJumpSamePage:g,shouldPause:m,photoVideoRef:v,isPhotoMode:f,photoTeaParams:C,setIsShowPhoto:S,itemMute:T=!1}){const{isRTL:P}=(0,U.m)(),[D,I]=(0,p.useState)(!1),[O,M]=(0,p.useState)(0),R=(0,H.Em)(),{setNeedClearInput:z}=(0,k.$4)(),V=(0,a.w)(N.aL),[{previousSearchValue:q,searchValue:G},{setSearchValue:Y}]=(0,a.S)(W.C,{dependencies:[],selector:e=>({previousSearchValue:e.previousSearchValue,searchValue:e.searchValue})}),{mute:J,setMute:Z}=(0,E.ah)({playMode:2,itemMute:T}),[X,Q]=(0,$.BI)((({isCreatorBrowserMode:e})=>e)),te=(0,A.uT)(),ie=(0,p.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),Z(!J,"keydown",C)}),[Z,J,C,s,c]),oe=(0,r.P)(L.hf,{selector:({showing:e})=>e,dependencies:[]}),ne=(0,r.P)(B.y7,{selector:({showing:e})=>e,dependencies:[]}),ae=(0,j.mZ)((e=>e.isOpen)),re=(0,p.useRef)(null),le=(0,p.useRef)(null),se=(0,p.useCallback)((e=>{var t,i,a,r,l,s,d,c,u,p,h,g,m,x,b,y,_,w,C,k;f?o?(null===(a=null===(i=null===(t=v.current)||void 0===t?void 0:t.swiper)||void 0===i?void 0:i.play)||void 0===a||a.call(i),null===(s=null===(l=null===(r=v.current)||void 0===r?void 0:r.audio)||void 0===l?void 0:l.play)||void 0===s||s.call(l)):(null===(u=null===(c=null===(d=v.current)||void 0===d?void 0:d.swiper)||void 0===c?void 0:c.pause)||void 0===u||u.call(c,e),null===(g=null===(h=null===(p=v.current)||void 0===p?void 0:p.audio)||void 0===h?void 0:h.pause)||void 0===g||g.call(h)):o?te?null===(x=null===(m=le.current)||void 0===m?void 0:m.play)||void 0===x||x.call(m,!0):null===(y=null===(b=re.current)||void 0===b?void 0:b.play)||void 0===y||y.call(b,!0):te?null===(w=null===(_=le.current)||void 0===_?void 0:_.pause)||void 0===w||w.call(_):null===(k=null===(C=re.current)||void 0===C?void 0:C.pause)||void 0===k||k.call(C),n(!o)}),[f,n,o,v,s,c,te]),{pathname:de}=(0,h.useLocation)(),ce=(0,h.useHistory)(),ue=(0,p.useCallback)(((t,i)=>{var o,n;ee(t),Y(q),R?e({fromPopState:i,playProgress:te?null===(o=le.current)||void 0===o?void 0:o.currentTime:null===(n=re.current)||void 0===n?void 0:n.currentTime,shouldPause:m}):(M(1),I(!0))}),[R,m,e,q,Y,te]),pe=(0,p.useCallback)((e=>{ee(e),Q.handleExitCreatorMode()}),[Q]),he=(0,p.useRef)(-1),ge=(0,p.useCallback)(((e,t="click")=>{var i,o,n,a,r,l,d;const u=e>0?"forward":"backward";window.clearTimeout(he.current),V.setSeekType(u),he.current=window.setTimeout((()=>{V.setSeekType("none")}),2e3),te?null===(o=null===(i=le.current)||void 0===i?void 0:i.seekTime)||void 0===o||o.call(i,(null!==(a=null===(n=re.current)||void 0===n?void 0:n.currentTime)&&void 0!==a?a:0)+e):null===(l=null===(r=re.current)||void 0===r?void 0:r.seekTime)||void 0===l||l.call(r,(null===(d=re.current)||void 0===d?void 0:d.currentTime)+e),b.V.handleVideoControlChange({play_mode:"browser_mode",author_id:null!=c?c:"",group_id:s,enter_method:t,click_section:"click"===t?"pc_web_keyboard_btn":void 0,change_params:e>0?"video_forward":"video_backward"})}),[c,s]),me=(0,p.useRef)(""),ve=(0,p.useCallback)(((e,t,i)=>{if(t.includes(de)&&de!==x.OZ.home)return ue(e),void g();R||(ee(e),M(4),I(!0),me.current=t),i&&y.O.handleGeneralClick(i,{scene:"video_feed"})}),[ue,R,de,g]),fe=(0,p.useCallback)((()=>{f&&(S(!1),setTimeout((()=>{S(!0)}),0))}),[f,S]),{isInExperiment:xe}=(0,A.NV)(),be=(0,p.useCallback)(((e,i="click")=>{if(e&&ee(e),G&&Y(""),R){t(),n(!1);const e=Object.assign({enter_method:i,play_mode:"browser_mode",group_id:s,author_id:null!=c?c:"",skipped_group_num:0,skipped_group_ids:""},C);_.L.handleVideoChange(e,"next"),"foryou"===u&&_.L.handleHotVideoChange(e,"next"),fe()}else M(3),I(!0)}),[R,t,n,s,c,C,u,fe,G,Y,xe]),ye=(0,p.useCallback)(((e,t="click")=>{if(e&&ee(e),G&&Y(""),R){i(),n(!1);const e=Object.assign({enter_method:t,play_mode:"browser_mode",group_id:s,author_id:null!=c?c:"",skipped_group_num:0,skipped_group_ids:""},C);_.L.handleVideoChange(e,"prev"),"foryou"===u&&_.L.handleHotVideoChange(e,"prev"),fe()}else M(2),I(!0)}),[i,n,s,c,C,u,fe,G,Y,xe]),_e=(0,p.useCallback)((e=>{e&&ee(e),G&&Y(""),R?(n(!1),fe()):(M(3),I(!0))}),[R,n,fe,G,Y]),{isMiniPlayerShowing:we}=(0,K.mE)((e=>({isMiniPlayerShowing:e.isMiniPlayerShowing}))),Ce=(0,p.useCallback)((e=>{if(27!==e.keyCode&&["input","textarea"].includes(e.target.tagName.toLocaleLowerCase())||"true"===e.target.getAttribute("contenteditable")||ae)return;const t=new Map([[27,()=>{we||(X?(pe(e),n(!1)):oe||ne||l.current||ue(e))}],[40,()=>{be(e,"keydown")}],[32,()=>{se("keyboard")}],[39,()=>{ge(P?F.a:F.S,"keydown")}],[37,()=>{ge(P?F.S:F.a,"keydown")}],[38,()=>{ye(e,"keydown")}],[76,()=>{d("keydown")}],[77,()=>{ie(e)}]]),{keyCode:i}=e;t.has(i)&&(e.preventDefault(),t.get(i)())}),[l,ue,d,be,ye,ie,ae,oe,ne,se,pe,X,ge,P,n,we]),ke=(0,p.useCallback)((()=>{var o;switch(O){case 1:e({playProgress:null===(o=re.current)||void 0===o?void 0:o.currentTime,shouldPause:m});break;case 2:i(),n(!1);break;case 3:t(),n(!1);break;case 4:me.current&&ce.push(me.current)}I(!1),z(!0),w.ao.handleLeaveComment({group_id:s})}),[O,s,ce,m,e,t,i,z,n]),je=(0,p.useCallback)((()=>{M(0),I(!1),w.ao.handleKeepComment({group_id:s})}),[s]);return(0,p.useEffect)((()=>(document.addEventListener("keydown",Ce),()=>{document.removeEventListener("keydown",Ce)})),[Ce]),{handleLinkClick:ve,handleClose:ue,handleCloseCreatorMode:pe,handleNext:be,handlePrev:ye,preventDefault:ee,togglePlay:se,videoPlayerRef:re,multimediaDesktopBizPlayerRef:le,usePlaybackRefactor:te,showLeaveModal:D,noEditingContent:R,handleConfirmLeave:ke,handleCancelLeave:je,handleSeek:ge,handleClickCreatorVid:_e}}function ie({id:e,authorId:t,playMode:i,needDispose:o=!0,handleCommentScrollDown:n,handleCommentHitTop:a}){const r=(0,S.BY)(),l=(0,p.useRef)(null),s=(0,p.useCallback)((()=>{w.ao.handleCommentLoadMore({play_mode:i,group_id:e,author_id:t}),r.fetchComment({aweme_id:e})}),[r,e]);return(0,p.useEffect)((()=>()=>{o&&r.setCommentItem({itemId:e,item:S.lN})}),[r,e,o]),(0,R.O9)({elemRef:l,onHitBottom:s,bottomThreshold:200,throttle:200}),(0,R.yE)({elemRef:l,onHitTop:a,onScrollDown:n}),l}function oe({showLeaveModal:e,group_id:t}){const[{loading:i}]=(0,S.kH)((e=>{var i;return null!==(i=e[t])&&void 0!==i?i:{loading:!1}}),g.bN);(0,p.useEffect)((()=>{e&&w.ao.handleClose({group_id:t,is_comments_loaded:i?w.uO.Loading:w.uO.Loaded})}),[t,e]),(0,p.useEffect)((()=>()=>{w.ao.handleClose({group_id:t,is_comments_loaded:i?w.uO.Loading:w.uO.Loaded})}),[t,i])}const ne=({currentIndex:e,handlePrev:t,hasNext:i,handleNext:o,itemListKey:a,isUiOptimise:r=!1})=>{const l=(0,M.s)(),s=(0,p.useCallback)(c()((e=>{a&&e.srcElement.classList.value.includes("BasicVideo")&&(e.deltaY>=1?o(e,"scroll"):e.deltaY<=-1&&t(e,"scroll"))}),100),[o,t]);(0,p.useEffect)((()=>(window.addEventListener("wheel",s),()=>{window.removeEventListener("wheel",s)})));const d={isUiOptimise:r};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.d4,Object.assign({disabled:0===e,isPrev:!0,onClick:t,"data-e2e":"arrow-left",role:"button","aria-label":l("pc_web_previous_btn")},d,{children:(0,n.jsx)(v.A,{width:26,height:26,fill:"#fff"})})),(0,n.jsx)(J.d4,Object.assign({disabled:!i,isPrev:!1,onClick:o,"data-e2e":"arrow-right",role:"button","aria-label":l("pc_web_next_btn")},d,{children:(0,n.jsx)(v.A,{width:26,height:26,fill:"#fff"})}))]})},ae=e=>{var t,i;let o=!0;const n=(0,q.yS)(null==e?void 0:e.author),{user:a={}}=null!==(t=(0,V.W)((()=>["user"]),[]))&&void 0!==t?t:{},[r,l]=(0,p.useState)(!1),s=(0,p.useCallback)((e=>{e.stopPropagation(),C.d.handleClickAnalyticsButton(),l(!0)}),[]),d=(0,p.useCallback)((()=>{l(!1)}),[]);a||(o=!1);const{secUid:c,analyticsOn:u}=null!=a?a:{};return c===(null!==(i=null==n?void 0:n.secUid)&&void 0!==i?i:"")&&u||(o=!1),{showAnalyticsButton:o,showAnalyticsModal:r,handleOpenAnalyticsModal:s,handleCloseAnalyticsModal:d}};function re(e,t){const{listLength:i,statusCode:o}=se({itemListKey:e,stateSelector:e=>{var t;return{listLength:null!==(t=null==e?void 0:e.list.length)&&void 0!==t?t:0,statusCode:null==e?void 0:e.statusCode}}}),n=(0,$.JD)((e=>e.currentIndex)),{isImmersivePlayerOpen:a,index:r}=(0,T.Z9)((e=>({isImmersivePlayerOpen:e.isOpen,index:e.index}))),l=(0,p.useMemo)((()=>a?r:n),[n,r,a]);(0,p.useEffect)((()=>{0===o&&(!i||i-l<=3)&&t()}),[l,t,i,o])}function le({itemListKey:e,exploreCategoryType:t,config:i,handler:o}){const n=(0,$.JD)((e=>e.currentIndex)),a=(0,P.Gb)(),[{activeItemListKey:r,listLength:l,keyToLoadMore:s},d]=(0,X.Zl)((e=>{var t;return{activeItemListKey:e.activeItemListKey,listLength:e.browserList.length,keyToLoadMore:null!==(t=e.keyToLoadMore)&&void 0!==t?t:""}}),g.bN),{statusCode:c,loading:u}=se({itemListKey:s,stateSelector:e=>{var t,i;return{statusCode:null!==(t=null==e?void 0:e.statusCode)&&void 0!==t?t:0,loading:null!==(i=null==e?void 0:e.loading)&&void 0!==i&&i}}});(0,p.useEffect)((()=>{d.registerBrowserListConfig({itemListKey:e,config:i})}),[e,i,d]),(0,p.useEffect)((()=>{"explore"===e&&void 0!==t&&t!==a||u||r!==e||l&&!(l-n<=3)||(0===c?!1===o(s)&&d.freezeSourceWithKey(s):e!==s&&d.freezeSourceWithKey(s))}),[u,n,r,e,l,c,d,s])}function se({itemListKey:e,stateSelector:t,dependencies:i}){const o=(0,D.D)(e),n=(0,m.X)(o||X.Eq,{selector:t,equalityFn:g.bN}),a=(0,r.P)(G.O,{selector:i=>{var o;const n=null!==(o=i[e])&&void 0!==o?o:null;return t(n)},dependencies:null!=i?i:[e]});return o?n:a}const de=({itemListKey:e,currentIndex:t})=>se({itemListKey:(0,$.JD)((e=>e.isCreatorBrowserMode))?"creator_tab":null!=e?e:"",stateSelector:e=>{var i,o;return e?{currentId:e.browserList[t],prefetchId1:null!==(i=e.browserList[t+1])&&void 0!==i?i:"",prefetchId2:null!==(o=e.browserList[t+2])&&void 0!==o?o:"",listLength:e.browserList.length}:null},dependencies:[e,t]}),ce=({currentIndex:e})=>{const t=(0,$.JD)((e=>e.isCreatorBrowserMode));return(0,X.d8)((i=>{var o,n;if(!i||!i.browserList)return null;const a=t?i.creatorBrowserList:i.browserList;return{currentId:a[e],prefetchId1:null!==(o=a[e+1])&&void 0!==o?o:"",prefetchId2:null!==(n=a[e+2])&&void 0!==n?n:"",listLength:a.length}}),g.bN)},ue=()=>{const e=(0,$.JD)((e=>e.isCreatorBrowserMode));return(0,X.d8)((t=>t&&t.browserList?e?t.creatorBrowserList:t.browserList:[]),g.bN)},pe=({currentIndex:e})=>{var t;const{currentId:i=""}=(0,z.L$)(ce({currentIndex:e})),[o]=(0,a.S)(Y.k,{selector:e=>e[i],dependencies:[i]}),n=null!==(t=null==o?void 0:o.id)&&void 0!==t?t:"";return{authorId:null==o?void 0:o.authorId,groupId:n}};function he(e,t,i){const[{loading:o,hasMoreLatest:n,hasMorePrevious:a},r]=(0,I.sK)((e=>{var t,i,o;return{loading:null!==(t=e.loading)&&void 0!==t&&t,hasMoreLatest:null!==(i=e.hasMoreLatest)&&void 0!==i&&i,hasMorePrevious:null!==(o=e.hasMorePrevious)&&void 0!==o&&o}}),g.bN),{abTestVersion:l,language:s}=(0,z.L$)((0,V.W)((()=>["user","language","abTestVersion"]),[]));return(0,p.useCallback)((()=>{(!i||!o&&n)&&(i||!o&&a)&&r.getCreatorTabList({key:"creator_tab",secUid:e,createTime:t,fetchType:i?2:1})}),[o,a,n,i,e,t,r,l,s])}const ge=()=>{const e=(0,M.s)(),t=e("pc_web_login"),i=e("pc_web_login_to_comment"),o=i.indexOf("%s");return{prefixText:i.slice(0,o),loginText:t,endText:i.slice(o).replace("%s","")}},me=e=>e?new Map([["foryou","one-column-item"],["following","one-column-item"]]).get(e):e,ve=({itemListKey:e,currentIndex:t})=>{const{currentId:i=""}=(0,z.L$)(de({itemListKey:e,currentIndex:t})),[o]=(0,a.S)(Y.k,{selector:e=>e[i],dependencies:[i]});return{liveRoomInfo:null==o?void 0:o.liveRoomInfo,requestId:null==o?void 0:o.logId}}},41632:(e,t,i)=>{i.d(t,{$2:()=>p,CY:()=>u,F3:()=>y,II:()=>R,Ii:()=>O,Jr:()=>b,Mu:()=>x,O8:()=>c,QN:()=>_,RK:()=>L,Rq:()=>D,TP:()=>A,_P:()=>d,cA:()=>z,cR:()=>h,d4:()=>w,es:()=>k,fJ:()=>j,iH:()=>g,jc:()=>B,kn:()=>T,lG:()=>C,oK:()=>P,rh:()=>m,sh:()=>E,xS:()=>I,zm:()=>M});var o=i(62186),n=i(97118),a=i(19434),r=i(72153),l=i(36776),s=i(32545);const d=(0,o.default)("div",{target:"e11s2kul0"})((({theme:{colors:e}})=>({position:"fixed",left:0,top:0,right:0,bottom:0,background:e.BGPrimary,zIndex:3e3,display:"flex",flexDirection:"row"})),"label:DivBrowserModeContainer;"),c={left:"-80px",right:"-80px",width:"auto"},u={maxWidth:"419px"},p={maxWidth:"419px"},h=(0,o.default)(s.x,{target:"e11s2kul3"})({position:"absolute",width:"10%",height:"10%",filter:"blur(2px)",left:"50%",top:"50%",transform:"scale(11)",opacity:"0.3"},"label:StyledVideoBlurBackground;"),g=(0,o.default)("div",{target:"e11s2kul4"})((({isUiOptimise:e})=>({position:e?"absolute":"relative",left:e?0:"",width:"100%",height:"100%",cursor:"pointer",":hover":{[`${l.ht}`]:{opacity:1}},":focus-within":{[`${l.ht}`]:{opacity:1}}})),"label:DivVideoWrapper;"),m=(0,o.default)(a.A,{target:"e11s2kul5"})({position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none"},"label:StyledPlayIcon;");m.defaultProps=Object.assign(Object.assign({},m.defaultProps),{"data-e2e":"browse-video-play"});const v="1px solid blue",f=(0,o.default)("button",{target:"e11s2kul6"})((({theme:{colors:e}})=>({position:"absolute",zIndex:1,display:"flex",justifyContent:"center",alignItems:"center",background:e.ConstLineInverse,borderRadius:"50%",cursor:"pointer",border:"none",outline:"none",fontsize:0,"&:focus-visible":{outline:`2px solid ${e.Negative}`}})),(({theme:e,isUiOptimise:t})=>(0,r.oO)({theme:e,isUiOptimise:t})),"label:ButtonBasicButtonContainer;"),x=(0,o.default)(f,{target:"e11s2kul7"})((({theme:e,isUiOptimise:t,needOffset:i=!1})=>({width:"40px",height:"40px",top:"20px",transition:"opacity .3s",zIndex:100,backgroundColor:t?"":e.colors.ConstBGContainer,transform:`translateY(${i?16:0}px)`,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:{direction:e}})=>(0,r.mp)({direction:e,start:"20px"})),"label:StyledCloseIconContainer;");x.defaultProps=Object.assign(Object.assign({},x.defaultProps),{"data-e2e":"browse-close"});const b=(0,o.default)(f,{target:"e11s2kul8"})((({theme:e,needOffset:t=!1})=>({top:"20px",zIndex:100,backgroundColor:e.colors.ConstBGInverse4,height:"40px",padding:"0 10px",minWidth:"40px",borderRadius:"80px",transform:`translateY(${t?16:0}px)`,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:{direction:e}})=>(0,r.mp)({direction:e,start:"20px"})),"label:StyledExitCreatorModeIconContainer;"),y=(0,o.default)("div",{target:"e11s2kul9"})({display:"flex",flexDirection:"row",alignItems:"center"},"label:DivExitCreatorModeTextContainer;"),_=(0,o.default)("div",{target:"e11s2kul10"})((({theme:e})=>[(0,r.zy)({theme:e,fontWeight:"semiBold",fontFamily:"TikTokFont",fontSize:16}),{color:"#fff",height:"24px",textAlign:"center",fontSize:"16px",display:"flex",alignItems:"center",lineHeight:"24px"},(0,r.mp)({direction:e.direction,paddingStart:"5px"})]),"label:DivExitCreatorModeText;"),w=(0,o.default)(f,{target:"e11s2kul11"})((({isPrev:e,theme:{colors:t},isUiOptimise:i})=>({width:"40px",height:"40px",transform:e?"rotate(-90deg)":"rotate(90deg)",top:e?"calc(50% - 48px)":"calc(50% + 8px)",marginTop:"-24px",":disabled":{display:"none"},background:i?"":t.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:{direction:e}})=>(0,r.mp)({direction:e,end:"20px"})),"label:StyledVideoSwitch;"),C=(0,o.default)("div",{target:"e11s2kul17"})((({theme:e,isUiOptimise:t=!1})=>[(0,r.zy)({theme:e,typography:"P3",fontWeight:"semiBold",color:"ConstTextInverse4",fontFamily:"TikTokDisplayFont"}),{padding:"10px 16px",backgroundColor:e.colors.ConstBGContainer,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"100px",position:"absolute",top:"20px",cursor:"pointer",zIndex:100,color:e.colors.ConstTextInverse,WebkitAppRegion:"no-drag",":hover":{opacity:.7},":active":{opacity:.5},"&:focus-visible":{outline:v}},(0,r.oO)({theme:e,isUiOptimise:t}),(0,r.mp)({direction:e.direction,end:"20px"})]),"label:DivReportText;");C.defaultProps=Object.assign(Object.assign({},C.defaultProps),{"data-e2e":"browse-report"});const k=(0,o.default)("div",{target:"e11s2kul18"})((({theme:e,isUiOptimise:t=!1})=>[(0,r.zy)({theme:e,typography:"P3",fontWeight:"semiBold",color:"ConstTextInverse4",fontFamily:"TikTokDisplayFont"}),{width:"40px",height:"40px",backgroundColor:e.colors.ConstBGContainer,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"100px",position:"absolute",top:"20px",cursor:"pointer",zIndex:100,color:e.colors.ConstTextInverse,WebkitAppRegion:"no-drag","&:focus-visible":{outline:v}},(0,r.oO)({theme:e,isUiOptimise:t}),(0,r.mp)({direction:e.direction,end:"20px"})]),"label:DivIconWrapper;");k.defaultProps=Object.assign(Object.assign({},k.defaultProps),{"data-e2e":"browse-ellipsis"});const j=(0,o.default)(n.A,{target:"e11s2kul19"})((({theme:{direction:e}})=>(0,r.mp)({direction:e,marginEnd:"5px"})),{verticalAlign:"middle"},"label:StyledIconFlag;"),S=(0,o.default)("button",{target:"e11s2kul20"})(r.WA,(({theme:e,widerBottom:t=!1})=>({position:"absolute",bottom:t?"60px":"20px",transition:"opacity 0.3s",cursor:"pointer",fontsize:0,lineHeight:0,borderRadius:"100px",backgroundColor:e.colors.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:{direction:e}})=>(0,r.mp)({direction:e,end:"20px"})),"label:ButtonVoiceControl;");S.defaultProps=Object.assign(Object.assign({},S.defaultProps),{"data-e2e":"browse-sound"});const T=(0,o.default)("button",{target:"e11s2kul21"})(r.WA,(({theme:e})=>({display:"flex",transition:"opacity 0.3s",cursor:"pointer",fontsize:0,lineHeight:0,borderRadius:"100px",backgroundColor:e.colors.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5},"&:focus-visible":{outline:v}})),(({theme:e,isUiOptimise:t})=>(0,r.oO)({theme:e,isUiOptimise:t})),"label:ButtonVoiceControlNew;");T.defaultProps=Object.assign(Object.assign({},T.defaultProps),{"data-e2e":"browse-sound"});const P=(0,o.default)("div",{target:"e11s2kul22"})((({widerBottom:e=!1})=>({position:"absolute",zIndex:1,bottom:e?"60px":"20px"})),(({theme:{direction:e}})=>(0,r.mp)({direction:e,end:"20px"})),"label:DivVoiceControlContainer;"),D=(0,o.default)("div",{target:"e11s2kul23"})((({widerBottom:e=!1})=>({position:"absolute",bottom:e?"60px":"20px"})),(({theme:{direction:e},showMiniPlayer:t})=>(0,r.mp)({direction:e,end:t?"116px":"68px"})),"label:DivCaptionContainer;"),I=(0,o.default)("div",{target:"e11s2kul24"})((({widerBottom:e=!1})=>({position:"absolute",bottom:e?"60px":"20px"})),(({theme:{direction:e}})=>(0,r.mp)({direction:e,end:"68px"})),"label:DivMiniPlayerContainer;"),O=(0,o.default)("div",{target:"e11s2kul25"})((({theme:{colors:e},isUiOptimise:t=!1})=>({flex:t?"1 0 600px":"1 1 896px",maxWidth:t?"100%":"",background:e.ConstBGInverse,position:"relative",overflow:"hidden",padding:"0 80px"})),"label:DivVideoContainer;"),M=(0,o.default)("div",{target:"e11s2kul26"})({position:"absolute",bottom:0,left:0,right:0},"label:DivWarnInfoPosition;"),L=(0,o.default)("div",{target:"e11s2kul28"})((({display:e})=>({display:e||"flex",justifyContent:"center",alignItems:"center",position:"absolute",bottom:"84px",left:"50%",transform:"translateX(-50%)",textDecoration:"none"})),"label:FooterBtnWrapper;"),B=(0,o.default)("a",{target:"e11s2kul29"})((({theme:{colors:e,direction:t}})=>[{display:"flex",justifyContent:"center",alignItems:"center",fontWeight:500,fontSize:"18px",padding:"11.5px 24px",borderRadius:"52px",color:e.ConstTextInverse,background:e.ToastDefault,cursor:"pointer",textDecoration:"none",":hover":{opacity:.7,color:e.ConstTextInverse,textDecoration:"none"},":active":{opacity:.5,color:e.ConstTextInverse,textDecoration:"none"},":visited":{opacity:1,color:e.ConstTextInverse,textDecoration:"none"}},(0,r.mp)({direction:t,marginEnd:"8px"})]),"label:AAnalyticsWrapper;"),E=(0,o.default)("div",{target:"e11s2kul30"})((({useNarrowSearchBar:e=!1})=>({position:"absolute",zIndex:1,width:"100%",display:"flex",justifyContent:"center",left:0,right:0,margin:"auto",alignItems:"center",height:"85px",WebkitAppRegion:"no-drag","@media(max-width: 1600px)":{width:e?"50%":"100%"},"@media(max-width: 1300px)":{display:e?"none":"flex"}})),"label:DivSearchBarContainer;"),A=(0,o.default)("div",{target:"e11s2kul31"})((({useNarrowSearchBar:e=!1})=>({position:"absolute",height:"85px",width:"100%",background:"linear-gradient(180deg, rgba(0, 0, 0, 0.3) 0, rgba(0, 0, 0, 0) 100%)","@media(max-width: 1600px)":{width:e?"200%":"100%"}})),"label:DivSearchBarBackground;"),R=(0,o.default)("div",{target:"e11s2kul32"})({position:"absolute",insetInlineStart:"10px",bottom:"10px",zIndex:"1"},"label:DivVideoClosedCaptionContainer;"),z=(0,o.default)("div",{target:"e11s2kul33"})((({widerBottom:e,theme:{direction:t}})=>[{position:"absolute",bottom:e?"112px":"72px"},(0,r.mp)({direction:t,start:"20px"})]),"label:DivRepostPulsingContainer;")},36776:(e,t,i)=>{i.d(t,{AK:()=>l,Vi:()=>s,Zx:()=>g,gt:()=>a,ht:()=>p,l5:()=>r,n9:()=>d,p5:()=>h});var o=i(62186),n=i(72153);const a=(0,o.default)("div",{target:"e1rpry1m0"})({width:"100%",height:"24px",flex:"1 1 auto",position:"relative"},"label:DivSeekBarContainer;"),r=(0,o.default)("div",{target:"e1rpry1m1"})({flex:"0 0 88px",maxWidth:"88px",marginInlineStart:"8px",fontSize:"14px",lineHeight:"24px",color:"#ffffff",textAlign:"end",whiteSpace:"nowrap",fontFeatureSettings:'"tnum"',fontVariantNumeric:"tabular-nums",fontFamily:"Tahoma, PingFangSC, sans-serif"},"label:DivSeekBarTimeContainer;"),l=(0,o.default)("div",{target:"e1rpry1m2"})((({theme:{colors:e}})=>({height:"4px",width:"100%",backgroundColor:e.ConstTextInverse5,position:"absolute",left:"0",top:"50%",transform:"translateY(-50%)",cursor:"pointer","&:focus-visible":{outline:`2px solid ${e.Negative}`}})),"label:DivSeekBarProgress;"),s=(0,o.default)("div",{target:"e1rpry1m3"})((({theme:{direction:e,colors:t}})=>({height:"4px",width:"100%",backgroundColor:t.ConstTextInverse,position:"absolute",top:"50%",transform:"translateY(-50%)",cursor:"pointer",transformOrigin:"rtl"===e?"right":"left"})),"label:DivSeekBar;"),d=(0,o.default)("div",{target:"e1rpry1m4"})((({theme:{direction:e}})=>(0,n.mp)({direction:e})),(({theme:{direction:e}})=>({display:"none",width:"16px",height:"16px",backgroundColor:"#ffffff",borderRadius:"16px",position:"absolute",top:"50%",transform:`translate(${"rtl"===e?"50%":"-50%"}, -50%)`,cursor:"pointer",zIndex:1})),"label:DivSeekBarCircle;"),c="calc(100% - 160px)",u="translateX(-50%)",p=(0,o.default)("div",{target:"e1rpry1m5"})((({show:e,extraBottomSpace:t,isDisplayForAnyWidth:i,isNarrow:o=!1,useFullWideInNarrow:n=!1})=>({width:o?"calc(100% - 250px)":c,height:"24px",paddingInline:"16px",position:"absolute",opacity:e?"1":"0",transition:"opacity .3s",bottom:t?"68px":"28px",cursor:"initial",display:"flex",alignItems:"center",left:"50%",transform:u,maxWidth:"56.25vh",[`:hover ${l}`]:{height:"6px"},[`:hover ${s}`]:{height:"6px"},[`:hover ${d}`]:{display:"block"},"@media (max-width: 900px)":{display:i?"":"none"},"@media (max-width: 1430px)":n?{maxWidth:"unset",width:c,marginInlineStart:"4px",left:"unset",transform:"none"}:{},zIndex:1})),"label:DivVideoControlContainer;"),h=(0,o.default)("div",{target:"e1rpry1m6"})({width:c,height:"28px",position:"absolute",bottom:0,left:"50%",transform:u,cursor:"initial",maxWidth:"56.25vh"},"label:DivVideoControlBottom;"),g=(0,o.default)("div",{target:"e1rpry1m7"})((({widerBottom:e})=>({width:c,height:"10px",position:"absolute",bottom:e?"92px":"52px",left:"50%",transform:u,cursor:"initial",maxWidth:"56.25vh"})),"label:DivVideoControlTop;")},54503:(e,t,i)=>{i.d(t,{D:()=>r});var o=i(58632),n=i(38203),a=i(39228);let r=class{constructor(e){this.fetch=e,this.postPrivateBannerAck=()=>this.fetch.post("/api/private_banner/ack/")}getVideoPrivateSetting(){return this.fetch.get("/api/compliance/settings/",{baseUrlType:2})}};r=(0,o.__decorate)([(0,n._)(),(0,o.__metadata)("design:paramtypes",[a.pM])],r)},39589:(e,t,i)=>{i.d(t,{K:()=>o});const o=(0,i(40099).createContext)(null)},86776:(e,t,i)=>{i.d(t,{XF:()=>p,kw:()=>h});var o,n=i(46682),a=i(40099),r=i(47172),l=i(78662),s=i(49057),d=i(43626),c=i(18183),u=i(88920);function p(){var e;const{region:t=""}=null!==(e=(0,s.W)((()=>["region"]),[]))&&void 0!==e?e:{},i=(0,n.w)(c.M);return(0,a.useCallback)((()=>{i.initShareSettings({isMobile:!1,region:t})}),[t,i])}function h(){const{isBrowserModeShowing:e}=(0,a.useContext)(d.g),{pathname:t}=(0,r.useLocation)(),{shouldOptimizeCta:i}=(0,u.kb)();return(0,a.useMemo)((()=>{const o=((0,l.cj)(t)||(0,l.Ke)(t)||(0,l.Iy)(t)||(0,l.nq)(t)||(0,l.Ds)(t)||(0,l.LC)(t)||(0,l.vb)(t))&&!e,n=(0,l.tO)(t)||(0,l.P_)(t)||(0,l.gq)(t)||(0,l.Fj)(t);let a="none";return e?a=i?"short":"expand":(o||n)&&(a="short"),{additionShareOptions:!0,expanded:a}}),[t,e,i])}!function(e){e.None="none",e.Simple="short",e.Expanded="expand"}(o||(o={}))},18183:(e,t,i)=>{i.d(t,{M:()=>y});var o=i(58632),n=i(64162),a=i(4126),r=i(93995),l=i(23999),s=i(26324),d=i(35572),c=i(62564),u=i(74690),p=i(24451),h=i(20259),g=i(39228),m=i(16469),v=i(44494),f=i(38203),x=i(8536);let b=class{get Kakao$(){return window.Kakao?(0,l.of)(null):new s.c((e=>{i.e(6020).then(i.t.bind(i,6020,23)).then((()=>{window.Kakao.init("4954e33ea2a4395e59ecbc20761bd889"),e.next(),e.complete()})).catch((t=>{console.error(t),e.next(),e.complete()}))}))}share(e){return this.Kakao$.pipe((0,x.Z)((()=>new s.c((t=>{window.Kakao.Share.sendScrap({requestUrl:e,callback:()=>{t.next(),t.complete()}})})))),(0,h.W)((()=>(0,l.of)(null))))}};b=(0,o.__decorate)([(0,f._)()],b);let y=class extends n.E{constructor(e,t){super(),this.fetch=e,this.kakaoSdk=t,this.defaultState={platforms:null,platformsForAdditionOnly:null,isFlip:!1,loading:!1}}setPlatforms(e,t){e.platforms=t}setLoading(e,t){e.loading=t}setIsFlip(e,t){e.isFlip===t||t&&!function(){var e;const t=m._w.getItem("flip_timestamp"),i=(null!==(e=m._w.getItem("flip_count"))&&void 0!==e?e:0)+1,o=(new Date).setHours(0,0,0,0);return!(t&&t===o&&i>7||(m._w.setItem("flip_timestamp",o),m._w.setItem("flip_count",i),0))}()||(e.isFlip=t)}handleKakaoShare(e){return e.pipe((0,d.p)((({requestUrl:e})=>this.kakaoSdk.share(e).pipe((0,c.T)((()=>this.getActions().setLoading(!1))),(0,u.Z)(this.getActions().setLoading(!0))))))}initShareSettings(e){return e.pipe((0,p.E)(this.state$),(0,d.p)((([e,{platforms:t}])=>t?(0,l.of)(this.getActions().setPlatforms(t)):this.fetch.get("/api/share/settings/",{query:{device_platform:e.isMobile?"webapp_mobile":"webapp_pc",mode:1}}).pipe((0,c.T)((({status_code:t,share_platforms:i})=>{if(0===t&&(null==i?void 0:i.length)){const t=i.map((({platform_id:e})=>e)).filter((t=>{return i=t,e.isMobile?i in v.Z8:i in v.Ag;var i}));return this.getActions().setPlatforms(t)}return this.getActions().setPlatforms((0,v.L_)(e))})),(0,u.Z)(this.getActions().setPlatforms([])),(0,h.W)((()=>(0,l.of)(this.getActions().setPlatforms((0,v.L_)(e)))))))))}};(0,o.__decorate)([(0,a.h5)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],y.prototype,"setPlatforms",null),(0,o.__decorate)([(0,a.h5)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],y.prototype,"setLoading",null),(0,o.__decorate)([(0,a.h5)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],y.prototype,"setIsFlip",null),(0,o.__decorate)([(0,a.Mj)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[s.c]),(0,o.__metadata)("design:returntype",s.c)],y.prototype,"handleKakaoShare",null),(0,o.__decorate)([(0,a.Mj)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[s.c]),(0,o.__metadata)("design:returntype",s.c)],y.prototype,"initShareSettings",null),y=(0,o.__decorate)([(0,r.n)("TTShare"),(0,o.__metadata)("design:paramtypes",[g.pM,b])],y)},25941:(e,t,i)=>{i.d(t,{P:()=>u,p:()=>c});var o=i(94039),n=i(22884),a=i(32125),r=i(44494),l=i(21367),s=i(40099),d=i(88920);const c=()=>{const e=(0,o.FV)(),t=(0,l.GF)(),{isPulsing:i,videoId:d}=(0,o.AJ)((e=>e),a.bN),{platformId:c,user:u}=(0,n.Gr)((e=>e),a.bN);return(0,s.useEffect)((()=>{t&&d&&t!==d&&e.turnOffSharePulsing()}),[t,d,e]),{isSharedPulsing:i&&t===d,lastSharedMethod:c in r.Ag?c:null,lastMessagedUser:c===r.Ag.message&&u.id&&u.avatarThumb?u:null}},u=()=>{const{isInExperiment:e}=(0,d.NV)(),t=(0,n.f7)();(0,s.useEffect)((()=>{e&&t.initLastSharedAtom()}),[e,t])}},94039:(e,t,i)=>{i.d(t,{FV:()=>s,AJ:()=>d});var o=i(93608);const n=e=>{o.f.sendEvent("share_flip_show",e)};var a=i(71111),r=i(31209);const l=(0,a.atom)({isPulsing:!1,videoId:"",vvCount:0});l.debugLabel="sharePulsingAtom";const{useServiceDispatchers:s,useServiceState:d}=(0,r.i)(l,((e,t)=>({turnOnSharePulsing:i=>{const{videoId:a,authorId:r}=i;e(l).isPulsing||n({group_id:a,author_id:r,page_name:o.f.commonParams.page_name}),t(l,(e=>Object.assign(Object.assign({},e),{isPulsing:!0,videoId:a})))},turnOffSharePulsing:()=>{t(l,(e=>Object.assign(Object.assign({},e),{isPulsing:!1,videoId:"",vvCount:0})))},maybeTurnOnSharePulsing:i=>{const{videoId:a,authorId:r}=i;if(a!==e(l).videoId)t(l,(e=>Object.assign(Object.assign({},e),{isPulsing:!1,videoId:a,vvCount:1})));else{const i=e(l).vvCount+1,s=e(l).isPulsing;i>=2&&!s&&n({group_id:a,author_id:r,page_name:o.f.commonParams.page_name}),t(l,(e=>Object.assign(Object.assign({},e),{isPulsing:i>=2||s,videoId:a,vvCount:i})))}},maybeTurnOffSharePulsing:i=>{i!==e(l).videoId&&t(l,(e=>Object.assign(Object.assign({},e),{isPulsing:!1,videoId:"",vvCount:0})))}})))},78208:(e,t,i)=>{i.d(t,{d:()=>f});var o,n=i(24643),a=i(41271),r=i(40099),l=i(71334),s=i(80752),d=i(96973),c=i(25616),u=i(49057);!function(e){e.GeneralSensitive="general_sensitive",e.PhotoSensitive="photo_sensitive",e.PhotoSensitiveDenied="photo_sensitive_denied"}(o||(o={}));const p={general_sensitive:"masklayer_general_title",photo_sensitive:"photosensitive_masklayer_title",photo_sensitive_denied:"photosensitive_masklayer_removed"},h={general_sensitive:["masklayer_general_body"],photo_sensitive:["photosensitive_masklayer_body1","photosensitive_masklayer_body2"],photo_sensitive_denied:["photosensitive_masklayer_removed_body1","photosensitive_masklayer_removed_body3"]},g={general_sensitive:"masklayer_general_skip",photo_sensitive:"photosensitive_masklayer_watch",photo_sensitive_denied:""},m={general_sensitive:"masklayer_general_watch",photo_sensitive:"photosensitive_masklayer_skipall",photo_sensitive_denied:""};var v=i(59952);const f=({playMode:e,item:t,smallSizeIcon:i=!1})=>{var o;const f=(0,c.s)(),{user:x}=null!==(o=(0,u.W)((()=>["user"]),[]))&&void 0!==o?o:{},{photoSensitiveVideosSetting:b,uid:y}=null!=x?x:{},{photoSensitiveVideosSetting:_}=(0,a.P)(v.w);return(0,r.useMemo)((()=>{const{maskType:o,authorId:a}=t,r=3===o,c=4===o;if(!c&&!r)return{showVideoMask:!1};if(c&&(2===b||2===_||a===y&&0!==b))return{showVideoMask:!1};let u;u=r?"general_sensitive":1===_?"photo_sensitive_denied":"photo_sensitive";const v=f(p[u]),x=h[u].map((e=>f(e))).join(""),w=((e,t,i)=>{let o=null,a=48;switch(e){case"general_sensitive":a=0===t?36:53,a=i?24:a,o=(0,n.jsx)(l.A,{width:a,height:a,fill:"rgba(255, 255, 255, .75)"});break;case"photo_sensitive":a=0===t?32:48,a=i?24:a,o=(0,n.jsx)(s.A,{width:a,height:a,fill:"#fff"});break;case"photo_sensitive_denied":a=0===t?32:48,a=i?24:a,o=(0,n.jsx)(d.A,{width:a,height:a,fill:"#0BE09B"})}return o})(u,e,i),C=f(((e,t)=>2===t||3===t||4===t||7===t||0===t&&"photo_sensitive"===e?g[e]:"")(u,e)),k=f(((e,t)=>2===t||3===t||4===t||7===t||0===t&&"general_sensitive"===e?m[e]:"")(u,e));return{showVideoMask:!0,maskType:u,videoMaskTitle:v,videoMaskDesc:x,icon:w,videoMaskFirstButtonText:C,videoMaskSecondButtonText:k}}),[t,b,_,y,f,e,i])}},83454:(e,t,i)=>{i.d(t,{Cm:()=>x,G$:()=>d,Gs:()=>m,LI:()=>u,Ls:()=>s,NL:()=>f,Ox:()=>_,P3:()=>b,SZ:()=>l,T_:()=>y,Wj:()=>v,bc:()=>r,ei:()=>c,xV:()=>h});var o=i(62186),n=i(72153),a=i(97397);const r=(0,o.default)("div",{target:"e4uoj5v0"})((({theme:e,playMode:t})=>[4===t?{borderRadius:"4px",overflow:"hidden"}:{},{position:"absolute",zIndex:3===t||4===t?0:1,width:"100%",height:"100%",left:"0",top:"0",backdropFilter:"blur(50px)",backgroundColor:e.colors.SDSecondary},2===t?{left:"-80px",right:"-80px",width:"unset"}:null]),"label:DivVideoMask;"),l=(0,o.default)("div",{target:"e4uoj5v1"})((({playMode:e})=>[4!==e?{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:"515px"}:{},{width:2===e?"calc(100% - 160px)":"100%",padding:0===e?"32px":"48px",paddingTop:4===e?"100px":""},3===e?{width:"463px"}:{}]),"label:DivVideoMaskContainer;"),s=(0,o.default)("div",{target:"e4uoj5v2"})({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},"label:DivVideoMaskInfo;"),d=(0,o.default)("div",{target:"e4uoj5v3"})((({theme:e,playMode:t,showIconBackground:i})=>({display:"flex",justifyContent:"center",alignItems:"center",width:0===t?"72px":"106px",height:0===t?"72px":"106px",borderRadius:"50%",color:e.colors.Positive,backgroundColor:i?e.colors.ConstBGContainer2:void 0})),"label:DivVideoMaskIcon;"),c=(0,o.default)("p",{target:"e4uoj5v4"})((({theme:e,theme:{colors:t},playMode:i})=>[(0,n.zy)({theme:e,fontFamily:"TikTokFont",fontWeight:"semiBold"}),{fontSize:0===i?"17px":"24px",lineHeight:0===i?"20px":"32px",textAlign:"center",color:t.ConstTextInverse2,marginTop:0===i?"20px":"24px"}]),"label:PVideoMaskTitle;"),u=(0,o.default)("p",{target:"e4uoj5v5"})((({theme:e,playMode:t})=>[(0,n.zy)({theme:e,typography:0===t?"H6":"P1",fontFamily:"TikTokFont",fontWeight:"normal"}),{maxWidth:"400px",textAlign:"center",color:"rgba(255, 255, 255, .75)",marginTop:0===t?"12px":"16px"}]),"label:PVideoMaskDesc;"),p=(e,t)=>{switch(e){case 0:return t?"20px":"80px";case 4:return"56px";default:return"180px"}},h=(0,o.default)("div",{target:"e4uoj5v6"})((({playMode:e,horizontal:t})=>[{marginTop:p(e,t)},4===e?{display:"flex",flexDirection:"column",alignItems:"center"}:{}]),"label:DivBtnWrapper;");function g(e){const{theme:t,second:i,playMode:o}=e;return[n.PR,4===o?{maxWidth:"400px"}:{},(0,n.zy)({theme:t,typography:"P1",fontFamily:"TikTokFont",fontWeight:"semiBold"}),{display:"block",minWidth:"unset",width:"100%",height:0===o?"36px":"56px",marginBottom:i?"0":"8px",background:i?t.colors.ConstBGContainer:t.colors.Primary},i?{"&:hover":{background:t.colors.ConstBGContainer2},"&:active":{background:t.colors.ConstBGContainer3}}:null,0===o?{fontSize:"14px",lineHeight:"17px"}:null]}const m=(0,o.default)(a.y,{target:"e4uoj5v7"})((e=>g(e)),"label:StyledButtonFirst;"),v=(0,o.default)(a.y,{target:"e4uoj5v8"})((e=>g(e)),"label:StyledButtonSecond;"),f=(0,o.default)("div",{target:"e4uoj5v9"})({background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(25px)",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,right:0,bottom:0,userSelect:"none"},"label:DivMaskContainer;"),x=(0,o.default)("div",{target:"e4uoj5v10"})((({horizontal:e})=>({width:e?"240px":"160px",display:"flex",flexDirection:"column",alignItems:"center"})),"label:DivMaskInfo;"),b=(0,o.default)("div",{target:"e4uoj5v11"})({width:"48px",height:"48px",marginBottom:"8px",borderRadius:"48px",background:"rgba(255, 255, 255, 0.12)",display:"flex",alignItems:"center",justifyContent:"center"},"label:DivMaskIcon;"),y=(0,o.default)("p",{target:"e4uoj5v12"})((({theme:e})=>({fontSize:"16px",lineHeight:"24px",fontWeight:"600",marginBottom:"2px",color:e.colors.ConstTextInverse2,textAlign:"center"})),"label:PMaskTitle;"),_=(0,o.default)("p",{target:"e4uoj5v13"})((({theme:e})=>({fontSize:"14px",lineHeight:"22px",color:e.colors.ConstTextInverse3,textAlign:"center"})),"label:PMaskDesc;")},93965:(e,t,i)=>{i.d(t,{u:()=>l});var o=i(24643),n=i(40099),a=i(58305),r=i(83454);const l=(0,n.memo)((e=>{const{playMode:t,style:i,icon:l,showIconBackground:s=!0,title:d,desc:c,horizontal:u=!1,firstButtonText:p,secondButtonText:h,canClickPropagation:g=!1,children:m,onClickFirstButton:v,onClickSecondButton:f}=e,x=Boolean(p),b=Boolean(h),y=(0,n.useCallback)((e=>{!g&&(0,a.Gu)(e)}),[g]),_=(0,n.useCallback)((e=>{e.preventDefault()}),[]);return(0,o.jsxs)(r.bc,{playMode:t,onClick:y,style:i,onContextMenu:_,children:[(0,o.jsxs)(r.SZ,{playMode:t,children:[(0,o.jsxs)(r.Ls,{children:[Boolean(l)&&(0,o.jsx)(r.G$,{playMode:t,showIconBackground:s,children:l}),Boolean(d)&&(0,o.jsx)(r.ei,{playMode:t,children:d}),Boolean(c)&&(0,o.jsx)(r.LI,{playMode:t,children:c})]}),(0,o.jsxs)(r.xV,{horizontal:u,playMode:t,children:[x&&(0,o.jsx)(r.Gs,{type:"button",buttonTheme:"primary",playMode:t,onClick:v,children:p}),b&&(0,o.jsx)(r.Wj,{type:"button",buttonTheme:"primary",playMode:t,second:!0,onClick:f,children:h})]})]}),m]})}))},95357:(e,t,i)=>{i.d(t,{$:()=>a});var o=i(58632),n=i(93608);const a={handleSeekBarAutoShow:e=>{n.f.sendEvent("show_progress_bar",Object.assign(Object.assign({},e),{show_method:"preview"}))},handleSeekBarClick:e=>{var{fromPercent:t,toPercent:i,video_length:a}=e,r=(0,o.__rest)(e,["fromPercent","toPercent","video_length"]);const l=i>t?"front":"back",s=a*t,d=a*i;n.f.sendEvent("click_progress_bar",Object.assign({action_type:l,seek_from:s,seek_to:d,video_length:a},r))}}},64738:(e,t,i)=>{i.d(t,{useAtom:()=>n,useAtomValue:()=>a,useSetAtom:()=>r});var o=i(71111);const n=o.useAtom,a=o.useAtomValue,r=o.useSetAtom}}]);