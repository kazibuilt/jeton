"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[4413],{53701:(e,t,n)=>{n.d(t,{a:()=>a,k:()=>o});var i=n(93608);const o=e=>{i.f.event("video_data_size",e)},a=e=>{i.f.event("basic_player_cdn_cost",e)}},92701:(e,t,n)=>{n.d(t,{Hg:()=>d,cU:()=>u,sE:()=>s});const i=(e,t)=>{if(!e)return null;const{PlayAddr:n,CodecType:i="",QualityType:o=0,GearName:a="",Bitrate:r=0,MVMAF:l=""}=e;return{bitrate:r,gearName:a,codecType:i.includes("h265")?"h265":i,qualityType:o,definition:a,mvmaf:l,size:(null==n?void 0:n.DataSize)||0,width:(null==n?void 0:n.Width)||0,height:(null==n?void 0:n.Height)||0,fileId:(null==n?void 0:n.FileHash)||"",uri:(null==n?void 0:n.Uri)||"",url:((null==n?void 0:n.UrlList)||[]).map((e=>({src:e}))),duration:t||0}},o=(e,t)=>{const n={};let i=e;return t&&(i=((e,t)=>{try{const n=(t,n)=>t[e[0].property]!==n[e[0].property]?"Bitrate"===e[0].property?"desc"===e[0].order?n.Bitrate-t.Bitrate:t.Bitrate-n.Bitrate:e[0].detail.indexOf(t[e[0].property])>=0&&e[0].detail.indexOf(n[e[0].property])>=0?e[0].detail.indexOf(t[e[0].property])-e[0].detail.indexOf(n[e[0].property]):e[0].detail.indexOf(t[e[0].property])>=0?-1:1:t[e[1].property]!==n[e[1].property]?"Bitrate"===e[1].property?"desc"===e[1].order?n.Bitrate-t.Bitrate:t.Bitrate-n.Bitrate:e[1].detail.indexOf(t[e[1].property])>=0&&e[1].detail.indexOf(n[e[1].property])>=0?e[1].detail.indexOf(t[e[1].property])-e[1].detail.indexOf(n[e[1].property]):e[1].detail.indexOf(t[e[1].property])>=0?-1:1:1;return t&&t.length>0?[...t].sort(n):void 0}catch(e){return void console.error("bitrateInfo is empty")}})(t,e)),i?(i.forEach((e=>{let{CodecType:t}=e;t.startsWith("h265")&&(t="h265"),n[t]||(n[t]=[]),n[t].push(e)})),n):n},a=({qualityType:e,h264:t})=>{if(t&&t.length>0){const n=e||20;t.sort(((e,t)=>e.Bitrate-t.Bitrate));let i=t.find((e=>e.QualityType===n));return i||(i=t[0]),i}return null},r=({hevcQualityType:e,h265:t})=>{if(t){const n=e||28;t.sort(((e,t)=>e.Bitrate-t.Bitrate));const i=t.find((e=>e.QualityType===n));if(i)return i;if(t.length>0)return t[0]}return null};function l(e,t,n){return e.length>0&&t&&"h265"===n}const s=({hevcTest:e,bitrateInfo:t,videoOrder:n,downgradeUrl:s,defaultBitrate:d,codec:u="h264",duration:c=0})=>{const{h264:p=[],h265:v=[]}=o(t,n),{qualityType:h=20,hevcQualityType:m=28}=e;let y=null,g="h264";l(v,e.open,u)&&(y=i(r({hevcQualityType:m,h265:v}),c));const f=i(a({qualityType:h,h264:p}),c);if(y?g="h265":y=f,y){const e=y.url;if(e.length>0)return{src:e,bitrate:y.bitrate||0,definition:y.definition||"",codecType:g,finalBitrateInfo:[y],h264BitrateInfo:f?[f]:[]}}return{bitrate:d,definition:"normal",src:s?[{src:s}]:[],codecType:"h264",finalBitrateInfo:void 0,h264BitrateInfo:void 0}},d=({hevcTest:e,bitrateInfo:t,videoOrder:n,downgradeUrl:i,backupDomain:s=!1,codec:d="h264"})=>{var u;const{h264:c=[],h265:p=[]}=o(t,n),{qualityType:v=20,hevcQualityType:h=28}=e;let m=null,y="",g="h264";if(l(p,e.open,d)&&(m=r({hevcQualityType:h,h265:p})),m?g="h265":m=a({qualityType:v,h264:c}),m){const e=(null===(u=m.PlayAddr)||void 0===u?void 0:u.UrlList)||[];if(e.length>0)return y=e.length>1&&s?e[1]:e[0],{src:y,bitrate:m.Bitrate||0,definition:m.GearName||"",codecType:g,finalBitrateInfo:[m]}}return{bitrate:0,definition:"",src:null!=i?i:"",codecType:"h264",finalBitrateInfo:void 0}},u=e=>{const t=[],n=[];return e&&e.forEach((e=>{const i={qualityType:e.QualityType,gearName:e.GearName};e.CodecType.indexOf("h265")>=0?n.push(i):t.push(i)})),{h264Set:t,h265Set:n}}},87802:(e,t,n)=>{n.d(t,{Jz:()=>r,R4:()=>u,S4:()=>l,VN:()=>c,e5:()=>s,i3:()=>d});var i=n(71111),o=n(31209);const a=(0,i.atom)({mute:!0,playing:!0,volume:0,currentCaption:null,enableCaption:!1,canAutoPlay:!0}),{useServiceState:r,useServiceDispatchers:l,useAtomService:s}=(0,o.i)(a,((e,t)=>({setMute(e){t(a,(t=>Object.assign(Object.assign({},t),{mute:e})))},setVolume(e){t(a,(t=>Object.assign(Object.assign({},t),{volume:Math.min(Math.max(0,e),1)})))},setPlaying(e){t(a,(t=>Object.assign(Object.assign({},t),{playing:e})))},setCurrentCaption(e){t(a,(t=>Object.assign(Object.assign({},t),{currentCaption:e})))},setEnableCaption(e){t(a,(t=>Object.assign(Object.assign({},t),{enableCaption:e})))},setCanAutoPlay(e){t(a,(t=>Object.assign(Object.assign({},t),{canAutoPlay:e})))},getStaticBasicPlayerState:()=>e(a)}))),d=()=>r((e=>e.mute)),u=()=>r((e=>e.volume)),c=()=>r((e=>e.playing))},63508:(e,t,n)=>{var i;n.d(t,{Az:()=>o,Wu:()=>r,uJ:()=>a}),function(e){e[e.NIL=-255]="NIL",e[e.UnknownError=-1]="UnknownError",e[e.Ok=0]="Ok",e[e.ReportLiveFailed=90002]="ReportLiveFailed",e[e.VerifyCode=1e4]="VerifyCode",e[e.VideoLikeFreq=2150]="VideoLikeFreq",e[e.VideoLikeFreq2=2210]="VideoLikeFreq2",e[e.VideoUnavailableDeleted=2054]="VideoUnavailableDeleted",e[e.AdVideoUnavailableChange=2752]="AdVideoUnavailableChange",e[e.CommentBanCode=22]="CommentBanCode",e[e.CommentLikePermissionDisable=3002043]="CommentLikePermissionDisable",e[e.SearchSensitiveCode=403]="SearchSensitiveCode",e[e.SearchYoungCode=203]="SearchYoungCode",e[e.SmsInvalidNumber=-1]="SmsInvalidNumber",e[e.SmsSlideVerify=-4]="SmsSlideVerify",e[e.FypVideoListLimit=10404]="FypVideoListLimit",e[e.ClientPageError=450]="ClientPageError",e[e.LiveNeedLogin=10119]="LiveNeedLogin",e[e.SharkBlock=10114]="SharkBlock",e[e.SharkSlide=10113]="SharkSlide",e[e.NetError=10111]="NetError",e[e.ServerErrorNot500=10101]="ServerErrorNot500",e[e.VideoRisk=10228]="VideoRisk",e[e.VideoRMask=10229]="VideoRMask",e[e.VideoRiskMask=10230]="VideoRiskMask",e[e.VideoNeedRecheck=10227]="VideoNeedRecheck",e[e.VideoUnshelveByMusic=10220]="VideoUnshelveByMusic",e[e.VideoNotExist=10204]="VideoNotExist",e[e.VideoAbnormal=10215]="VideoAbnormal",e[e.VideoLowAgeM=10213]="VideoLowAgeM",e[e.VideoLowAgeT=10214]="VideoLowAgeT",e[e.VideoFirstReviewUnshelve=10217]="VideoFirstReviewUnshelve",e[e.VideoPrivateByUser=10216]="VideoPrivateByUser",e[e.VideoGeofenceBlock=10231]="VideoGeofenceBlock",e[e.VideoPhoto=10239]="VideoPhoto",e[e.VideoFriendsOnly=10240]="VideoFriendsOnly",e[e.VideoDeleted=10241]="VideoDeleted",e[e.VideoUserBlockedByAuthor=10242]="VideoUserBlockedByAuthor",e[e.HashtagNotExist=10205]="HashtagNotExist",e[e.HashtagUnshelve=10212]="HashtagUnshelve",e[e.HashtagSensitivityWord=10211]="HashtagSensitivityWord",e[e.HashtagBlackList=10209]="HashtagBlackList",e[e.UserInboxFollowBan=24]="UserInboxFollowBan",e[e.UserNotExist=10202]="UserNotExist",e[e.UserBan=10221]="UserBan",e[e.UserPrivate=10222]="UserPrivate",e[e.UserNotLogin=10102]="UserNotLogin",e[e.UserFtc=10223]="UserFtc",e[e.UserUniqueSensitivity=10225]="UserUniqueSensitivity",e[e.QuestionNotAvailable=10236]="QuestionNotAvailable",e[e.MusicNotExist=10203]="MusicNotExist",e[e.MusicUnshelve=10218]="MusicUnshelve",e[e.MusicNoCopyright=10219]="MusicNoCopyright",e[e.MusicUnavailable=202001]="MusicUnavailable",e[e.GameNotExist=10224]="GameNotExist",e[e.LiveNotExist=10210]="LiveNotExist",e[e.GoLiveRoomBaned=10018]="GoLiveRoomBaned",e[e.GoLiveBaned=4003035]="GoLiveBaned",e[e.LiveRoomPrepare=30019]="LiveRoomPrepare",e[e.LiveRoomEnd=30003]="LiveRoomEnd",e[e.LiveRoomBan=30012]="LiveRoomBan",e[e.LiveNoGatedAuth=4003043]="LiveNoGatedAuth",e[e.LiveNoAgeGatedAuth=4003110]="LiveNoAgeGatedAuth",e[e.LivePaidEvent=4003072]="LivePaidEvent",e[e.LiveSubscriberOnly=4003135]="LiveSubscriberOnly",e[e.LiveSuicideCase=2403]="LiveSuicideCase",e[e.LiveSensitiveTitle=50004]="LiveSensitiveTitle",e[e.LiveRoomBaned=10018]="LiveRoomBaned",e[e.LiveEnterRoomNeedLogin=20003]="LiveEnterRoomNeedLogin",e[e.LiveAccountUnderRiskControl=20063]="LiveAccountUnderRiskControl",e[e.LiveHitBanStrategy=30009]="LiveHitBanStrategy",e[e.LiveOBSAccessRecalled=4003105]="LiveOBSAccessRecalled",e[e.EffectNotExist=10208]="EffectNotExist",e[e.PlaylistNotExist=10233]="PlaylistNotExist",e[e.PlaylistInTrill=10234]="PlaylistInTrill",e[e.VideoPlaylistUnavailable=10243]="VideoPlaylistUnavailable",e[e.VideoPlaylistIsEmpty=10244]="VideoPlaylistIsEmpty",e[e.PrivateAccountLimitByBC=3026002]="PrivateAccountLimitByBC"}(i||(i={}));const o=e=>{if(isNaN(e))return"00:00";const t=Math.floor(e/3600),n=(t<10?"0":"")+t.toString(),i=`0${Math.floor(e/60%60)}`.slice(-2),o=`0${Math.floor(e%60)}`.slice(-2);return 0===t?`${i}:${o}`:`${n}:${i}:${o}`},a=(new Map([[2,"adapt_lowest_1080p"],[3,"adapt_lower_1080p"],[4,"adapt_1080p"],[7,"adapt_lowest_1440p"],[10,"normal_720p"],[11,"low_720p"],[12,"adapt_high_720p"],[13,"adapt_higher_720p"],[14,"adapt_lower_720p"],[15,"adapt_lowest_720p"],[16,"higher_720p"],[17,"highest_720p"],[18,"adapt_720p"],[19,"adapt_low_720p"],[191,"lower_720p"],[20,"normal_540p"],[21,"adapt_lower_540p"],[22,"adapt_high_540p"],[23,"adapt_higher_540p"],[24,"lower_540p"],[25,"lowest_540p"],[26,"higher_540p"],[27,"highest_540p"],[28,"adapt_540p"],[29,"adapt_lowest_540p"],[291,"adapt_low_540p"],[30,"normal_480p"],[31,"low_480p"],[32,"high_480p"],[33,"medium_480p"],[34,"lower_480p"],[35,"lowest_480p"],[36,"higher_480p"],[37,"highest_480p"],[38,"adapt_480p"],[39,"adapt_lower_480p"],[391,"adapt_high_480p"],[40,"normal_360p"],[41,"low_360p"],[42,"high_360p"],[43,"medium_360p"],[44,"lower_360p"],[45,"lowest_360p"],[46,"higher_360p"],[47,"highest_360p"],[48,"adapt_360p"],[49,"adapt_lowest_360p"],[50,"adapt_high_360p"]]),"use-credentials"),r="PRELOAD_INFO"},66458:(e,t,n)=>{n.d(t,{JE:()=>r,K:()=>s});var i=n(71111),o=n(31209);const a=(0,i.atom)({isCaptionModalOn:!1,currentCaption:"",captionModalEnterMethod:"click_cc_indicator"});a.debugLabel="captionInfoAtom";const{useAtomService:r,useServiceState:l,useServiceDispatchers:s,getStaticApi:d}=(0,o.i)(a,((e,t)=>({setIsCaptionModalOn(e){t(a,(t=>Object.assign(Object.assign({},t),{isCaptionModalOn:e})))},setCurrentCaption(e){t(a,(t=>Object.assign(Object.assign({},t),{currentCaption:e})))},setCaptionModalEnterMethod(e){t(a,(t=>Object.assign(Object.assign({},t),{captionModalEnterMethod:e})))},setCaptionModalRoot(e){t(a,(t=>Object.assign(Object.assign({},t),{captionModalRoot:e})))}})))},8641:(e,t,n)=>{n.d(t,{_N:()=>c,xx:()=>d});var i,o=n(14374),a=n(71111),r=n(31209);!function(e){e.Download="download",e.FriendShare="share",e.CopyLink="link",e.PictureInPicture="pip",e.ManageFeed="manage-feed",e.VideoDetails="details",e.Comment="comment",e.Like="like",e.UserDetails="user",e.PhotoDetails="photo"}(i||(i={}));const l={location:{x:0,y:0},contextMenuOpen:!1,videoInfo:{videoId:"",author:"",downloadAddr:"",videoShareHandler:()=>{},mediaType:"video"},menuOptions:[]},s=(0,o._)((0,a.atom)(l),{rehydrationKey:"webapp.contextMenu"});s.debugLabel="contextMenuAtom";const{useAtomService:d,useServiceState:u,useServiceDispatchers:c,getStaticApi:p}=(0,r.i)(s,((e,t)=>({setLocation(e){t(s,(t=>Object.assign(Object.assign({},t),{location:e})))},setContextMenuOpen(e){t(s,(t=>Object.assign(Object.assign({},t),{contextMenuOpen:null!=e?e:t.contextMenuOpen})))},setVideoInfo(e){e&&t(s,(t=>Object.assign(Object.assign({},t),{videoInfo:e})))},setMenuOptions(e){e&&t(s,(t=>Object.assign(Object.assign({},t),{menuOptions:e})))},openContextMenu(e){const{location:n,videoInfo:i,menuOptions:o}=e;t(s,(e=>Object.assign(Object.assign({},e),{contextMenuOpen:!0,location:n,videoInfo:null!=i?i:e.videoInfo,menuOptions:null!=o?o:e.menuOptions})))},resetContextMenu(e){t(s,l)}})))},11072:(e,t,n)=>{n.d(t,{M:()=>b,Oh:()=>k,RA:()=>w,Vk:()=>f,ik:()=>_,sX:()=>P,xJ:()=>y,xL:()=>g,xr:()=>h});var i=n(71111),o=n(31209),a=n(32125),r=n(46747),l=n(60484),s=n(60072),d=n(92502),u=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}s((i=i.apply(e,t||[])).next())}))};const c=(0,i.atom)({});c.debugLabel="translationAtom";const{useAtomService:p,useServiceState:v,useServiceDispatchers:h,getStaticApi:m}=(0,o.i)(c,((e,t)=>({getSubtitleTranslation(e){return u(this,void 0,void 0,(function*(){const{target_language:n,item_id:i}=e;try{const o=yield(0,r.Ze)(e);0===o.status_code&&t(c,(e=>Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},e[i]),{subtitle:{stringContent:o.webvtt_subtitle,language:n,id:"999"}})})))}catch(e){}}))},getDescriptionTranslation(e){return u(this,void 0,void 0,(function*(){const{item_id:n}=e;if(n)try{const i=yield(0,r.zB)(e);0===i.status_code&&t(c,(e=>Object.assign(Object.assign({},e),{[n]:Object.assign(Object.assign({},e[n]),{description:i.translated_content})})))}catch(e){}}))},getPhotoTitleTranslation(e){return u(this,void 0,void 0,(function*(){const{item_id:n}=e;if(n)try{const i=yield(0,r.ph)(e);0===i.status_code&&t(c,(e=>Object.assign(Object.assign({},e),{[n]:Object.assign(Object.assign({},e[n]),{title:i.translated_content})})))}catch(e){}}))},setShowTranslation(e,n){t(c,(t=>Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},t[e]),{showTranslation:n})})))}}))),y=e=>v((t=>{var n;return null===(n=t[e])||void 0===n?void 0:n.subtitle})),g=e=>{const t=(0,s.F3)((t=>t[e])),{video:n}=(0,l.L$)(t),{claInfo:i}=(0,l.L$)(n),{originalLanguageInfo:o}=(0,l.L$)(i),{languageCode:r,canTranslateRealTimeNoCheck:u}=(0,l.L$)(o),{selectedTranslationLanguage:c,isReady:p}=(0,d.RD)((e=>({selectedTranslationLanguage:e.selectedTranslationLanguage,isReady:e.isReady})),a.bN);return Boolean(r!==c&&u&&p)},f=e=>{var t;const n=(0,s.F3)((t=>t[e])),{video:i}=(0,l.L$)(n),{claInfo:o}=(0,l.L$)(i),a=null===(t=null==o?void 0:o.originalLanguageInfo)||void 0===t?void 0:t.languageCode,{isMasterTranslationOn:r,translationDisableLanguages:u}=(0,d.RD)(),c=g(e);return Boolean(c&&r&&a&&!u.includes(a))},_=e=>v((t=>{var n;return null===(n=t[e])||void 0===n?void 0:n.description})),b=e=>{const t=(0,s.F3)((t=>t[e])),{textLanguage:n,textTranslatable:i}=(0,l.L$)(t),{selectedTranslationLanguage:o,isReady:r}=(0,d.RD)((e=>({selectedTranslationLanguage:e.selectedTranslationLanguage,isReady:e.isReady})),a.bN);return Boolean(n!==o&&i&&r)},k=e=>{const t=(0,s.F3)((t=>t[e])),{textLanguage:n}=(0,l.L$)(t),{isMasterTranslationOn:i,translationDisableLanguages:o}=(0,d.RD)(),a=b(e);return Boolean(a&&i&&n&&!o.includes(n))},w=e=>v((t=>{var n;return null===(n=t[e])||void 0===n?void 0:n.title})),P=e=>v((t=>{var n;return!!(null===(n=t[e])||void 0===n?void 0:n.showTranslation)}))},72263:(e,t,n)=>{n.d(t,{A:()=>i});var i=new(n(85135).A)},40650:(e,t,n)=>{n.d(t,{R:()=>a});var i=n(40099);const o=300;function a(e,t){const{onClick:n,onDoubleClick:a,onIntervalAction:r}=e(),l=(0,i.useRef)(0),s=(0,i.useRef)(!1);return(0,i.useCallback)((e=>{l.current&&window.clearTimeout(l.current),s.current?null==a||a(e):(null==r||r(),s.current=!0,window.setTimeout((()=>{s.current=!1}),o),l.current=window.setTimeout((()=>{null==n||n(e)}),o))}),t)}},30662:(e,t,n)=>{n.d(t,{tG:()=>s});var i,o,a=n(58632),r=n(38203),l=n(93608);!function(e){e.Share="livesdk_share",e.Report="livesdk_live_user_report",e.ReportSuccess="livesdk_report_success",e.ChatClose="livesdk_comment_close",e.HoverUserCardShow="livesdk_user_card_show",e.Follow="livesdk_follow",e.Take="livesdk_live_action",e.SetupPopShow="livesdk_live_tab_popup_show",e.AnchorEnterRoom="livesdk_anchor_enter_room",e.Show="livesdk_live_show",e.ClickEntrance="livesdk_rec_live_play",e.Unfollow="livesdk_unfollow"}(i||(i={})),function(e){e.LiveCover="live_cover",e.SuggestedOthersPhoto="suggested_others_photo",e.NextIconClick="next_icon_click",e.Others="others",e.VideoHeadBrowser="video_head_browser",e.Creator="creator",e.VideoHead="video_head",e.LiveHead="live_head",e.OthersPhoto="others_photo",e.ClickOneColumnUser="click_main_btn",e.TopLiveCell="top_live_cell",e.VideoLiveCell="video_live_cell",e.FollowingTop="top_window",e.FollowingPreview="live_cover_preview"}(o||(o={}));let s=class{constructor(){this.handleLiveEntranceShow=e=>{l.f.event("livesdk_live_show",e)},this.handleLiveEntranceClick=e=>{l.f.event("livesdk_rec_live_play",e)},this.handleLiveStreamEntranceClick=e=>{l.f.event("livesdk_live_action",Object.assign({live_type:"third_party"},e))}}};s=(0,a.__decorate)([(0,r._)()],s)},63438:(e,t,n)=>{n.d(t,{Lj:()=>o,QI:()=>a,T5:()=>i,cb:()=>r});const i={0:{forceMute:!1,defaultMute:!1},1:{forceMute:!1,defaultMute:!0},2:{forceMute:!1,defaultMute:!1},3:{forceMute:!1,defaultMute:!1},4:{forceMute:!1,defaultMute:!1},6:{forceMute:!1,defaultMute:!1},5:{forceMute:!1,defaultMute:!1},7:{forceMute:!1,defaultMute:!1},8:{forceMute:!1,defaultMute:!1},9:{forceMute:!1,defaultMute:!1}},o=.8,a=.05,r=5},67169:(e,t,n)=>{n.d(t,{CT:()=>I,TL:()=>E,Ux:()=>T,ah:()=>C,eM:()=>L,iJ:()=>w,jj:()=>P,rq:()=>S,tW:()=>M});var i=n(41271),o=n(73580),a=n(40099),r=n(48578),l=n(67353),s=n(58305),d=n(25616),u=n(50970),c=n(52333),p=n(88920),v=n(63438),h=n(11654),m=n(16469),y=n(11983),g=n(42983),f=n(87802),_=n(31733),b=n(47172),k=n(21367);function w({loadingThreshold:e=1e3,isCurrentVideo:t}){const[n,i]=(0,a.useState)(!1),o=(0,a.useRef)(0),r=(0,a.useCallback)((()=>{o.current&&window.clearTimeout(o.current),i(!1)}),[]),l=(0,a.useCallback)((()=>{e?(o.current&&window.clearTimeout(o.current),o.current=window.setTimeout((()=>{i(!0)}),e)):i(!0)}),[e]);return(0,a.useEffect)((()=>(t||(window.clearTimeout(o.current),i(!1)),()=>window.clearTimeout(o.current))),[t]),{loading:n,handleCanPlayWithLoading:r,handlePauseWithLoading:r,handlePlayingWithLoading:r,handleErrorWithLoading:r,handleWaitingWithLoading:l}}function P(){const[e,t]=(0,a.useState)(!0),n=(0,a.useCallback)((()=>{t(!1)}),[]),i=(0,a.useCallback)((()=>{t(!0)}),[]);return(0,a.useEffect)((()=>{const e=(0,s.Gz)(n,i);return()=>{null==e||e()}}),[i,n]),e}function C({playMode:e,itemMute:t=!1}){const n=(0,d.s)(),{mute:i,volume:o}=(0,g.yw)(),l=t||i,s=(0,f.S4)(),u=(0,p.W4)(),c=(0,a.useCallback)(((i,a="click",l,d)=>{if(t||d)return y.F.destroy(),y.F.open({content:n("music_detail_unavailable_1"),duration:3,widthType:"half"}),!1;if(r.p.handleSwitchSound(Object.assign(Object.assign({},l),{muted:i,playMode:e,enter_method:a})),r.p.handleVolumeChange({volume_to:o,click_mute:!0}),m.lA.setItem("muted",i),s.setMute(i),!i&&0===m.lA.getItem("volume")){let e=.6;"v2"===u?e=.7:"v3"===u?e=.75:"v4"===u?e=.5:"v5"===u&&(e=.4),m.lA.setItem("volume",e),s.setVolume(e)}return!0}),[s,e,u,o,n,t]);return{mute:l,volume:o,setMute:c}}function S(){const{mute:e,volume:t}=(0,g.yw)(),n=(0,f.S4)(),i=(0,a.useCallback)(((e,t)=>{m.lA.setItem("volume",e),n.setVolume(e),0===e?(m.lA.setItem("muted",!0),n.setMute(!0)):t&&(m.lA.setItem("muted",!1),n.setMute(!1))}),[n]);return{mute:e,volume:t,setVolume:i}}function T(e){var t,n;const{setMute:o,setVolume:r}=(0,f.S4)(),l=(0,p.W4)(),{pathname:s}=(0,b.useLocation)();let d=.6;"v2"===l?d=.7:"v3"===l?d=.75:"v4"===l?d=.5:"v5"===l&&(d=.4);let c=null!==(t=m.lA.getItem("muted"))&&void 0!==t?t:v.T5[e].defaultMute;d=null!==(n=m.lA.getItem("volume"))&&void 0!==n?n:d;const h="webapp_causal_inference_auto_mute_validation",{vgeo:y,wid:g,vid:k}=(0,p.u6)(h),{user:w}=(0,i.P)(u.L,{selector:e=>{var t;return{user:null===(t=e.appContext)||void 0===t?void 0:t.user}},dependencies:[]});(0,a.useEffect)((()=>{if(o(c),r(d),"v1"!==k&&void 0===m.lA.getItem("muted")&&void 0===m.lA.getItem("volume")){const e={isMuted:c,enterMethod:"app_load",modelName:"v2"===k?"webapp_causal_inference_auto_mute_rr1_s_model":"webapp_causal_inference_auto_mute_play_duration_s_model",pageName:s,vgeo:y,wid:g,vid:k,expId:h,segmentId:"segment_default",isSimulated:!1,simulatedResult:"v2"===k?0:1,setMute:o,isLogin:Boolean(w)};(0,_._0)(e)}}),[])}const x="video_playback_error";function M(){const e=(0,o.Nj)(h.V);return(0,a.useCallback)((t=>{var n,i,o;const a=null!==(i=null===(n=null==t?void 0:t.nativeEvent)||void 0===n?void 0:n.target)&&void 0!==i?i:null===(o=null==t?void 0:t.nativeEvent)||void 0===o?void 0:o.srcElement;if(a){const{error:{code:t=-1,message:n="Empty message"}={},networkState:i,readyState:o,src:r="",currentTime:l=0}=a;e.emitEvent(x,{code:t},{errorMessage:n,errorCode:t,readyState:o,networkState:i,isXgPlayer:"0"});const s={errorCode:t,errorMessage:n,src:r,currentTime:l,networkState:i,readyState:o};e.captureMessage(`Video playback error: ${JSON.stringify(s)}`,4===t?"info":"error")}}),[e])}function E(){const e=(0,o.Nj)(h.V);return(0,a.useCallback)((t=>{var n,i,o,a;if(t)try{const{error:r,readyState:s,networkState:d,currentTime:u=0,currentSrc:c="",codecType:p="h264"}=t,{code:v=-1,message:h="Empty message"}=null!=r?r:{};e.emitEvent(x,{code:v},{errorMessage:h,errorCode:String(v),readyState:String(s),networkState:String(d),hevcRobustness:null!==(n=l.p$.isHevcSupportRobustness)&&void 0!==n?n:"-100",hevcBase:null!==(i=String(l.p$.isSupportBase))&&void 0!==i?i:"-100",is_bytevc1:null!==(o=String(p.indexOf("h265")>-1?1:0))&&void 0!==o?o:"-100",cpu_core:null!==(a=String(null===navigator||void 0===navigator?void 0:navigator.hardwareConcurrency))&&void 0!==a?a:"0"});const m={errorCode:v,errorMessage:h,src:c,currentTime:u,networkState:d,readyState:s};e.captureMessage(`Video playback error: ${JSON.stringify(m)}`,4===v?"info":"error")}catch(e){}}),[e])}function I(e,t){const n=(0,i.P)(c.k);return(0,a.useMemo)((()=>e.map((e=>{var i,o,a,r,l,s,d,u,c,p,v,h;const m=null!==(i=e.id)&&void 0!==i?i:"",y=n[m],g=null!==(a=null===(o=null==y?void 0:y.video)||void 0===o?void 0:o.bitrateInfo)&&void 0!==a?a:[];return g.length>1?g.map((t=>{var n,i,o,a;return{id:null==e?void 0:e.id,url:null!==(i=null===(n=t.PlayAddr)||void 0===n?void 0:n.UrlList)&&void 0!==i?i:null===(o=null==y?void 0:y.video)||void 0===o?void 0:o.playAddr,definition:t.GearName,bitrate:t.Bitrate,duration:null===(a=null==y?void 0:y.video)||void 0===a?void 0:a.duration,codecType:t.CodecType,qualityType:t.QualityType}})):[{id:null==e?void 0:e.id,url:null===(r=null==y?void 0:y.video)||void 0===r?void 0:r.playAddr,definition:null!==(s=null===(l=g[0])||void 0===l?void 0:l.GearName)&&void 0!==s?s:t,bitrate:null===(d=g[0])||void 0===d?void 0:d.Bitrate,duration:null===(u=null==y?void 0:y.video)||void 0===u?void 0:u.duration,codecType:null!==(p=null===(c=g[0])||void 0===c?void 0:c.CodecType)&&void 0!==p?p:"h264",qualityType:null!==(h=null===(v=g[0])||void 0===v?void 0:v.QualityType)&&void 0!==h?h:"20"}]}))),[t,n,e])}const L=()=>{const e=(0,k.nr)(),t=(0,p.HL)();return(0,a.useCallback)((n=>{var i,o;const a=null!==(o=null===(i=e.getStaticPlayerState())||void 0===i?void 0:i.showUnmuteTooltip)&&void 0!==o&&o;if(!n||n<3||a||!t)return;const r=m.lA.getItem("unmuteTooltipTimestamp");r&&Date.now()-r<6048e5||(e.updateShowUnmuteTooltip(!0),setTimeout((()=>{e.updateShowUnmuteTooltip(!1),m.lA.setItem("unmuteTooltipTimestamp",Date.now())}),5e3))}),[])}},53438:(e,t,n)=>{n.d(t,{Hs:()=>m,MA:()=>v,Zd:()=>y,mx:()=>p,n5:()=>g,yy:()=>h});var i=n(40099),o=n(97071),a=n(68252),r=n(32125),l=n(79395),s=n(49057),d=n(84908),u=n(60072),c=n(99129);const p=e=>void 0!==(null==e?void 0:e.imagePost),v=e=>{var t,n;const i=p(e);return{aweme_type:i?150:0,pic_cnt:i?null===(n=null===(t=null==e?void 0:e.imagePost)||void 0===t?void 0:t.images)||void 0===n?void 0:n.length:void 0}},h=(e,t)=>{var n,o;const s=(0,l.k)(e),p=(0,d.nW)((e=>{var t;return e.users[null!==(t=null==s?void 0:s.author)&&void 0!==t?t:""]}),r.bN),{width:v=0,height:h=0,duration:m=0,ratio:y=""}=null!==(n=null==s?void 0:s.video)&&void 0!==n?n:{},g=(0,u.F3)(),f=(0,i.useMemo)((()=>Object.keys(g)),[g]),_=(0,c.bE)(f,t),{createTime:b=0,authorStats:{followerCount:k=0}={},stats:{diggCount:w=0,playCount:P=0,shareCount:C=0,commentCount:S=0,collectCount:T=0}={}}=null!=s?s:{};return{video_freshness:(0,a.QR)(Number(b)),video_duration:m,video_like_history:w,video_vv_history:P,video_share_history:C,video_comment_history:S,video_favorite_history:Number(T),video_resolution:(0,a.sG)(y),video_is_portrait:h>v?1:0,video_100k_vv:P>=1e5?1:0,video_creator_bluev:null!==(o=null==p?void 0:p.verified)&&void 0!==o&&o?1:0,video_creator_1k_follower:k>=1e3?1:0,video_creator_10k_follower:k>=1e4?1:0,video_creator_100k_follower:k>=1e5?1:0,video_next_info:JSON.stringify(_)}},m=e=>{var t;const n=(0,l.k)(e),{width:i,height:o,duration:a}=null!==(t=null==n?void 0:n.video)&&void 0!==t?t:{};return{video_width:i,video_height:o,video_duration:a}},y=({id:e,play_mode:t="one_column"})=>{var n;const{wid:i}=null!==(n=(0,s.W)((()=>["wid"]),[]))&&void 0!==n?n:{},a=(0,l.k)(e),r=null==a?void 0:a.ad_info;if(r){const e=(0,o.n5)({ad_info:r,play_mode:t});return e.ad_extra_data={user_session:i},e}},g=(e,t)=>{var n;if(t)return null!==(n=null==e?void 0:e.isPinnedItem)&&void 0!==n&&n}},42983:(e,t,n)=>{n.d(t,{O2:()=>a,yw:()=>o});var i=n(87802);const o=()=>({mute:(0,i.i3)(),volume:(0,i.R4)()}),a=e=>{const{mute:t,volume:n,playing:o}=(0,i.Jz)((t=>({mute:e||t.mute,volume:t.volume,playing:t.playing})));return{mute:t,volume:n,playing:o}}},64116:(e,t,n)=>{n.d(t,{Az:()=>o,Dr:()=>i,H4:()=>r});const i=e=>10229===e||10230===e,o=e=>{if(isNaN(e))return"00:00";const t=Math.floor(e/3600),n=(t<10?"0":"")+t.toString(),i=`0${Math.floor(e/60%60)}`.slice(-2),o=`0${Math.floor(e%60)}`.slice(-2);return 0===t?`${i}:${o}`:`${n}:${i}:${o}`},a=new Map([[2,"adapt_lowest_1080p"],[3,"adapt_lower_1080p"],[4,"adapt_1080p"],[7,"adapt_lowest_1440p"],[10,"normal_720p"],[11,"low_720p"],[12,"adapt_high_720p"],[13,"adapt_higher_720p"],[14,"adapt_lower_720p"],[15,"adapt_lowest_720p"],[16,"higher_720p"],[17,"highest_720p"],[18,"adapt_720p"],[19,"adapt_low_720p"],[191,"lower_720p"],[20,"normal_540p"],[21,"adapt_lower_540p"],[22,"adapt_high_540p"],[23,"adapt_higher_540p"],[24,"lower_540p"],[25,"lowest_540p"],[26,"higher_540p"],[27,"highest_540p"],[28,"adapt_540p"],[29,"adapt_lowest_540p"],[291,"adapt_low_540p"],[30,"normal_480p"],[31,"low_480p"],[32,"high_480p"],[33,"medium_480p"],[34,"lower_480p"],[35,"lowest_480p"],[36,"higher_480p"],[37,"highest_480p"],[38,"adapt_480p"],[39,"adapt_lower_480p"],[391,"adapt_high_480p"],[40,"normal_360p"],[41,"low_360p"],[42,"high_360p"],[43,"medium_360p"],[44,"lower_360p"],[45,"lowest_360p"],[46,"higher_360p"],[47,"highest_360p"],[48,"adapt_360p"],[49,"adapt_lowest_360p"],[50,"adapt_high_360p"]]),r=(e,t)=>{if(!e)return t;if(String(e).indexOf("xgpreload_config")>-1)return e;if(!a.has(Number(e))){const t=String(e).match(/^([a-zA-Z]*)+_([0-9]+)_0$/i);return t?`${t[1]}_${t[2]}p`:`unknown_${e}`}return a.get(Number(e))}},13685:(e,t,n)=>{n.d(t,{i:()=>s});var i=n(58632),o=n(24643),a=n(25616),r=n(75870),l=n(32680);const s=function(e){var{className:t,needAnimation:n=!1,isShowLive:s=!0,size:d=32,isShowLiveTag:u=!0,isTagShowingOnTop:c=!1,e2eTag:p,isBiggerBadge:v}=e,h=(0,i.__rest)(e,["className","needAnimation","isShowLive","size","isShowLiveTag","isTagShowingOnTop","e2eTag","isBiggerBadge"]);const m=(0,a.s)(),y=s&&n,g=s?d-6:d,f=y?d-4:d;return(0,o.jsxs)(l.Le,{isAnimating:y,className:t,"data-e2e":p,style:{width:d,height:d},children:[s&&(0,o.jsx)(r.N,{size:f}),(0,o.jsx)(l.dl,Object.assign({isAnimating:y,enable:!0,size:g},h)),s&&u&&(0,o.jsx)(l.Cx,{isOnTop:c,isBiggerBadge:v,children:m("LIVE")})]})}},75870:(e,t,n)=>{n.d(t,{N:()=>a});var i=n(24643),o=n(32680);const a=function({size:e=48}){return(0,i.jsxs)(o.Vb,{width:e,height:e,viewBox:`0 0 ${e} ${e}`,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("circle",{cx:e/2,cy:e/2,r:e/2-.75,stroke:"url(#paint0_linear)",strokeWidth:"1.5"}),(0,i.jsx)("defs",{children:(0,i.jsxs)("linearGradient",{id:"paint0_linear",x1:-20.9902*e/48,y1:24*e/48,x2:27.0098*e/48,y2:65.9805*e/48,gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#FF1764"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#ED3495"})]})})]})}},32680:(e,t,n)=>{n.d(t,{Cx:()=>h,Le:()=>p,Vb:()=>c,dl:()=>v});var i,o=n(75431),a=n(62186),r=n(72153),l=n(92846);!function(e){e[e.UserFeed=0]="UserFeed",e[e.Feed=1]="Feed",e[e.Browser=2]="Browser",e[e.List=3]="List",e[e.UserPage=4]="UserPage",e[e.Search=5]="Search",e[e.RecommendList=6]="RecommendList"}(i||(i={}));const s="1800ms",d=(0,o.i7)({"0%":{transform:"scale(.95)"},"50%":{transform:"scale(.9)"},"100%":{transform:"scale(.95)"}}),u=(0,o.i7)({"0%":{transform:"scale(1)"},"40%":{transform:"scale(1.15)"},"45%":{transform:"scale(1.16)"},"95%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),c=(0,a.default)("svg",{target:"e1vl87hj0"})({position:"absolute"},"label:SvgRoundCircle;"),p=(0,a.default)("div",{target:"e1vl87hj1"})({position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},(({isAnimating:e})=>e?{":after":{content:'""',position:"absolute",left:1,top:1,right:1,bottom:1,borderRadius:"50%",border:"1px solid rgba(255, 119, 146, .5)",animation:`${u} ${s} ease-out infinite`,boxShadow:"0 -0.5px 0.5px 0.5px rgba(255,119,146,.5)"}}:null),"label:DivContainer;"),v=(0,a.default)(l.e,{target:"e1vl87hj2"})((({enable:e,theme:{colors:t},isAnimating:n})=>[{borderColor:t.LineSecondary,borderWidth:"0.5px",cursor:e?"pointer":"unset",backgroundColor:"rgba(136, 136, 136, 0.5)"},n?{animation:`${d} ${s} ease-out infinite`,animationDelay:".9s"}:null]),"label:StyledAvatar;"),h=(0,a.default)("span",{target:"e1vl87hj3"})((({theme:e,isOnTop:t=!1,isBiggerBadge:n=!1})=>[(0,r.zy)({theme:e,typography:"P4",fontWeight:"bold",color:"ConstTextInverse"}),{position:"absolute",background:"linear-gradient(131.17deg, #FF1764 0%, #ED3495 94.15%)",top:t?"-6px":"unset",left:"50%",transform:"translateX(-50%)",wordBreak:"keep-all",zIndex:1},n?{height:"26px",lineHeight:"21px",padding:"1px 8px",bottom:t?"unset":"-8px",border:`2px solid ${e.colors.BGPrimary}`,borderRadius:"5px"}:{height:"15px",lineHeight:"16px",padding:"0 4px",bottom:t?"unset":"-2px",borderRadius:"2px"}]),"label:SpanLiveBadge;")},99282:(e,t,n)=>{n.d(t,{vN:()=>y,WH:()=>_,ck:()=>f,MQ:()=>g});var i=n(60484),o=n(58305),a=n(71281),r=n(49057),l=n(66458),s=n(92502),d=n(11072),u=n(60072),c=n(45347),p=n(40099),v=n(20362),h=n(57431),m=n(32125);const y=()=>{var e;const{abTestVersion:t}=(0,i.L$)((0,r.W)((()=>["abTestVersion"]),[])),n=null!==(e=(0,a.qt)(t,"video_closed_caption"))&&void 0!==e?e:"v0",l="v0"!==n,s="v1"===n||"v2"===n;return"v0"===n&&(0,o.sc)("caption"),{enabledClosedCaption:l,isEntranceInMoreMenu:s}},g=()=>{var e;const{abTestVersion:t}=(0,i.L$)((0,r.W)((()=>["abTestVersion"]),[]));return"v1"===(null!==(e=(0,a.qt)(t,"enable_post_translation"))&&void 0!==e?e:"v0")},f=(e,t)=>{var n;const{id:o="",video:a}=(0,i.L$)(e),{claInfo:r}=(0,i.L$)(a),{enabledClosedCaption:u}=y(),v=g(),h=(0,l.K)(),{selectedTranslationLanguage:m,isReady:f}=(0,s.RD)((e=>({selectedTranslationLanguage:e.selectedTranslationLanguage,isReady:e.isReady}))),_=(0,d.xr)(),b=(0,d.sX)(o),k=(0,d.xL)(o),w=(0,d.Vk)(o),P=(0,d.xJ)(o),C=null===(n=null==r?void 0:r.originalLanguageInfo)||void 0===n?void 0:n.languageCode,S=b?m:C,T=(0,p.useMemo)((()=>{if(!r||!r.captionInfos)return[];const e=r.captionInfos.map((e=>{var t,n,i,o;return{id:null!==(t=e.languageID)&&void 0!==t?t:"",language:null!==(n=e.languageCode)&&void 0!==n?n:"",url:null!==(i=e.urlList)&&void 0!==i?i:[],urlExpire:null!==(o=e.expire)&&void 0!==o?o:""}}));return P&&e.push(P),e}),[r,P]),x=(0,p.useMemo)((()=>T.filter((e=>e.language===S))),[T,S]),M=(0,p.useMemo)((()=>{var e,t;return null===(t=null===(e=null==r?void 0:r.captionInfos)||void 0===e?void 0:e.filter((e=>e.isOriginalCaption))[0])||void 0===t?void 0:t.claSubtitleID}),[r]),E=(0,p.useMemo)((()=>0===T.length?null:v&&x.length>0?x[0]:T[0]),[T,v,x]),I=(0,p.useCallback)((e=>{const{type:n,texts:i=[],error:a}=e;if("update"===n)if(i.length>0){const{text:e}=i[0];h.setCurrentCaption(e.join(""))}else h.setCurrentCaption("");else a&&c.lN.handleCaptionError({error_msg:a.message,group_id:o,play_mode:t,caption_url:null==E?void 0:E.url})}),[h,o,t,E]);return(0,p.useEffect)((()=>{v&&k&&w&&0===x.length&&M&&f&&_.getSubtitleTranslation({target_language:m,item_id:o,subtitle_id:M})}),[v,k,w,x,M,o,_,m,f]),u||v?{subtitleList:T,curSubtitle:E,handleSubtitleCallback:I}:{}},_=e=>{const t=(0,s.lr)(e),n=(0,u.F3)((t=>t[e])),{language:i}=(0,h.x)(),{captionOptions:o,captionLanguage:a}=(0,v.g)(n),{translationDisableLanguages:r,selectedTranslationLanguage:l,isMasterTranslationOn:c,isReady:p}=(0,s.RD)((e=>({translationDisableLanguages:e.translationDisableLanguages,selectedTranslationLanguage:e.selectedTranslationLanguage,isMasterTranslationOn:e.isMasterTranslationOn,isReady:e.isReady})),m.bN),y=(0,d.sX)(e),g=(0,d.M)(e);return{caption_mode:t?"on":"off",caption_options:o,caption_language:a,always_translate_post_mode:c?"on":"off",do_not_translate_mode:0===r.length?"no_selection":"has_selection",translate_into_mode:l===i?"default_language":"user_selected_language",see_original_show:y&&g&&p?"yes":"no",see_translation_show:!y&&g&&p?"yes":"no"}}},20362:(e,t,n)=>{n.d(t,{g:()=>o});var i=n(60484);const o=e=>{var t,n,o,a,r;const{video:l}=(0,i.L$)(e),{claInfo:s}=(0,i.L$)(l);let d="show captions";return!(null==s?void 0:s.captionInfos)&&(d="show captions (unavailable)"),(null===(n=null===(t=null==s?void 0:s.captionInfos)||void 0===t?void 0:t[0])||void 0===n?void 0:n.isAutoGen)&&(d="show captions auto generate"),{captionOptions:d,captionLanguage:null!==(r=null===(a=null===(o=null==s?void 0:s.captionInfos)||void 0===o?void 0:o[0])||void 0===a?void 0:a.language)&&void 0!==r?r:""}}},60492:(e,t,n)=>{n.d(t,{m:()=>m});var i=n(40099),o=n(18499),a=n(53764),r=n(24643),l=n(75431),s=n(62186),d=n(38017);const u=(0,s.default)("div",{target:"exhfy940"})({pointerEvents:"none",position:"fixed",zIndex:1e3},"label:DivDoubleTapContainer;"),c=(0,l.i7)({"0%":{opacity:"1",transform:"scale(1.18)"},"14%":{opacity:"1",transform:"scale(.9)"},"21%":{opacity:"1",transform:"scale(1)"},"58%":{opacity:"1",transform:"scale(1)"},"100%":{opacity:"0",transform:"scale(1.93)"}}),p=(0,s.default)(d.A,{target:"exhfy941"})({animation:`${c} 1400ms`,width:"120px",height:"120px"},"label:StyledLikeIcon;");var v=n(67518);const h=function({x:e,y:t,styledCache:n}){const i=Math.floor(61*Math.random()-30),o=(0,r.jsx)(u,{style:{left:e-60,top:t-60,transform:`rotate(${i}deg)`},children:(0,r.jsx)(p,{})});return n?(0,r.jsxs)(v.C,{value:n,children:[" ",o," "]}):o};class m{constructor(e,t,n=document,i=void 0){this.x=e,this.y=t,this.documentObj=n,this.styledCache=i,this.el=this.documentObj.createElement("div")}emit(){var e;try{(null!==(e=this.documentObj[null===a.e||void 0===a.e?void 0:a.e.fullscreenElement])&&void 0!==e?e:this.documentObj.body).appendChild(this.el),(0,o.render)((0,i.createElement)(h,{x:this.x,y:this.y,styledCache:this.styledCache}),this.el),window.setTimeout((()=>{this.destroy()}),1400)}catch(e){console.error(e)}}destroy(){var e;try{(0,o.unmountComponentAtNode)(this.el),(null!==(e=this.documentObj[null===a.e||void 0===a.e?void 0:a.e.fullscreenElement])&&void 0!==e?e:this.documentObj.body).removeChild(this.el)}catch(e){console.error(e)}}}},1096:(e,t,n)=>{n.d(t,{H:()=>s});var i=n(24643),o=n(57432),a=n.n(o),r=n(40099),l=n(61853);const s=({width:e=160,height:t=160,loop:n=!1,onComplete:o=a(),autoplay:s=!0,animationData:d,customStyle:u={}})=>{const c=(0,r.useMemo)((()=>({loop:n,autoplay:s,animationData:d,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}})),[d,s,n]),p=(0,r.useMemo)((()=>[{eventName:"complete",callback:o}]),[o]);return(0,i.jsx)(l.J,{width:e,height:t,options:c,eventListeners:p,customStyle:u})}},61853:(e,t,n)=>{n.d(t,{J:()=>d});var i=n(24643),o=n(17715),a=n.n(o),r=n(40099);function l(e){let t;return t="number"==typeof e?`${e}px`:e||"100%",t}const s=(0,n(62186).default)("div",{target:"e1b0r8240"})((({width:e,height:t})=>({width:l(e),height:l(t),overflow:"hidden",margin:"0 auto",outline:"none"})),"label:DivContainer;"),d=(0,r.memo)((function(e){const{width:t,height:n,className:o,options:l,eventListeners:d=[],lottieRef:u,containerRef:c,customStyle:p={}}=e,v=(0,r.useRef)(null),h=(0,r.useRef)(null);return(0,r.useEffect)((()=>(h.current=a().loadAnimation(Object.assign({container:v.current,renderer:"svg"},l)),u&&(u.current=h.current),()=>{var e;null===(e=h.current)||void 0===e||e.destroy(),h.current=null,u&&(u.current=null)})),[l]),(0,r.useEffect)((()=>(d.forEach((({eventName:e,callback:t})=>{var n;null===(n=h.current)||void 0===n||n.addEventListener(e,t)})),()=>{d.forEach((({eventName:e,callback:t})=>{var n;null===(n=h.current)||void 0===n||n.removeEventListener(e,t)}))})),[d]),(0,i.jsx)(s,{width:t,height:n,className:o,style:p,ref:e=>{v.current=e,c&&(c.current=e)}})}))},73551:(e,t,n)=>{n.d(t,{G:()=>i});const i=e=>{if(!e)return 0;const t=e.split("?")[0];return t.endsWith(".avif")?2:t.endsWith(".webp")?1:0}},32545:(e,t,n)=>{n.d(t,{x:()=>f});var i=n(58632),o=n(24643),a=n(40099),r=n(62186),l=n(82231),s=n(80677),d=n(49057),u=n(48615),c=n(82290),p=n(73551);const v=["240","480","720","960"],h=r.default.div`
  width: 100%;
  height: 100%;
  position: relative;
  & img {
    object-fit: ${e=>{var t;return null!==(t=e.objectFit)&&void 0!==t?t:"cover"}};
  }
`,m=r.default.img`
  width: 100%;
  height: 100%;
  object-fit: ${e=>{var t;return null!==(t=e.objectFit)&&void 0!==t?t:"cover"}};
`,y=(()=>{let e=0;return()=>e++})(),g=(0,a.forwardRef)((function(e,t){var n,r,{className:c,objectFit:m,style:g,video:f,imagexSsrMode:_=!0,onLoad:b}=e,k=(0,i.__rest)(e,["className","objectFit","style","video","imagexSsrMode","onLoad"]);const{zoomCover:w,cover:P="",quality:C,loading:S="lazy"}=f,T=(0,p.G)(null==w?void 0:w[240]),{userAgent:x}=null!==(n=(0,d.W)((()=>["userAgent"]),[]))&&void 0!==n?n:{},{isIOS:M,videoCoverSettings:E}=null!==(r=(0,u.U)((()=>["isIOS","videoCoverSettings"]),[]))&&void 0!==r?r:{},I=/^((?!chrome|android).)*safari/i.test(null!=x?x:""),L="undefined"==typeof window,A=_&&L&&E;A&&E._ssrCount++;const R=L?0:y(),[j,O,V]=(0,l.Dh)("video-cover-viewer-ssr-count"),B=!!_&&(L||R<Number(j)),D=(0,a.useCallback)((e=>{e.target.currentSrc.startsWith("data:image")||null==b||b(e)}),[b]);return(0,o.jsxs)(h,{className:c,style:g,objectFit:m,ref:t,children:[A&&(0,o.jsx)(V,{data:E._ssrCount}),(0,o.jsx)(s.j,Object.assign({ssr:B,ua:x,src:P,formats:2===T?["avif"]:1===T?["webp"]:[],imageSizes:v.map((e=>Number(e))),layout:"fill",loader:e=>{if("image"===e.format&&0!==T)return P;let t;return t=C?null==w?void 0:w[C]:null==w?void 0:w[e.width||"720"],t||(t=P,t.startsWith("http://")&&(t=t.replace("http://","https://"))),t},loading:I||M?"eager":S,error:(0,o.jsx)("div",{}),onLoad:D},k))]})})),f=(0,a.memo)((0,a.forwardRef)((function(e,t){const{useDynamic:n,video:r}=e,l=(0,i.__rest)(e,["useDynamic","video"]),{dynamicCover:s,loading:d}=r,[u,v]=(0,a.useState)(!!s);return(0,a.useEffect)((()=>{if(n&&1===(0,p.G)(s)){const{supportWebp:e}=(0,c.PD)();v(e)}}),[]),n&&u?(0,o.jsx)(m,Object.assign({loading:d,src:s,ref:t},l)):(0,o.jsx)(g,Object.assign({},e,{ref:t}))})),((e,t)=>{var n,i;return e.video.cover===t.video.cover&&e.video.quality===t.video.quality&&(null===(n=e.video)||void 0===n?void 0:n.loading)===(null===(i=t.video)||void 0===i?void 0:i.loading)&&e.objectFit===t.objectFit}))},62047:(e,t,n)=>{n.d(t,{S:()=>i,a:()=>o});const i=3,o=-3},51664:(e,t,n)=>{n.d(t,{AL:()=>v,Fu:()=>p,r$:()=>c});var i=n(58632),o=n(41271),a=n(73580),r=n(40099),l=n(93608),s=n(72688),d=n(30662),u=n(50970);function c(e){const t=(0,o.P)(u.L,{dependencies:[],selector:e=>{var t;return null===(t=e.appContext)||void 0===t?void 0:t.user}});return{isShowLive:(0,r.useMemo)((()=>Boolean((null==e?void 0:e.roomId)&&"0"!==(null==e?void 0:e.roomId)&&(null==t?void 0:t.uid)!==e.id)),[null==t?void 0:t.uid,null==e?void 0:e.id,null==e?void 0:e.roomId]),src:null==e?void 0:e.avatarThumb,uniqueId:null==e?void 0:e.uniqueId,pureLivePath:e?(0,s.G2o)({uniqueId:null==e?void 0:e.uniqueId,secUid:null==e?void 0:e.secUid}):""}}function p({reportTrigger:e,user:t,enterMethod:n,autoReport:i,reportValidator:o,once:s,liveExtraParams:u}){const c=(0,a.Nj)(d.tG),[p,h]=(0,r.useState)(!1),m=(0,r.useMemo)((()=>{var e,i;return Object.assign({anchor_id:null!==(e=null==t?void 0:t.id)&&void 0!==e?e:"",follow_status:null!==(i=null==t?void 0:t.relation)&&void 0!==i?i:-1,room_id:null==t?void 0:t.roomId,enter_from_merge:l.f.commonParams.page_name,enter_method:n,action_type:"click"},u)}),[n,u,null==t?void 0:t.id,null==t?void 0:t.relation,null==t?void 0:t.roomId]),y=(0,r.useCallback)((()=>{p&&s||(c.handleLiveEntranceShow(m),h(!0))}),[p,c,s,m]);return(0,r.useEffect)((()=>{i&&e&&o()&&y()}),[e]),{handleExposure:y,teaParams:v({user:t,enterMethod:n}),reportParams:m}}function v(e){var{user:t,enterMethod:n}=e,o=(0,i.__rest)(e,["user","enterMethod"]);return(0,r.useMemo)((()=>{var e,i,a;return Object.assign({anchor_id:null!==(e=null==t?void 0:t.id)&&void 0!==e?e:"",follow_status:null!==(i=null==t?void 0:t.relation)&&void 0!==i?i:-1,room_id:null==t?void 0:t.roomId,enter_from_merge:l.f.commonParams.page_name,enter_from:l.f.commonParams.page_name,action_type:"click",enter_method:n,to_user_id:null!==(a=null==t?void 0:t.id)&&void 0!==a?a:""},o)}),[t,n,o])}},80131:(e,t,n)=>{n.d(t,{r:()=>P,M:()=>w});var i=n(24643),o=n(41271),a=n(40099),r=n(25616),l=n(62047),s=n(57432),d=n.n(s);const u=JSON.parse('{"v":"5.9.6","fr":60,"ip":0,"op":35,"w":40,"h":20,"nm":"Lottie_ic_forward","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"“ic_forward","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":4,"s":[90],"e":[90]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":8,"s":[90],"e":[50]},{"t":19}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.2,"y":1},"o":{"x":0.4,"y":0},"t":0,"s":[25,10,0],"e":[32,10,0],"to":[1.167,0,0],"ti":[-1.167,0,0]},{"t":14}],"ix":2,"l":2},"a":{"a":0,"k":[4,7,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.107,0],[0.081,0.081],[0,0],[-0.163,0.162],[0,0],[0,0],[-0.163,0.163],[0,0],[-0.107,0],[-0.082,-0.082],[0,0],[0.163,-0.163],[0,0]],"o":[[-0.107,0],[0,0],[-0.163,-0.162],[0,0],[0,0],[-0.163,-0.163],[0,0],[0.081,-0.082],[0.107,0],[0,0],[0.163,0.163],[0,0],[-0.082,0.081]],"v":[[-2.83,6.667],[-3.125,6.545],[-3.714,5.955],[-3.714,5.366],[1.651,0],[-3.714,-5.366],[-3.714,-5.955],[-3.125,-6.544],[-2.83,-6.667],[-2.536,-6.544],[3.714,-0.294],[3.714,0.295],[-2.536,6.545]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.999998743394,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[3.836,7.333],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":35,"st":0,"ct":1,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"“ic_forward”轮廓 3","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[1]},"o":{"x":[0.436],"y":[0]},"t":4,"s":[50],"e":[50]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":14,"s":[50],"e":[90]},{"t":25}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.2,"y":1},"o":{"x":0.4,"y":0},"t":6,"s":[18,10,0],"e":[25,10,0],"to":[1.167,0,0],"ti":[-1.167,0,0]},{"t":20}],"ix":2,"l":2},"a":{"a":0,"k":[4,7,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.107,0],[0.081,0.081],[0,0],[-0.163,0.162],[0,0],[0,0],[-0.163,0.163],[0,0],[-0.107,0],[-0.082,-0.082],[0,0],[0.163,-0.163],[0,0]],"o":[[-0.107,0],[0,0],[-0.163,-0.162],[0,0],[0,0],[-0.163,-0.163],[0,0],[0.081,-0.082],[0.107,0],[0,0],[0.163,0.163],[0,0],[-0.082,0.081]],"v":[[-2.83,6.667],[-3.125,6.545],[-3.714,5.955],[-3.714,5.366],[1.651,0],[-3.714,-5.366],[-3.714,-5.955],[-3.125,-6.544],[-2.83,-6.667],[-2.536,-6.544],[3.714,-0.294],[3.714,0.295],[-2.536,6.545]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.999998743394,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[3.836,7.333],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":35,"st":0,"ct":1,"bm":0}],"markers":[]}');var c=n(1096);const p=({width:e=40,height:t=20,loop:n=!0,onComplete:o=d(),autoplay:a=!0})=>(0,i.jsx)(c.H,{width:e,height:t,onComplete:o,autoplay:a,loop:n,animationData:u});var v=n(60445),h=n(75431),m=n(62186),y=n(72153);const g=(0,h.i7)({"0%":{opacity:0},"5%":{opacity:1},"100%":{opacity:1}}),f=(0,m.default)("div",{target:"e1jh5nxw0"})({position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:"144px",height:"144px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:5},"label:DivAnimationIconWrapper;"),_=(0,m.default)(f,{target:"e1jh5nxw1"})((({theme:{colors:e},isBack:t})=>({width:"300px",top:"unset",bottom:"81px",transform:"translate(-50%, 0)",height:"40px",padding:"8px 16px",paddingInlineEnd:t?"16px":"8px",paddingInlineStart:t?"8px":"16px",display:"inline-flex",flexDirection:t?"row-reverse":"row",borderRadius:"8px",background:e.ConstBGInverse2,animation:`${g} 2000ms linear`})),"label:StyledAnimationWrapper;"),b=(0,m.default)("span",{target:"e1jh5nxw2"})((({theme:e})=>(0,y.zy)({theme:e,typography:"P3",fontFamily:"TikTokFont",fontWeight:"semiBold",color:"ConstTextInverse2"})),"label:SpanForwardText;"),k=(0,m.default)("div",{target:"e1jh5nxw3"})((({isBack:e=!1,theme:{direction:t}})=>({width:"40px",height:"20px",display:"flex",justifyContent:"center",alignItems:"center",transform:`rotateZ(${e?"rtl"===t?0:180:"rtl"===t?180:0}deg)`,marginInlineStart:e?"unset":"-8px",marginInlineEnd:e?"-8px":"unset"})),"label:DivSeekAnimationWrapper;");function w(e){const t=(0,r.s)(),n="backward"===e;return(0,a.useMemo)((()=>"none"!==e?(0,i.jsxs)(_,{isBack:n,children:[(0,i.jsx)(b,{children:t("forward"===e?"pc_web_skip_forward_5_sec":"pc_web_skip_backward_5_sec",{number:l.S})}),(0,i.jsx)(k,{isBack:n,children:(0,i.jsx)(p,{loop:!0})})]}):null),[n,e,t])}const P=()=>{const{seekType:e}=(0,o.P)(v.aL,{selector:e=>({seekType:e.seekType}),dependencies:[]});return{seekingTips:w(e)}}},60445:(e,t,n)=>{n.d(t,{aL:()=>_});var i,o,a=n(58632),r=n(64162),l=n(4126),s=n(93995),d=n(23999),u=n(26324),c=n(95719),p=n(24451),v=n(62564),h=n(8536),m=n(15343),y=n(55322),g=n(79983),f=n(27016);!function(e){e.None="none",e.Mute="mute",e.Unmute="unmute",e.Play="play",e.Pause="pause"}(i||(i={})),function(e){e.Forward="forward",e.BackWard="backward",e.None="none"}(o||(o={}));let _=class extends r.E{constructor(e,t,n){super(),this.itemList=e,this.videoPlayerJotai=t,this.videoExperience=n,this.defaultState={currentIndex:{},disabled:!1,itemListKey:"foryou",onboardingShowing:!1,loginCTAShowing:!1,leavingModalShowing:!1,playbackRate:1,dimmer:!1,showBrowseMode:!1,needLeavingModal:!1,iconType:"none",seekType:"none"}}setItemListKey(e,t){e.itemListKey=t}setCurrentIndex(e,t){const{key:n,value:i}=t;e.currentIndex=Object.assign(Object.assign({},e.currentIndex),{[n]:i})}setDisabled(e,t){e.disabled=t}setNeedLeavingModal(e,t){e.needLeavingModal=t}setOnboardingShowing(e,t){e.onboardingShowing=t}setLoginCTAShowing(e,t){e.loginCTAShowing=t}setLeavingModalShowing(e,t){e.leavingModalShowing=t}setPlaybackRate(e,t){e.playbackRate=t}setDimmer(e,t){e.dimmer=t}setShowBrowseMode(e,t){e.showBrowseMode=t}setIconType(e,t){e.iconType=t}setSeekType(e,t){e.seekType=t}handleNextVideo(e){return e.pipe((0,c.M)((()=>{this.videoExperience.reportVideoInteractStart({startTime:Date.now(),situation:"swiper_slide_next"})})),(0,p.E)(this.state$,this.itemList.state$),(0,v.T)((([{playMode:e},{itemListKey:t,currentIndex:n},i])=>{var o,a,r,l;const s=null!==(a=null===(o=i[null!=t?t:""])||void 0===o?void 0:o.browserList)&&void 0!==a?a:[],d=Math.min((null!==(r=n[t])&&void 0!==r?r:0)+1,s.length-1);return{newIndex:d,isIndexInvalid:!(null==s?void 0:s.length)||d<0,newId:null!==(l=s[d])&&void 0!==l?l:"",playMode:e,itemListKey:t}})),(0,c.M)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to next video for some reasons")})),(0,h.Z)((e=>(0,d.of)(...this.updateVideoIndex(e)))),(0,y.n)({}))}handlePrevVideo(e){return e.pipe((0,c.M)((()=>{this.videoExperience.reportVideoInteractStart({startTime:Date.now(),situation:"swiper_slide_prev"})})),(0,p.E)(this.state$,this.itemList.state$),(0,v.T)((([{playMode:e},{itemListKey:t,currentIndex:n},i])=>{var o,a,r,l;const s=null!==(a=null===(o=i[null!=t?t:""])||void 0===o?void 0:o.browserList)&&void 0!==a?a:[],d=Math.max((null!==(r=n[t])&&void 0!==r?r:0)-1,0);return{newIndex:d,isIndexInvalid:!(null==s?void 0:s.length)||d>s.length-1,newId:null!==(l=s[d])&&void 0!==l?l:"",playMode:e,itemListKey:t}})),(0,c.M)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to prev video for some reasons")})),(0,h.Z)((e=>(0,d.of)(...this.updateVideoIndex(e)))),(0,y.n)({}))}updateVideoIndex({newIndex:e,isIndexInvalid:t,newId:n,playMode:i,itemListKey:o}){return t?[this.noop()]:[this.videoPlayerJotai.getActions().updateVideo({currentVideo:{index:e,id:n,mode:i},playProgress:0}),this.getActions().setCurrentIndex({key:o,value:e})]}};(0,a.__decorate)([(0,l.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,String]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"setItemListKey",null),(0,a.__decorate)([(0,l.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"setCurrentIndex",null),(0,a.__decorate)([(0,l.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"setDisabled",null),(0,a.__decorate)([(0,l.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"setNeedLeavingModal",null),(0,a.__decorate)([(0,l.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"setOnboardingShowing",null),(0,a.__decorate)([(0,l.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"setLoginCTAShowing",null),(0,a.__decorate)([(0,l.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"setLeavingModalShowing",null),(0,a.__decorate)([(0,l.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Number]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"setPlaybackRate",null),(0,a.__decorate)([(0,l.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"setDimmer",null),(0,a.__decorate)([(0,l.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"setShowBrowseMode",null),(0,a.__decorate)([(0,l.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,String]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"setIconType",null),(0,a.__decorate)([(0,l.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,String]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"setSeekType",null),(0,a.__decorate)([(0,l.Mj)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[u.c]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"handleNextVideo",null),(0,a.__decorate)([(0,l.Mj)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[u.c]),(0,a.__metadata)("design:returntype",void 0)],_.prototype,"handlePrevVideo",null),_=(0,a.__decorate)([(0,s.n)("SwiperModeModule"),(0,a.__metadata)("design:paramtypes",[g.O,f.Q,m.AU])],_)},42357:(e,t,n)=>{n.d(t,{e:()=>a});var i=n(57432),o=n.n(i);const a=(0,n(40099).createContext)({armCoreContentEvent:o()})},95628:(e,t,n)=>{n.d(t,{e:()=>y});var i,o=n(58632),a=n(24643),r=n(40099),l=n(67353),s=n(92701),d=n(53701),u=n(1967),c=n(14283),p=n(42983),v=n(87802),h=n(72263);!function(e){e.NoInteract="failed because the user didn't interact with the document first.",e.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context"}(i||(i={}));const m=e=>({buffered:null==e?void 0:e.buffered,currentSrc:null==e?void 0:e.currentSrc,currentTime:null==e?void 0:e.currentTime,duration:null==e?void 0:e.duration,readyState:null==e?void 0:e.readyState,error:null==e?void 0:e.error,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted}),y=(0,r.memo)((0,r.forwardRef)((function(e,t){var{src:n,playProgress:i,horizontal:y,muteSetting:g,onUnmount:f,onEnded:_,onWaiting:b,disableDownload:k=!0,itemMute:w=!1,metrics:P=null,bitrate:C,hevcTest:S,bitrateInfo:T}=e,x=(0,o.__rest)(e,["src","playProgress","horizontal","muteSetting","onUnmount","onEnded","onWaiting","disableDownload","itemMute","metrics","bitrate","hevcTest","bitrateInfo"]);const M=(0,r.useRef)(null),E=(0,r.useRef)(!1),{mute:I,volume:L,playing:A}=(0,p.O2)(g),{setMute:R}=(0,v.S4)(),j=(0,r.useRef)({time:-1,size:-1}),O=(0,r.useMemo)((()=>{if((0,c.f)())return{url:n,codecType:"h264"};const e=null===l.bt||void 0===l.bt?void 0:l.bt.useHevc("desktop"),t=null!=S?S:l.bt.hevcTest;if(t.open=e&&t.open,!T||0===(null==T?void 0:T.length))return{url:n,codecType:"h264"};const{src:i,codecType:o}=(0,s.Hg)({hevcTest:t,bitrateInfo:T,downgradeUrl:n,backupDomain:!0});return{url:i,codecType:o}}),[T,n]);(0,r.useImperativeHandle)(t,(()=>{const e=M.current;return{play:()=>(0,o.__awaiter)(this,void 0,void 0,(function*(){try{yield null==e?void 0:e.play()}catch(e){}})),pause:()=>{try{h.A.emit("video_pause",{itemId:null!=n?n:""}),null==e||e.pause()}catch(e){}},seek:t=>{if(e){h.A.emit("video_seek",{itemId:null!=n?n:""});const{duration:i}=e;e.currentTime=i*t}},seekTime:t=>{e&&(e.currentTime=t)},onSeeked:t=>{null==e||e.addEventListener("seeked",t)},onSeeking:t=>{null==e||e.addEventListener("seeking",t)},onTimeUpdate:t=>{null==e||e.addEventListener("timeupdate",(()=>{var n,i;const o=null!==(n=e.currentTime)&&void 0!==n?n:0,a=null!==(i=e.duration)&&void 0!==i?i:0;t(o/a,o,a)}))},onCanPlay:t=>{null==e||e.addEventListener("canplay",t)},getPlayerAttributes:()=>m(e)}}));const V=(0,r.useCallback)(((e=0)=>(0,o.__awaiter)(this,void 0,void 0,(function*(){var t,n,i;if(!(e>=3))try{yield null===(t=M.current)||void 0===t?void 0:t.play()}catch(t){const o=null!==(n=null==t?void 0:t.message)&&void 0!==n?n:"";(null!==(i=o.match("failed because the user didn't interact with the document first."))&&void 0!==i?i:o.match("The request is not allowed by the user agent or the platform in the current context"))?(R(!0),setTimeout((()=>{V(e+1)}),0)):V(e+1)}}))),[R]);(0,r.useEffect)((()=>{M.current&&(M.current.volume=L)}),[L]),(0,r.useEffect)((()=>{V(),M.current&&Math.abs(M.current.currentTime-i)>.2&&(M.current.currentTime=i)}),[i,V]),(0,r.useEffect)((()=>{var e;A?E.current&&(E.current=!1,V()):(E.current=!0,null===(e=M.current)||void 0===e||e.pause())}),[A,V]),(0,r.useEffect)((()=>{const e=M.current;return()=>{j.current.time>0&&j.current.size>0&&(0,d.a)({time:j.current.time,size:j.current.size}),null==f||f(m(e))}}),[]);const B=(0,r.useCallback)((e=>{e.preventDefault()}),[]);(0,r.useEffect)((()=>{const e=M.current;return k&&(null==e||e.addEventListener("contextmenu",B)),()=>{null==e||e.removeEventListener("contextmenu",B)}}),[M,B,k]);const D=(0,r.useCallback)((e=>{null==b||b(e)}),[b]),F=(0,r.useCallback)((e=>{null==_||_(e),V(),h.A.emit("video_replay",{itemId:null!=n?n:""})}),[_,V,n]),N=(0,r.useCallback)((()=>{if(M.current){const e=M.current;if(C&&C>0){let t=0;for(let n=0;n<e.buffered.length;n++)t+=e.buffered.end(n)-e.buffered.start(n);const n=t*C/8;j.current={time:t,size:n}}}}),[C]);return(0,a.jsx)(u.CZ,Object.assign({horizontal:y,ref:M,src:O.url},x,{muted:w||I,playsInline:!0,autoPlay:!0,onEnded:F,onWaiting:D,onProgress:N}))})))},32098:(e,t,n)=>{n.d(t,{K:()=>a});var i=n(21367),o=n(40099);const a=e=>{const{updateGlobalVVCount:t}=(0,i.nr)(),n=(0,i.eu)(),a=(0,o.useCallback)((()=>{t(e)}),[t,e]),r=(0,o.useCallback)((()=>{(4===e||2===e&&n)&&t(e)}),[t,e]);return(0,o.useMemo)((()=>({handleBreakCount:a,handleVvCountOnEnd:r})),[e])}},48180:(e,t,n)=>{n.d(t,{o:()=>O});var i=n(24643),o=n(40099),a=n(73580),r=n(41271),l=n(34099),s=n(57431),d=n(38739),u=n(15343),c=n(12588),p=n(52853),v=n(93749),h=n(21367),m=n(11654),y=n(63438),g=n(33805),f=n(87802),_=n(88920),b=n(35323),k=n(93987),w=n(97086),P=n(53438),C=n(67169),S=n(49057),T=n(42357),x=n(99282),M=n(32545),E=n(2853),I=n(52333),L=n(32098),A=n(72263);let R=null,j=null;const O=(0,o.memo)((0,o.forwardRef)((function({id:e,url:t,index:n,mode:O,horizontal:V,muted:B,duration:D,playbackRate:F=1,e2eTag:N,bitrateInfo:U,bitrate:H,autoPlay:$=!0,autoReplay:z=!0,containerStyle:Q,onVideoPause:q,onVideoPlaying:W,onVideoPlay:G,onVideoEnded:K,onVideoError:J,onTimeUpdate:Y,onVolumeChange:Z,onVideoCanPlay:X,posterConfig:ee,teaConfig:te,videoQualityConfig:ne,fetchPriority:ie="auto",subtitleList:oe,curSubtitle:ae,onSubtitleCallback:re,renderState:le=c.R.ACTIVE},se){var de,ue,ce;const pe=(0,o.useRef)(null),ve=(0,o.useRef)(!0),he=(0,h.nr)(),{setMute:me,setVolume:ye,setCanAutoPlay:ge}=(0,f.S4)(),fe=(0,h.xI)(),_e=null!==(de=null==te?void 0:te.playMode)&&void 0!==de?de:O;R||(R=(0,l.V)()),j||(j=(0,s.x)());const be=(0,a.Nj)(d.Gs),ke=(0,a.Nj)(u.AU),we=(0,a.Nj)(m.V),{armCoreContentEvent:Pe}=(0,o.useContext)(T.e),Ce=(0,o.useCallback)((()=>{null==Pe||Pe(),we.reportActualFMP()}),[Pe,we]),Se=B||y.T5[O].forceMute,Te=(0,f.i3)(),xe=1===O?Se:Se||Te,Me=(0,f.R4)(),Ee=(0,h.w)(n,O,e),Ie=[c.R.ACTIVE,c.R.BACKUP,c.R.RETAIN].includes(le)&&0===_e,Le=(0,o.useMemo)((()=>(0,w.fU)()?"":(0,g.N2)(window.location.pathname)),[]),Ae=null!==(ue=(0,h.eu)())&&void 0!==ue&&ue,Re=(0,f.i3)(),je=(0,P.Hs)(e),Oe=(0,P.yy)(e,n),Ve=(0,x.WH)(e),Be=(0,_.HL)(),De=(0,o.useMemo)((()=>{let e;return e={isAutoScroll:Ae,mute:Re,itemMute:B,videoDimensionParams:je,videoContentParams:Oe,playModeForTea:_e,pathId:Le,vqscore:ne&&ne.vqscore?ne.vqscore:0,claTeaParams:Ve},e}),[Ae,Re,B,je,_e,Le,ne,Oe,Ve]),Fe=(0,r.P)(I.k);p._.updateItems(Fe),(0,o.useEffect)((()=>{p._.updateItems(Fe)}),[Fe]),(0,o.useEffect)((()=>{Ee&&(0,b.uQ)(k.Y.PlayerMounted)}),[Ee]);const[Ne,Ue]=(0,o.useState)(!1),He=(0,C.jj)();(0,o.useEffect)((()=>{pe&&pe.current&&(He&&$||8===O?pe.current.play():(pe.current.pause(),Ee&&!He&&be.triggerPause({enter_method:"switch_tab",playMode:_e})))}),[$,He,Ee,_e,O]);const $e=R,{region:ze,wid:Qe,user:qe,isTTP:We}=j||{},{abTestVersion:Ge}=null!==(ce=(0,S.W)((()=>["abTestVersion"]),[]))&&void 0!==ce?ce:{},Ke=(0,_.iM)("desktop"),Je=(0,_.Yu)(),Ye=(0,_.pd)("desktop"),Ze=(0,o.useMemo)((()=>{var e;return{tea:{channel:$e.teaChannel,domain:$e.tea,type:null!==(e=$e.teaChannelType)&&void 0!==e?e:"tcpy"},region:ze,webId:Qe,isLogin:!!qe,abTestVersion:Ge?`${Ge.versionName},${Ye}`:Ye,hevcAbTestVersion:Ye,vIndex:null!=n?n:-1,isTTP:We}}),[$e,Qe,ze,qe,Ge,Ye,We]);(0,o.useImperativeHandle)(se,(()=>({play:e=>{var t;null===(t=pe.current)||void 0===t||t.play(),e&&be.triggerResume({enter_method:"click_resume",playMode:_e})},pause:()=>{var t;null===(t=pe.current)||void 0===t||t.pause(),A.A.emit("video_pause",{itemId:e,playMode:O})},seek:t=>{var n,i;let o=0;const a=null===(n=pe.current)||void 0===n?void 0:n.getAttributes();a&&(o=a.duration),null===(i=pe.current)||void 0===i||i.seek(o*t),A.A.emit("video_seek",{itemId:e,playMode:O})},seekTime:e=>{var t;null===(t=pe.current)||void 0===t||t.seek(e)},getFullscreen:e=>{var t;null===(t=pe.current)||void 0===t||t.enterFullscreen(e)},exitFullscreen:e=>{var t;null===(t=pe.current)||void 0===t||t.exitFullscreen(e)},updatePlayer:e=>{var t;null===(t=pe.current)||void 0===t||t.updatePlayer(e)},replay:()=>{var e;null===(e=pe.current)||void 0===e||e.replay()},get currentTime(){var e;const t=null===(e=pe.current)||void 0===e?void 0:e.getAttributes();return t?t.currentTime:0},get duration(){var e;const t=null===(e=pe.current)||void 0===e?void 0:e.getAttributes();return t?t.duration:0},get currentCanPlay(){return Ee&&Ne}})),[Ne,Ee,_e]);const{loading:Xe,handleCanPlayWithLoading:et,handlePauseWithLoading:tt,handlePlayingWithLoading:nt,handleWaitingWithLoading:it}=(0,C.iJ)({isCurrentVideo:Ee}),ot=(0,o.useCallback)((e=>{et(),Ue(!0),null==X||X(e),fe&&pe&&pe.current&&ve.current&&(pe.current.seek(fe),ve.current=!1)}),[et,X,fe]),at=(0,o.useCallback)((()=>{var e,t,n;const i=null===(e=pe.current)||void 0===e?void 0:e.getAttributes(),o=null!==(t=null==i?void 0:i.currentTime)&&void 0!==t?t:0,a=null!==(n=null==i?void 0:i.duration)&&void 0!==n?n:0;let r=0;a&&(r=o/a),null==Y||Y(r,o,a)}),[Y]),rt=(0,o.useCallback)(((e,t)=>{me(t),ye(e),null==Z||Z(e,t)}),[Z,me,ye]),lt=(0,o.useCallback)((e=>{var t;null==J||J(e),he.setPlayerError();const n=null===(t=pe.current)||void 0===t?void 0:t.getAttributes();if(n){let e=-1,t="";const i=n.readyState,o=n.networkState;n.error&&(e=n.error.code,t=n.error.message),we.emitEvent("video_playback_error",{code:e},{errorMessage:t,errorCode:String(e),readyState:String(i),networkState:String(o)})}}),[J,we]),st=(0,o.useCallback)((e=>{tt(),null==q||q(e)}),[q,tt]),{handleVvCountOnEnd:dt,handleBreakCount:ut}=(0,L.K)(O),ct=(0,o.useCallback)((()=>{ut()}),[]),pt=(0,o.useCallback)((t=>{dt(),null==K||K(t),z&&A.A.emit("video_replay",{itemId:e,playMode:O})}),[K,z,e,O]),vt=(0,o.useCallback)((e=>{nt(),null==W||W(e),ge(!0)}),[W,nt]),ht=(0,o.useCallback)((()=>{it()}),[it]),mt=(0,o.useCallback)((e=>{const{errorCode:t,errorMessage:n,logid:i}=e;we.emitEvent("video_play_end",{count:1},{is_success:`${0===t}`,error_code:String(t),error_msg:n,logid:i})}),[we]),yt=V||2===O||3===O||4===O||6===O||5===O;return(0,i.jsxs)(E.Le,{horizontal:V,mode:O,style:Q,children:[(null==ee?void 0:ee.poster)?(0,i.jsx)(E.R,{horizontal:yt,mode:O,src:ee.poster,alt:ee.desc,loading:ee.lazyLoading?"lazy":"eager",style:ee.style,onLoad:Ce,fetchPriority:ie}):(null==ee?void 0:ee.videoCover)?(0,i.jsx)(M.x,{video:ee.videoCover,objectFit:yt?"contain":"cover",style:ee.style,alt:ee.desc,onLoad:Ce,fetchPriority:ie}):null,(Ee||Ie)&&(0,i.jsxs)(E.Ec,{horizontal:yt,"data-e2e":N,children:[(0,i.jsx)(v.xk,{ref:pe,bitrateInfo:U,defaultBitrate:H,duration:D,autoplay:$,loop:z,oncanplay:ot,onplay:G,onwaiting:ht,onended:pt,ontimeupdate:at,onvolumechange:rt,onerror:lt,onpause:st,onbreak:ct,onplaying:vt,onVideoPlayEnd:mt,teaParams:null==te?void 0:te.params,mode:O,id:e,volume:Me,muted:xe,playbackRate:F,url:t,extraMetricsParams:De,videoPlayReport:be,videoExperienceReport:ke,appLoggerParams:Ze,useHEVC:Ke.open,hevcTest:Ke,playbackAbTestInfo:Je,subtitleList:oe,curSubtitle:ae,onSubtitleCallback:re,renderState:le,onAutoplayPrevented:()=>{Be&&ge(!1)}}),Xe&&(0,i.jsx)(E.K3,{})]})]})})))},2853:(e,t,n)=>{n.d(t,{Ec:()=>l,K3:()=>s,Le:()=>a,R:()=>r});var i=n(62186),o=n(84827);const a=(0,i.default)("div",{target:"ec2xuek0"})((({horizontal:e,mode:t,theme:{colors:n}})=>[{width:"100%",height:"100%",overflow:"hidden",position:"relative",backgroundColor:n.BGPlaceholderDefault,backgroundSize:e?"contain":"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},2===t||1===t||3===t||5===t?{display:"flex",alignItems:"center",justifyContent:"center"}:null]),"label:DivContainer;"),r=(0,i.default)("img",{target:"ec2xuek1"})((({horizontal:e,mode:t,fetchPriority:n="auto"})=>2!==t&&3!==t&&4!==t&&5!==t?{width:"100%",height:"100%",objectFit:"cover",fetchPriority:n}:{width:"100%",height:"100%",objectFit:e?"contain":"cover",fetchPriority:n}),"label:ImgPoster;"),l=(0,i.default)("div",{target:"ec2xuek2"})((({horizontal:e=!0})=>({position:"absolute",left:0,top:0,width:"100%",height:"100%","& .tiktok-web-player":{width:"100%",height:"100%"},"& .xgplayer video":{display:"block",width:"100%",height:"100%",objectFit:e?"contain":"cover"},"& .tiktok-web-player video":{display:"block",width:"100%",height:"100%",objectFit:e?"contain":"cover"}})),"label:DivBasicPlayerWrapper;"),s=(0,i.default)(o.R,{target:"ec2xuek3"})({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:3},"label:StyledLoading;")},34663:(e,t,n)=>{n.d(t,{K:()=>pt});var i=n(24643),o=n(40099),a=n(88920),r=n(73580),l=n(38739),s=n(15343),d=n(96959);class u{constructor(e="webapp",{playReport:t,experienceReport:n}){this.project=e,this._platform="",this._url="",this._playMode=0,this._videoQualityHandleParams=null,this._videoPlayHandleParams=null,this._playbackAttributes=null,this.isIos=!1,this.isAndroid=!1,this.videoExperienceReport=n,this.videoPlayReport=t,this.videoQualityReport=new d.re,this.renderState=""}set platform(e){this._platform=e,this.isIos="ios"===this._platform,this.isAndroid="android"===this._platform}set playMode(e){this._playMode=e}set url(e){this._url=e}set videoQualityHandleParams(e){this._videoQualityHandleParams=e}set videoPlayHandleParams(e){this._videoPlayHandleParams=e}set playbackAttributes(e){this._playbackAttributes=e}updateMetricsParams({playbackAttribute:e,videoQualityParams:t}){e&&(this.playbackAttributes=e),t&&(this.videoQualityHandleParams=t)}onPlay(){}onPlaying(){this.videoExperienceReport.reportVideoInteract({endTime:Date.now(),videoSource:this._url})}onPause(){this._videoPlayHandleParams&&this._playbackAttributes&&this.videoPlayReport.handlePause(Object.assign(Object.assign({},this._videoPlayHandleParams),this._playbackAttributes))}onWaiting(){this._videoPlayHandleParams&&this._playbackAttributes&&this.videoPlayReport.handleWaiting(Object.assign(Object.assign({},this._videoPlayHandleParams),this._playbackAttributes))}onLoadStart(){}onLoadedData(){}onCanPlay(){this.videoExperienceReport.getCurrentPageReport()||(this.videoExperienceReport.reportVideoFirstScreen({endTime:Date.now(),videoSource:this._url}),this.videoExperienceReport.reportVideoAddition({endTime:Date.now(),videoSource:this._url}))}onCanPlayThrough(){this.isIos&&(this.videoExperienceReport.getCurrentPageReport()||(this.videoExperienceReport.reportVideoFirstScreen({endTime:Date.now(),videoSource:this._url}),this.videoExperienceReport.reportVideoAddition({endTime:Date.now(),videoSource:this._url})))}onTimeUpdate(){var e;this._videoQualityHandleParams&&this._videoPlayHandleParams&&this._playbackAttributes&&("webapp-mobile"===this.project?this.videoPlayReport.handleTimeUpdate(Object.assign(Object.assign(Object.assign({},this._videoPlayHandleParams),this._playbackAttributes),{render_state:this.renderState}),!0):this.videoPlayReport.handleTimeUpdate(Object.assign(Object.assign(Object.assign({},this._videoPlayHandleParams),this._playbackAttributes),{render_state:this.renderState}))),!this.videoExperienceReport.getFirstFrameReport()&&this._playbackAttributes&&this.videoExperienceReport.reportVideoFirstFrame(null!==(e=this._playbackAttributes.currentTime)&&void 0!==e?e:-1)}onError(){this._videoPlayHandleParams&&this.videoPlayReport.handleError(this._videoPlayHandleParams)}onEnded(){this._videoPlayHandleParams&&this.videoPlayReport.handleEnded(this._videoPlayHandleParams)}onSlideChange(e){var t,n;0!==(null!==(n=null===(t=this._playbackAttributes)||void 0===t?void 0:t.duration)&&void 0!==n?n:0)&&this._videoPlayHandleParams&&this.videoPlayReport.handlePlayTime(this._videoPlayHandleParams)}onUnmount(e){this.isIos||this.onSlideChange(e)}onProgress(e,t){}mseCDNCache(e){}pauseAction(e){this.videoPlayReport.triggerPause({enter_method:e,playMode:this.playMode})}setPlayerType(e){}setRenderState(e){this.renderState=e}updateFrameInfo(e){}}var c=n(97086),p=n(21367),v=n(11654),h=n(67169),m=n(60484),y=n(87802),g=n(63438),f=n(32545),_=n(42357),b=n(95628),k=n(1967);const w=(0,o.memo)((0,o.forwardRef)((function({poster:e,videoCover:t,lazyLoading:n=!0,horizontal:a,playUrl:d,id:w,teaParams:P,index:C,mode:S,itemMute:T,desc:x,topSearchQueryAfterViewWord:M,onVideoPause:E,onVideoEnded:I,onVideoError:L,e2eTag:A,onTimeUpdate:R,subtitleStruct:j,disableDownload:O=!0,posterStyle:V,bitrateInfo:B,fetchPriority:D="auto"},F){const{currentVideo:N,playProgress:U,isAutoScroll:H=!1}=(0,p.MY)(),$=(0,o.useRef)(null),z=(0,o.useRef)(null),Q=(0,r.Nj)(l.Gs),q=(0,r.Nj)(s.AU),[W,G]=(0,o.useState)(!1),K=(0,r.Nj)(v.V),J=(0,o.useMemo)((()=>(0,c.fU)()?null:new u("webapp-desktop",{playReport:Q,experienceReport:q})),[q,Q]),Y=(0,o.useCallback)((()=>{var e,t;null===(t=null===(e=$.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e)}),[]),Z=(0,o.useCallback)((()=>{var e,t;null===(t=null===(e=$.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e)}),[]),X=(0,o.useMemo)((()=>{if(!N)return!1;const{id:e,index:t,mode:n}=N;return e===w&&t===C&&n===S}),[w,C,S,N]);(0,o.useEffect)((()=>{null==J||J.setPlayerType(2)}),[J]),(0,o.useImperativeHandle)(F,(()=>({play:e=>{Y(),z.current=!0,e&&Q.triggerResume({enter_method:"click_resume",playMode:S})},pause:()=>{Z(),z.current=!1,Q.triggerPause({enter_method:"click_pause",playMode:S,currentBackendSourceEventTracking:P.currentBackendSourceEventTracking})},seek:e=>{var t;null===(t=$.current)||void 0===t||t.seek(e)},seekTime:e=>{var t;null===(t=$.current)||void 0===t||t.seekTime(e)},onSeeked:e=>{var t;null===(t=$.current)||void 0===t||t.onSeeked(e)},onSeeking:e=>{var t;null===(t=$.current)||void 0===t||t.onSeeking(e)},onTimeUpdate:e=>{var t;null===(t=$.current)||void 0===t||t.onTimeUpdate(e)},getFullscreen:()=>{},exitFullscreen:()=>{},replay:()=>{Y(),z.current=!0},updatePlayer:e=>{},get currentTime(){var e,t;return null!==(t=null===(e=$.current)||void 0===e?void 0:e.getPlayerAttributes().currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=$.current)||void 0===e?void 0:e.getPlayerAttributes().duration)&&void 0!==t?t:0},get currentCanPlay(){return X&&W}})),[Y,Z,Q,S,X,W,P.currentBackendSourceEventTracking]),(0,o.useEffect)((()=>{X||G(!1)}),[X]);const ee=(0,h.jj)();(0,o.useEffect)((()=>{const e=null===z.current||z.current;ee&&e?Y():(Z(),X&&!ee&&Q.triggerPause({enter_method:"switch_tab",playMode:S,currentBackendSourceEventTracking:P.currentBackendSourceEventTracking}))}),[ee,Y,Z,Q,X,S,P.currentBackendSourceEventTracking]);const te=(0,o.useCallback)((()=>{var e;const t=(0,m.L$)(null===(e=$.current)||void 0===e?void 0:e.getPlayerAttributes()),{bitrate:n,author_id:i,format:o,encodedType:a,videoQuality:r,encodeUserTag:l,codecType:s,definition:u,secret:c,forFriend:p}=P;return Object.assign({id:w,authorId:i,playMode:S,bitrate:n,format:o,encodedType:a,videoQuality:r,encodeUserTag:l,codecType:s,definition:u,secret:c,forFriend:p,play_url:d},null!=t?t:{})}),[w,S,P,d]),ne=(0,y.i3)(),ie=(0,o.useMemo)((()=>{const{group_id:e="",author_id:t="",is_scheduled:n,search_id:i,search_keyword:o,search_result_id:a,question_id:r,collection_id:l,collection_name:s,isPaidPartnership:d,poi_id:u,is_sub_only_video:c,isPinnedItem:p,isReposted:v,currentBackendSourceEventTracking:h}=P||{};return{itemId:e,authorId:t,isScheduled:Boolean(n),autoplayStatus:1,searchId:i,searchKeyword:o,searchResultId:a,questionId:r,playMode:S,isMute:ne,isAutoScroll:H,collectionId:l,collectionName:s,isPaidPartnership:Boolean(d),poiId:u,isSubOnlyVideo:c,isCopyrightMuted:T,isPinnedItem:p,isReposted:v,currentBackendSourceEventTracking:h}}),[S,ne,H,T,P]),oe=(0,o.useCallback)((()=>{var e;const{currentTime:t=0,duration:n=0}=(0,m.L$)(null===(e=$.current)||void 0===e?void 0:e.getPlayerAttributes());return Object.assign(Object.assign({},ie),{currentTime:t,duration:n,index:C})}),[C,ie]);(0,o.useEffect)((()=>{P&&J&&(J.videoPlayHandleParams=oe())}),[oe,J,P]);const{loading:ae,handleCanPlayWithLoading:re,handleWaitingWithLoading:le}=(0,h.iJ)({isCurrentVideo:X}),se=(0,o.useCallback)((()=>{var e;null==J||J.updateMetricsParams({playbackAttribute:null===(e=$.current)||void 0===e?void 0:e.getPlayerAttributes(),videoQualityParams:te()}),re(),G(!0),null==J||J.onCanPlay()}),[te,J,re]),de=(0,o.useCallback)((()=>{var e,t;const{currentTime:n=0,duration:i=0}=(0,m.L$)(null===(e=$.current)||void 0===e?void 0:e.getPlayerAttributes());null==J||J.updateMetricsParams({playbackAttribute:Object.assign({},null===(t=$.current)||void 0===t?void 0:t.getPlayerAttributes()),videoQualityParams:te()}),null==J||J.onTimeUpdate(),null==R||R(n/i)}),[te,J,R]),ue=(0,h.tW)(),ce=(0,o.useCallback)((e=>{var t;null==L||L(e),ue(e),null==J||J.updateMetricsParams({playbackAttribute:null===(t=$.current)||void 0===t?void 0:t.getPlayerAttributes(),videoQualityParams:te()}),null==J||J.onError()}),[te,J,L,ue]),pe=(0,o.useCallback)((()=>{var e;le(),null==J||J.updateMetricsParams({playbackAttribute:null===(e=$.current)||void 0===e?void 0:e.getPlayerAttributes(),videoQualityParams:te()}),null==J||J.onWaiting()}),[te,J,le]),ve=(0,o.useCallback)((e=>{var t;null==I||I(e),null==J||J.updateMetricsParams({playbackAttribute:null===(t=$.current)||void 0===t?void 0:t.getPlayerAttributes(),videoQualityParams:te()}),null==J||J.onEnded()}),[te,J,I]),he=(0,o.useCallback)((e=>{var t;null==J||J.updateMetricsParams({playbackAttribute:null===(t=$.current)||void 0===t?void 0:t.getPlayerAttributes(),videoQualityParams:te()}),null==J||J.onUnmount(Object.assign({},e))}),[te,J]);(0,o.useEffect)((()=>{X||null==E||E({})}),[X,E]);const me=a||2===S||3===S||4===S||6===S||5===S,ye=M?`${M}. ${x}`:x,{armCoreContentEvent:ge}=(0,o.useContext)(_.e),fe=(0,o.useCallback)((()=>{null==ge||ge(),K.reportActualFMP()}),[ge,K]);return(0,i.jsxs)(k.Le,{horizontal:a,mode:S,children:[e?(0,i.jsx)(k.R,{horizontal:me,mode:S,src:e,alt:ye,loading:n?"lazy":"eager",style:V,onLoad:fe,fetchPriority:D}):t?(0,i.jsx)(f.x,{video:t,objectFit:me?"contain":"cover",style:V,alt:ye,onLoad:fe,fetchPriority:D}):null,X&&(0,i.jsxs)(k.Ec,{"data-e2e":A,children:[(0,i.jsx)(b.e,{ref:$,horizontal:me,muteSetting:T||g.T5[S].forceMute,defaultMute:g.T5[S].defaultMute,playProgress:null!=U?U:0,src:d,onUnmount:he,onTimeUpdate:de,onError:ce,onCanPlay:se,onWaiting:pe,onEnded:ve,disableDownload:O,bitrate:P.bitrate,metrics:J,bitrateInfo:B}),ae&&(0,i.jsx)(k.K3,{}),4!==S&&6!==S||!j?null:(0,i.jsx)("track",{default:!0,kind:"subtitles",srcLang:j.language,src:j.url})]})]})})));var P,C,S,T=n(58632),x=n(46682),M=n(11917),E=n.n(M),I=n(57432),L=n.n(I),A=n(35323),R=n(93987),j=n(34099),O=n(57431),V=n(12588),B=n(52961),D=n(91021),F=n(2787),N=n(72263),U=n(93608),H=n(92061),$=n(33414),z=n(5590),Q=n(90102),q=n(42917),W=n(4975),G=n(90170);!function(e){e.Normal="normal",e.Downgrade="downgrade"}(P||(P={})),function(e){e.Unknown="unknown",e.Slow="slow",e.Normal="normal",e.Fast="fast"}(C||(C={})),function(e){e.Eslow2g="slow-2g",e.E2g="2g",e.E3g="3g",e.E4g="4g"}(S||(S={}));const K={instanceMode:"downgrade",metaChunkSize:314572.8,dataChunkSize:838860.8,bufferEnoughTime:1.2,number:1},J=[];J.push({maxSpeed:9.75,minSpeed:0,instanceConfig:{instanceMode:"downgrade",metaChunkSize:734003.2,dataChunkSize:838860.8,bufferEnoughTime:30,number:1}}),J.push({maxSpeed:1e4,minSpeed:9.75,instanceConfig:{instanceMode:"normal",metaChunkSize:314572.8,dataChunkSize:838860.8,bufferEnoughTime:4,number:3}});const Y="undefined"==typeof window||"undefined"==typeof document;function Z(){return"undefined"!=typeof navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:0}function X(){var e;return"undefined"==typeof navigator?0:null!==(e=null===navigator||void 0===navigator?void 0:navigator.deviceMemory)&&void 0!==e?e:4}Z(),X();const ee=!("undefined"==typeof window||!window.MediaSource)&&"function"==typeof window.MediaSource.isTypeSupported;"undefined"!=typeof window&&ee&&['video/mp4;codecs="hev1.1.6.L120.90"','video/mp4;codecs="hev1.2.4.L120.90"','video/mp4;codecs="hev1.3.E.L120.90"','video/mp4;codecs="hev1.4.10.L120.90"'].reduce(((e,t)=>e||window.MediaSource.isTypeSupported(t)),!1);class te{constructor(){this.getConfigWithNativeInfo=(e,t)=>{if(t>2&&ee)for(const t of this.instanceConfigSpeedRanges){const{maxSpeed:n,minSpeed:i}=t;if(e>=i&&e<n)return t.instanceConfig}return K},this.instanceConfigSpeedRanges=J}set dynamicSpeedRanges(e){this.instanceConfigSpeedRanges=e}}class ne{constructor(){this.cpuNum=Z(),this.memory=X()}}class ie{constructor(){this.addChunk=e=>{this.chunks.push(e),this.chunks.length>=this.maxLength&&this.chunks.shift()},this.release=()=>{this.chunks=[]},this.chunks=[],this.maxLength=6,this.lastAverageSpeed=0}get averageSpeed(){let e=0,t=0;for(const n of this.chunks)n.size>0&&n.duration>0&&(e+=n.size,t+=n.duration);return t>0&&(this.lastAverageSpeed=8*e/1024/1024/t),this.lastAverageSpeed}}class oe{constructor(){this.calculateNetworkLevelFromBaseSpeed=()=>{let e="slow";const t=this.baseSpeed;return t>8?e="fast":t>=2&&(e="normal"),e},this.calculateNetworkLevelFromAverageSpeed=()=>{let e="unknown";const t=this.averageSpeed;var n,i;return t>0?t>8?e="fast":t>=2&&(e="normal"):"4g"===("undefined"==typeof navigator?"":null!==(i=null===(n=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===n?void 0:n.effectiveType)&&void 0!==i?i:"")&&(e="fast"),e},this.speedMeasurement=new ie}inputDownloadedChunkInfo(e,t){this.speedMeasurement.addChunk({size:e,duration:t})}get averageSpeed(){return this.speedMeasurement.averageSpeed}get baseSpeed(){return"undefined"==typeof navigator?0:null!==(t=null===(e=null===navigator||void 0===navigator?void 0:navigator.connection)||void 0===e?void 0:e.downlink)&&void 0!==t?t:0;var e,t}get speed(){return this.averageSpeed?this.averageSpeed:this.baseSpeed}get networkLevel(){const e=this.calculateNetworkLevelFromBaseSpeed(),t=this.calculateNetworkLevelFromAverageSpeed();return"unknown"!==t?t:e}}class ae{static generateUUID(){return this.UUIDBase++,this.UUIDPrefix+this.UUIDBase}constructor(e,t="Base",n){this.uuid=ae.generateUUID(),this.element=e,this.type=t,this.player=n}style(e,t){this.element.style[e]=t}get currentTime(){return this.element.currentTime}set currentTime(e){this.element.currentTime=e}get duration(){return this.element.duration}get width(){return this.element.videoWidth}get height(){return this.element.videoHeight}get error(){var e,t;return null!==(t=null===(e=this.element.error)||void 0===e?void 0:e.code)&&void 0!==t?t:-1}get getAttributes(){var e,t,n,i,o;return{buffered:this.element.buffered,currentSrc:null!==(e=this.element.currentSrc)&&void 0!==e?e:"",currentTime:null!==(t=this.element.currentTime)&&void 0!==t?t:0,duration:null!==(n=this.element.duration)&&void 0!==n?n:0,readyState:null!==(i=this.element.readyState)&&void 0!==i?i:0,error:null!==(o=this.element.error)&&void 0!==o?o:null}}get isReady(){return Boolean(this.element&&this.element.readyState>=2)}}function re(e,t){return!!e&&(e.classList?Array.prototype.some.call(e.classList,(e=>e===t)):!!e.className&&Boolean(e.className.match(new RegExp(`(\\s|^)${t}(\\s|$)`))))}ae.UUIDBase=0,ae.UUIDPrefix="PLAYER_",ae.isSupported=!0;const le=(e,t)=>(0,T.__awaiter)(void 0,void 0,void 0,(function*(){if(null==e?void 0:e.requestFullscreen){const t=e.requestFullscreen();t&&t.catch((function(){console.log("fullscreen error")}))}else(null==e?void 0:e.mozRequestFullScreen)?yield e.mozRequestFullScreen():(null==e?void 0:e.webkitRequestFullscreen)?yield e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):(null==t?void 0:t.webkitSupportsFullscreen)?t.webkitEnterFullscreen():(null==e?void 0:e.msRequestFullscreen)?yield e.msRequestFullscreen():e&&function(e,t){e&&(e.classList?t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((t=>{t&&e.classList.add(t)})):re(e,t)||(e.className+=` ${t}`))}(e,"xgplayer-is-cssfullscreen")})),se=e=>(0,T.__awaiter)(void 0,void 0,void 0,(function*(){document.exitFullscreen?yield document.exitFullscreen():document.webkitExitFullscreen?yield document.webkitExitFullscreen():document.mozCancelFullScreen?yield document.mozCancelFullScreen():document.msExitFullscreen&&(yield document.msExitFullscreen()),e&&function(e,t){e&&(e.classList?t.split(/\s+/g).forEach((t=>{e.classList.remove(t)})):re(e,t)&&t.split(/\s+/g).forEach((t=>{const n=new RegExp(`(\\s|^)${t}(\\s|$)`);e.className=e.className.replace(n," ")})))}(e,"xgplayer-is-cssfullscreen")})),de=class extends ae{constructor(){const e=new G.BasicPlayer({});super(e.el,e.type,e),this.player=e,this.initAttributes(),this.initStyle()}get currentTime(){var e,t;return null!==(t=null===(e=this.element)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0}set currentTime(e){this.element&&(this.element.currentTime=e)}bindEvent(e,t){this.player.on(e,t)}mute(e){this.player.mute(e)}access(){return this.player.access()}load(e){this.player.load(e)}demux(){}decode(){}render(){}updateConfig(e){}seek(e){this.player.seek(e)}play(){return this.player.play()}pause(){this.player.pause()}release(){}reset(){this.pause(),this.seek(0)}removeEvent(e,t){this.player.off(e,t)}isSupported(){return!0}addSubtitle(e,t,n,i){this.player.addSubtitle(e,t,n,i)}onceEvent(e,t){const n=i=>{t(i),this.player.off(e,n)};this.player.on(e,n)}getFullscreen(e){return(0,T.__awaiter)(this,void 0,void 0,(function*(){yield le(e,this.element)}))}exitFullscreen(e){return(0,T.__awaiter)(this,void 0,void 0,(function*(){yield se(e)}))}seekTime(e){this.element&&(this.element.currentTime=e)}get playbackRate(){return this.element.playbackRate}set playbackRate(e){this.element.playbackRate=e}get muted(){var e;return null===(e=this.element)||void 0===e?void 0:e.muted}set muted(e){this.element.muted=e}get volume(){return this.element.volume}set volume(e){this.element.volume=e}get duration(){return this.element.duration}get isCanplay(){return this.player.isReady}replay(){var e;null===(e=this.player)||void 0===e||e.replay()}getCurrentDefinition(){const e={url:"",definition:"",bitrate:-1,duration:-1,codecType:""};if(!this.mediaDefinitions)return e;for(const e of this.mediaDefinitions){const{url:t}=e;if(t instanceof Array){for(const n of t)if(this.element.currentSrc===n.src)return{url:n.src,definition:e.definition,bitrate:e.bitrate,duration:e.duration,codecType:e.codecType}}else if(this.element.currentSrc===e.url)return{url:e.url,definition:e.definition,bitrate:e.bitrate,duration:e.duration,codecType:e.codecType}}return e}initStyle(){this.element.style["::-webkit-media-controls-enclosure"]={display:"none !important"}}initAttributes(){this.element.autoplay=!1,this.element.controls=!1,this.element.loop=!1,this.element.muted=!1,this.element.playsInline=!0,this.element.preload="auto"}};class ue extends ae{constructor(){const e=new G.StreamPlayer({withCredentials:!0});super(e.el,e.type,e),this.initAttributes(),this.initStyle()}bindEvent(e,t){this.player.on(e,t)}removeEvent(e,t){this.player.off(e,t)}onceEvent(e,t){const n=i=>{t(i),this.player.off(e,n)};this.player.on(e,n)}mute(e){this.element.muted=e}access(){return this.player.play().then((()=>{this.element.pause()}))}load(e){this.player.load(e)}updateConfig(e){e.metaChunkSize&&(this.player.metaChunkSize=e.metaChunkSize),e.dataChunkSize&&(this.player.dataChunkSize=e.dataChunkSize),e.bufferEnoughTime&&(this.player.bufferEnoughTime=e.bufferEnoughTime)}demux(){}decode(){}render(){}seek(e){this.player.seek(e)}play(){return this.player.play()}pause(){this.player.pause()}release(){this.player.release()}reset(){this.pause(),this.seek(0)}addSubtitle(e,t,n,i){this.player.addSubtitle(e,t,n,i)}getFullscreen(e){return(0,T.__awaiter)(this,void 0,void 0,(function*(){yield le(e,this.element)}))}exitFullscreen(e){return(0,T.__awaiter)(this,void 0,void 0,(function*(){yield se(e)}))}seekTime(e){this.element&&(this.element.currentTime=e)}get playbackRate(){return this.element.playbackRate}set playbackRate(e){this.element.playbackRate=e}get muted(){var e;return null===(e=this.element)||void 0===e?void 0:e.muted}set muted(e){this.element.muted=e}get volume(){return this.element.volume}set volume(e){this.element.volume=e}get duration(){return this.element.duration}get currentTime(){var e,t;return null!==(t=null===(e=this.element)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0}set currentTime(e){this.element&&(this.element.currentTime=e)}get isCanplay(){return this.player.isReady}replay(){var e;null===(e=this.player)||void 0===e||e.replay()}getCurrentDefinition(){const e={url:"",definition:"",bitrate:-1,duration:-1,codecType:""};if(!this.mediaDefinitions)return e;for(const e of this.mediaDefinitions){const{url:t}=e;if(t instanceof Array){for(const n of t)if(this.element.currentSrc===n.src)return{url:n.src,definition:e.definition,bitrate:e.bitrate,duration:e.duration,codecType:e.codecType}}else if(this.element.currentSrc===e.url)return{url:e.url,definition:e.definition,bitrate:e.bitrate,duration:e.duration,codecType:e.codecType}}return e}initStyle(){this.element.style["::-webkit-media-controls-enclosure"]={display:"none !important"}}initAttributes(){this.element.autoplay=!1,this.element.controls=!1,this.element.loop=!1,this.element.muted=!1,this.element.playsInline=!0,this.element.preload="auto"}}ue.isSupported=ee;const ce=ue;class pe{constructor(){this.instances={}}createInstance(e,t){for(let n=0;n<t;n++)if("normal"===e&&ce.isSupported){const e=new ce;this.instances[e.uuid]={idle:!0,mode:"normal",player:e,isAccessible:!1}}else{const e=new de;this.instances[e.uuid]={idle:!0,mode:"downgrade",player:e,isAccessible:!1}}}getInstance(e){if("normal"===e&&ee){for(const e in this.instances)if(this.instances[e].idle&&"normal"===this.instances[e].mode)return this.instances[e].idle=!1,this.instances[e].player;const e=new ce;return this.instances[e.uuid]={idle:!1,mode:"normal",player:e,isAccessible:!1},e}{for(const e in this.instances)if(this.instances[e].idle&&"downgrade"===this.instances[e].mode)return this.instances[e].idle=!1,this.instances[e].player;const e=new de;return this.instances[e.uuid]={idle:!1,mode:"downgrade",player:e,isAccessible:!1},e}}releaseInstance(e){const t=e.uuid;this.instances[t]&&(e.pause(),e.release(),this.instances[t].idle=!0)}getInstanceById(e){return this.instances[e]}getInstancesByMode(e){return Object.keys(this.instances).map((e=>this.instances[e])).filter((t=>t.mode===e))}}const ve=Y?null:new class{constructor(){this.getConfig=()=>this.configManager.getConfigWithNativeInfo(this.networkManager.speed,this.deviceManager.memory),this.getInstanceMode=()=>this.getConfig().instanceMode,this.getSpeed=()=>this.networkManager.speed,this.mediaPool=new pe,this.networkManager=new oe,this.configManager=new te,this.deviceManager=new ne,this.config=K,this.initDowngradePlayer()}getPlayer(e){let t=e;t||(t=this.config.instanceMode),e&&"downgrade"===e||this.updateConfig();let n=this.mediaPool.getInstance(t);return n||(n=this.mediaPool.getInstance("downgrade")),n}getDowngradePlayer(){return this.getPlayer("downgrade")}getInstanceById(e){return this.mediaPool.getInstanceById(e)}getInstanceCount(){return this.mediaPool.getInstancesByMode(this.config.instanceMode).length}setDynamicConfig(e){e&&e.length&&(this.configManager.dynamicSpeedRanges=e,this.updateConfig())}releasePlayer(e){this.mediaPool.releaseInstance(e)}initDowngradePlayer(){this.mediaPool.getInstancesByMode("downgrade").length||this.mediaPool.createInstance("downgrade",1)}updateConfig(){const e=this.config;"normal"!==e.instanceMode&&3!==e.number&&(this.config=this.getConfig());const t=this.mediaPool.getInstancesByMode("downgrade");if("downgrade"===this.config.instanceMode)t.length<this.config.number&&this.mediaPool.createInstance("downgrade",this.config.number-t.length);else if("normal"===this.config.instanceMode){const e=this.mediaPool.getInstancesByMode("normal");e.length<this.config.number&&this.mediaPool.createInstance("normal",this.config.number-e.length),e.forEach((e=>{e.player.player instanceof G.StreamPlayer&&(e.player.player.metaChunkSize=this.config.metaChunkSize,e.player.player.dataChunkSize=this.config.dataChunkSize,e.player.player.bufferEnoughTime=this.config.bufferEnoughTime)}))}this.initDowngradePlayer()}};var he,me;!function(e){e.PlayQuality="video_play_quality",e.PlayEnded="video_play_end",e.PlayFailed="video_play_failed",e.BlockStart="video_block_start",e.Block="video_block",e.Request="video_request",e.RequestResponse="video_request_response",e.FirstFrame="first_feed_show_time"}(he||(he={})),function(e){e[e.Public=0]="Public",e[e.Self=1]="Self",e[e.Friend=2]="Friend"}(me||(me={}));const ye=(e=0)=>["one_column","three_column","browser_mode","swiper_mode","video_detail","pip","fullscreen","creator_tab","mini_player"][e],ge=e=>e?e.map((e=>e.GearName||"")):null,fe=e=>e?e.map((e=>e.QualityType&&e.Bitrate?`${e.QualityType}:${e.Bitrate}`:"")).filter((e=>!!e)):null,_e=e=>{if(!e)return 0;let t=0;for(let n=0;n<e.length;n++)t+=e.end(n)-e.start(n);return Math.round(1e3*t)},be=new Map([[2,"adapt_lowest_1080p"],[3,"adapt_lower_1080p"],[4,"adapt_1080p"],[7,"adapt_lowest_1440p"],[10,"normal_720p"],[11,"low_720p"],[12,"adapt_high_720p"],[13,"adapt_higher_720p"],[14,"adapt_lower_720p"],[15,"adapt_lowest_720p"],[16,"higher_720p"],[17,"highest_720p"],[18,"adapt_720p"],[19,"adapt_low_720p"],[191,"lower_720p"],[20,"normal_540p"],[21,"adapt_lower_540p"],[22,"adapt_high_540p"],[23,"adapt_higher_540p"],[24,"lower_540p"],[25,"lowest_540p"],[26,"higher_540p"],[27,"highest_540p"],[28,"adapt_540p"],[29,"adapt_lowest_540p"],[291,"adapt_low_540p"],[30,"normal_480p"],[31,"low_480p"],[32,"high_480p"],[33,"medium_480p"],[34,"lower_480p"],[35,"lowest_480p"],[36,"higher_480p"],[37,"highest_480p"],[38,"adapt_480p"],[39,"adapt_lower_480p"],[391,"adapt_high_480p"],[40,"normal_360p"],[41,"low_360p"],[42,"high_360p"],[43,"medium_360p"],[44,"lower_360p"],[45,"lowest_360p"],[46,"higher_360p"],[47,"highest_360p"],[48,"adapt_360p"],[49,"adapt_lowest_360p"],[50,"adapt_high_360p"]]);var ke=n(92701);const we=e=>{U.f.event("video_mse_error",e)};function Pe(e,t){var n,i,o,a,r,l,s,d,u;const c={code:null!==(n=t.errorCode)&&void 0!==n?n:0,message:null!==(i=t.errorMessage)&&void 0!==i?i:"",httpCode:null!==(o=t.httpCode)&&void 0!==o?o:0,url:null!==(a=t.url)&&void 0!==a?a:"",type:e,responseMsg:"",xCache:"",via:"",mode:null!==(r=t.mode)&&void 0!==r?r:"",pathId:null!==(l=t.pathId)&&void 0!==l?l:"",currentTime:null!==(s=t.currentTime)&&void 0!==s?s:0,codec:null!==(d=t.codec)&&void 0!==d?d:"",duration:null!==(u=t.duration)&&void 0!==u?u:0};(null==t?void 0:t.response)?function(e){const t={responseMsg:""};return new Promise((n=>{try{e.headers.forEach(((e,n)=>{t[n.toLocaleLowerCase()]=e})),e.text().then((i=>{e.text=i;const o=i.toLocaleLowerCase(),a=/<body>(([\s\S])*?)<\/body>/.exec(o),r=document.createElement("div");r.innerHTML=a?a[1]:"";const l=r.children;let s="";for(let e=0;e<l.length;e++)s+=`${l[e].innerText}|`;t.responseMsg=s,n(t)})).catch((()=>{n(t)}))}catch(e){n(t)}}))}(t.response).then((t=>{var n,i,o;c.responseMsg=null!==(n=t.responseMsg)&&void 0!==n?n:"",c.xCache=null!==(i=t["x-cache"])&&void 0!==i?i:"",c.via=null!==(o=t.via)&&void 0!==o?o:"",console.info(`>>>>>${e} parseResponse`,c),we(c)})).catch((()=>{c.code=-1e3,we(c),console.info("parse response error")})):we(c)}const Ce={mp4Preloader:null,BitrateSelector:{defaultConfig:{}},ifAddMp4Preloader:!1},Se="TT-vCache",Te=(e,t)=>{const n=[];return e.forEach(((e,i)=>{const o=((e,t,n)=>{if(!Array.isArray(e)||e.length<1)return;const i=[];e.forEach((e=>{const t=(o=e.url)?Array.isArray(o)?o.map((e=>({src:e}))):"string"==typeof o?o:[]:[],n=e.codecType||"h264";var o;!t||Array.isArray(t)&&0===t.length||i.push({url:t,definition:e.definition,bitrate:e.bitrate,duration:e.duration,qualityType:e.qualityType,vtype:"MP4",codecType:n.includes("h265")?"h265":"h264"})}));const o=e[0].id;return{order:t,data:{vid:`${Se}-${o}`,payload:i,preloadTime:n,codecType:e[0].codecType}}})(e,i,t);o&&o.data.payload.length>0&&n.push(o)})),n};function xe(e,t,n){try{if(!e)return"";const{host:i}=new URL(e);return t.filter((e=>e===i)).length>0?"anonymous":n.filter((e=>e===i)).length>0?"use-credentials":""}catch(e){return""}}const Me=function(e){return"number"==typeof e?e:"boolean"==typeof e?e?1:0:0===e.indexOf("v")&&2===e.length?parseInt(e[1],10):parseInt(e,10)},Ee=e=>!!e;var Ie=n(63508);let Le=!0;const Ae={width:"100%",height:"100%",controls:!1,closeVideoClick:!0,closeVideoDblclick:!0,closeVideoTouch:!0,closePlayerBlur:!0,closeControlsBlur:!0,closeFocusVideoFocus:!0,closePlayVideoFocus:!0,closeVideoStopPropagation:!0,ignores:["play","start"]},Re=e=>{const{H264DefinitionList:t}=e.config;if(t&&t.length>0){const n=t[0];return e.emit("playCatch","MP4_3",{errorCode:8200,message:"width and height is 0"}),e.setConfig({defaultBitrate:n.bitrate,defaultDefinition:n.definition,url:n.url,codecType:n.codecType}),e.src=n.url,e.play(),!0}return!1};class je extends ae{static generateUUID(){return this.UUIDBase++,this.UUIDPrefix+this.UUIDBase}constructor(e,t){const n=(e=>{var t,n,i;const{playerType:o,el:a,id:r,mode:l,preloadUrlsList:s,url:d,volume:u,playbackRate:c,videoDuration:p,bitrateInfo:v,defaultDefinition:h,playerInitHost:m,shouldUseVideoNormalization:y,defaultBitrate:g,videoOrder:f=[{property:"QualityType",detail:[10,28]},{property:"Bitrate",order:"desc"}],autoPlay:_=!0,playbackAbTestInfo:b=D.Ah,switchPlayerTime:k=(new Date).getTime(),pathId:w,vIndex:P=-1,extInfo:C,isTTP:S,hevcResult:T}=e;if(!H.K._tracker){const{channelInfo:e,regionInfo:t}=B.M.getInstance();H.K.init(W.g,{channel:null==e?void 0:e.channel,channel_domain:null==e?void 0:e.domain,channel_type:null==e?void 0:e.type},{region:null==t?void 0:t.region,user_unique_id:null==t?void 0:t.uid,is_login:null==t?void 0:t.isLogin})}const x=ye(l);B.M.playMode=x,B.M.pageName=w;const M=T||B.M.checkHevcResult(),E=`xgwrapper-${l}-${r}`,I=`${Se}-${r}`,L=$.IH.getPreloadMeta(I),A=((e,t)=>{const n=(null==t?void 0:t.openSrc)||!1,i=(null==e?void 0:e.codecType)||"";return!n||i&&"h265"!==i?"h264":"h265"})(L,M),R=M.open?"h265":"h264",{src:j,bitrate:O=g,definition:V=h,finalBitrateInfo:F,h264BitrateInfo:N,codecType:U}=(0,ke.sE)({hevcTest:M,bitrateInfo:v,videoOrder:f,downgradeUrl:d,codec:A,defaultBitrate:g,duration:p});$.Tz.updateConfig({hevcQuality:M.hevcQualityType,quality:M.qualityType});let G=V;(!v||(null==v?void 0:v.length)<2)&&L&&(G=L.definition);const K=s||[],{group1:J,group2:Y}=m,Z=j.length>0?j[0].src:"",X=xe(Z,J,Y),ee=y,te=X===Ie.uJ?{credentials:"include"}:{},ne=!!_&&Le,ie={mode:l,pathId:w},oe=e=>xe(e.url,J,Y)===Ie.uJ?{credentials:"include"}:{},ae=()=>{if(void 0!==S)try{B.b.asyncMark(S)}catch(e){}};if(Ce&&!Ce.ifAddMp4Preloader&&!M.closePreload){Ce.ifAddMp4Preloader=!0;const{playerPreload:e}=b;window.MultiMediaPreloader=$.IH,null===(t=$.IH.preloader)||void 0===t||t.update(Object.assign({getRequestOptionsCallback:oe,reqOptions:Object.assign({},te)},e)),(0,D.as)((null==e?void 0:e.maxQueueCount)||3),null===(n=$.IH.preloader)||void 0===n||n.on("error",(e=>{Object.assign(ie,{currentTime:0,codec:U,duration:0}),Pe("preload",Object.assign(e,ie))})),H.DS.attachPreloader($.IH.preloader)}const re=F||[];$.IH.changeCodec(R),H.DS.AB_SDK_VERSION=B.M.getAbVersions();const{h264Set:le,h265Set:se}=(0,ke.cU)(v),{gpuScoreData:de,deviceScore:ue,shortData:ce}=B.b.markScore,{vendor:pe,gpu:he}=de,me=B.a.getHevcDisableInfo(),ge={line_app_id:1988,playerCoreVersion:z.Ay.version,pv:Q.Ay.version,vid:r,vtype:"MP4",codec_type:U.indexOf("h265")>-1?"h265":"h264",tag:w,subtag:x,preTag:B.M.prePageName,preSubtag:B.M.prePlayMode,playMode:x,decodeFlag:U.indexOf("h265")>-1,defaultDefinition:G,defaultBitrate:O,switchPlayerTime:k,d_score:ue,vendor:pe,pIndex:P||-1,ext:Object.assign(Object.assign({},C),me),gpu:he,bitrateSet:le,bitrateSetHevc:se,deviceScore:ce,strategyVersion:q.v};let fe;const _e=function(e){const t=Me(e.playerDegrade||0),n=Me(e.playerRetry||0);return t>0||n>0}(b);if("xgplayer"===o){const e=function(e,t){const n=Me(t||0);return e.length<1?"":e.length<2||n<=0?e[0].src:e}(j,b.playerRetry),t=[],n=Ee(L);n&&t.push(z.Ay),"three_column"!==x&&t.push(H.Ay);const i=Object.assign({url:null!=e?e:"",id:E,el:null!=a?a:void 0,autoplay:ne,vid:I,plugins:t,volume:u,playbackRate:c,defaultDefinition:G,defaultBitrate:O,duration:p,definition:re.length>0?{list:re}:{list:[]},H264DefinitionList:"h265"===U&&N?N:[],codecType:U,vodLogOpts:ge,Mp4EncryptPlayer:{reqOptions:Object.assign({},te),getRequestOptionsCallback:oe,closeDowngrade:!_e,minBufferLength:10,maxBufferLength:30,needPreloadRangeList:!0,needPreloadCheck:!0,needAutoBitrate:!0,removeBufferLen:60,resumePlayWaterLevel:0,segmentMinDuration:10,xhrSetup(e){e.withCredentials=!0}},videoConfig:ee&&X?{crossorigin:X}:{}},Ae);if(fe=new Q.Ay(i),n||"h265"!==U||fe.setEventsMiddleware({error:(e,t)=>{if(null==e?void 0:e.player){const{player:n}=e;try{const i=Re(e.player);n.setEventsMiddleware({error:null}),i||t("error",e)}catch(n){t("error",e)}}t("error",e)}}),!M.closePreload&&$.IH.preloader&&(fe.preloader=$.IH.preloader,$.IH.attachPlayer(fe.video),$.IH.addPlayingVid(I)),!M.closePreload&&$.IH.preloader&&K&&K.length>0){const e=Te(K,10);$.IH.clearTask(),$.IH.addPreloadList(e)}fe.on("PRELOAD_INFO",(e=>{const t=(0,D.ZQ)();null==t||t.setPreloadCacheInfo(r,e)})),fe.once("canplay",ae)}else{fe=null==ve?void 0:ve.getDowngradePlayer(),fe.onceEvent("canplay",ae);try{fe.load(Z)}catch(e){console.info("player load error")}if(re&&re.length>0&&(fe.mediaDefinitions=re),fe.element.autoplay=ne,fe.element.volume=u,fe.element.playbackRate=c,ee&&X&&(fe.element.crossOrigin=X),fe.element.style.width="100%",fe.element.style.height="100%",!M.closePreload&&$.IH.preloader&&fe&&(null===(i=$.IH.preloader)||void 0===i||i.attachPlayer(fe.element),$.IH.addPlayingVid(I)),!M.closePreload&&$.IH.preloader&&K&&K.length>0){const e=Te(K,10);$.IH.clearTask(),$.IH.addPreloadList(e)}if("three_column"!==x){const e=new H.DS(ge);fe.logger=e,e.attachPlayer(fe.element)}}return Le=!1,fe})(Object.assign(Object.assign({},e),{isTTP:t,playerType:"xgplayer"}));super(n.video,"xgplayer",n),this.uuid=je.generateUUID()}style(){}addSubtitle(){}mute(e){this.element.muted=e}get currentTime(){var e,t;return null!==(t=null===(e=this.player)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0}set currentTime(e){this.player.currentTime=e}get isCanplay(){return this.player.isCanplay}get duration(){return this.player.duration}get volume(){return this.player.volume}set volume(e){this.player.volume=e}get muted(){var e;return null===(e=this.player)||void 0===e?void 0:e.muted}set muted(e){this.player.muted=e}get playbackRate(){return this.player.playbackRate}set playbackRate(e){this.player.playbackRate=e}bindEvent(e,t){var n;null===(n=this.player)||void 0===n||n.on(e,t)}removeEvent(e,t){var n;null===(n=this.player)||void 0===n||n.off(e,t)}onceEvent(e,t){var n;null===(n=this.player)||void 0===n||n.once(e,t)}access(){}load(e){this.player&&(this.player.src=e)}demux(){}decode(){}render(){}seek(e){if(this.player){const{duration:t}=this.player;this.player.currentTime=t*e}}seekTime(e){this.player&&(this.player.currentTime=e)}play(){return this.player.play()}pause(){var e;null===(e=this.player)||void 0===e||e.pause()}getFullscreen(e){var t;return(0,T.__awaiter)(this,void 0,void 0,(function*(){yield null===(t=this.player)||void 0===t?void 0:t.getFullscreen(e)}))}exitFullscreen(e){var t;return(0,T.__awaiter)(this,void 0,void 0,(function*(){yield null===(t=this.player)||void 0===t?void 0:t.exitFullscreen(e)}))}release(){var e,t;(null===(e=this.player)||void 0===e?void 0:e.destroy)&&(null===(t=this.player)||void 0===t||t.destroy())}updateConfig(){}reset(){this.player.currentTime=0}replay(){var e;null===(e=this.player)||void 0===e||e.replay()}getCurrentDefinition(){var e,t,n,i,o,a;const r={url:"",definition:"",bitrate:-1,duration:-1,codecType:""},l=null===(e=this.player)||void 0===e?void 0:e.curDefinition;return l&&(r.url=null!==(t=null==l?void 0:l.url)&&void 0!==t?t:"",r.definition=null!==(n=null==l?void 0:l.definition)&&void 0!==n?n:"",r.bitrate=null!==(i=null==l?void 0:l.bitrate)&&void 0!==i?i:-1,r.duration=null!==(o=null==l?void 0:l.duration)&&void 0!==o?o:-1,r.codecType=null!==(a=null==l?void 0:l.codecType)&&void 0!==a?a:""),r}}je.UUIDBase=0,je.UUIDPrefix="PLAYER_";const Oe=je;var Ve=n(53701),Be=n(96462);let De=-1;function Fe(e,...t){De<0&&(De=location.search.includes("ttplayer_debug=1")?1:0),De&&console.log(`[MultiMedia1][${e}]`,...t)}const Ne=new $.SN({enableReuse:!1,enableMultiple:!0,minBuffer:0,defaultMSE:!1});let Ue={group1:["v16-webapp.tiktok.com","v16m-webapp.tiktokcdn-us.com"],group2:["v16-webapp-prime.tiktok.com","v16-webapp-prime.us.tiktok.com","v19-webapp-prime.us.tiktok.com"]};function He(e,t){if(!B.M.checkHevcResult().closePreload&&e.length>0){const t=Te(e,10);Ne.preloadResources(t)}}function $e(e){Ne.updatePreloadCodec(e)}const ze=e=>xe(e.url,Ue.group1,Ue.group2)===Ie.uJ?{credentials:"include"}:{};function Qe(e){return e===V.R.ACTIVE}const qe={color:"#fff",backgroundColor:"#2a9d1f",position:"absolute",zIndex:2,top:"30px"},We=(0,o.memo)((0,o.forwardRef)((function({containerId:e="",classList:t=[],player:n,bitrateInfo:i,oncanplay:a,onplay:r,onwaiting:l,onended:s,ontimeupdate:d,onloadstart:u,onloadeddata:c,onVideoPlayEnd:p,onerror:v,onpause:h,onplaying:m,onbreak:y,subtitle:g,teaParams:f,videoDimensionParams:_,mode:b,id:k,containerRef:w},P){const C=(0,o.useMemo)((()=>{let e={};if(!f)return e;const t=null==n?void 0:n.attributes;let i=0;f.forFriend&&(i=2),f.secret&&(i=1);let o="";if(t&&t.src){const e=/^(?:https?:\/\/)?([^\/\s:]+)/,n=t.src.match(e);o=n?n[1]:""}const a={group_id:k,author_id:f.author_id||"",play_mode:ye(b),logo_type:"unwatermarked",item_status:i,play_url:t?t.src:"",host:o,aweme_type:f.aweme_type||0,pic_cnt:f.pic_cnt||0,playlist_id:f.playlist_id||"",popup_type:f.popup_type||"",size:f.size,log_id:f.log_id||"none",is_ad:f.isAd,video_width:_?_.video_width:0,video_height:_?_.video_height:0,video_duration:_?_.video_duration:0};return e=Object.assign({},{cpu_core:Ne.device.cpu,memory_size:Ne.device.memory,HEVC_supported:Ne.device.isHEVCSupported?1:0},a),e}),[f,_,k,b]),S=(0,o.useRef)(0),T=(0,o.useCallback)((()=>n&&f?((e,t)=>{if(!e)return t;if("string"==typeof e&&e.indexOf("xgpreload_config")>-1)return e;const n=Number(e);if(!be.has(n)){const t=String(e).match(/^([a-zA-Z]*)+_([0-9]+)_0$/i);return t?`${t[1]}_${t[2]}p`:`_${e}`}return be.get(n)})(n.curDefinition.definition,f.definition):null),[n,f]),x=(0,o.useCallback)((()=>n&&f?n.curDefinition.bitrate:0),[n,f]),M=(0,o.useCallback)((()=>n&&f?n.curDefinition.codecType:null),[n,f]),E=(0,o.useCallback)((()=>{let e="";if(!f)return e;const t=T();return f.videoQuality&&t&&(e=`${f.videoQuality}_${t}`),e}),[f,T]),I=(0,o.useCallback)((()=>{const e={};if(f){const t=x(),i=M(),o=E(),a=(0,D.ZQ)(),r=(null==n?void 0:n.state)||"default";let l;k&&(l=a.getPreloadCacheInfo(k)),e.video_bitrate=t||f.bitrate,e.video_format=f.format,e.codec_format=i||"h264",e.encoded_type=f.encodedType,e.bitrate_quality=f.videoQuality,e.video_quality=o,e.video_encodeUserTag=f.encodeUserTag,e.original_definition=f.definition,e.preload_size=l?l.byteLength:-1,e.preload_time=l?Math.floor(l.duration):-1,e.player_type=n?n.type:"defaultPlayer",e.video_type="mp4",e.render_state=r}return e}),[f,T,x,M,E,k,n]),L=(0,o.useCallback)((()=>{let e=!1,t=M();return t||(t="h264"),e=!!t&&t.indexOf("h265")>-1,e}),[M]),j=(0,o.useCallback)((()=>{(0,A.uQ)(R.Y.VideoRequest),C&&1!==b&&U.f.event("video_request",Object.assign(Object.assign({},C),{render_state:(null==n?void 0:n.state)||""}))}),[C,b]),O=(0,o.useCallback)((e=>{if(!C||1===b)return;let t;(null==n?void 0:n.attributes)&&(t=n.attributes.error);const i=E(),o=L(),a=Object.assign({},{duration:Math.round(e.duration),error_code:t?String(t.code):"",is_success:t?"0":"1",video_quality:i,is_bytevc1:o?1:0,isExpired:2,isSupportMP4:Number((0,Be.vk)()),render_state:(null==n?void 0:n.state)||""},C);U.f.event("video_request_response",a)}),[C,L,E,b]),B=(0,o.useCallback)((()=>{if(!C||1===b||!n)return;const{attributes:e}=n;if(e){const{readyState:t,seeking:n}=e;S.current=t<1?1:n?2:0}U.f.event("video_block_start",Object.assign(Object.assign({},C),{block_type:S.current}))}),[C,b]),N=(0,o.useCallback)((e=>{if(!C||1===b||!n)return;const t=I(),i=L();let o,a=0;n.attributes&&(o=n.attributes.error,a=n.attributes.duration);let r=e.code||0,l=e.message||"";r<=0&&o&&(r=o.code,l=o.message);const s=Object.assign({},t,{error_code:String(r),error_info:l,is_bytevc1:i?1:0,duration:Math.round(1e3*a),isExpired:e.isExpired||0,isSupportMP4:Number((0,Be.vk)()),is_before:0===e.status?0:1,retry_c:e.retryCount||0,retry_l:e.retryList||[]},C);U.f.event("video_play_failed",s)}),[C,I,L,b]),H=(0,o.useCallback)((e=>{if(null==y||y(),!C||1===b)return;const t=I(),i=L();let o,a,r=0;const l=e.currentTime;let s=0,d=1,u=!1;const c=e.duration-e.pauseDuration;(null==n?void 0:n.attributes)&&(o=n.attributes.error,r=n.attributes.duration||0,s=n.attributes.readyState,a=n.attributes.buffered,d=n.attributes.volume,u=n.attributes.muted);const v=Math.min(c,1e3*r);let h=x();h<=0&&(h=f&&f.bitrate?f.bitrate:0);const m=h/8*(v/1e3),g=Object.assign({},t,{is_success:o?"0":"1",video_duration:Math.round(1e3*r),play_duration:Math.round(1e3*l),buffering:s<=2?1:0,duration:Math.round(c),wait_duration:0,cur_cache_duration:_e(a),local_time_ms:Date.now(),volume_level:d,volume_change:0,muted:u?1:0,click_mute:0,session_order:0,play_size:Math.round(m),data_player_type:2,cache_size:0,cache_duration:0,cdn_size_video:0,is_bytevc1:i?1:0,drop_frame:0,total_play_frame:0,drop_frame_rate:0,drop_frame_duration:0},C),_=function(e){var t,n;const i={isFinish:0,pt:0,vt:0,firstframeDuration:100,errorCode:0,errorMessage:"",codecType:"h264",resolution:"",url:""},o=null===(n=null===(t=null==e?void 0:e.player)||void 0===t?void 0:t.plugins)||void 0===n?void 0:n.xgVodLogger;if(null==o?void 0:o.getFinalInfo){const e=o.getFinalInfo();return Object.assign(Object.assign({},i),e)}return i}(n),w=Object.assign(Object.assign({vid:k,playPos:Math.round(1e3*l),stayDuration:0,videoQuality:1},_),{logid:(null==f?void 0:f.log_id)||"nonw"});null==p||p(w),U.f.event("video_play_end",g)}),[C,I,L,x,f,b]),$=(0,o.useCallback)((e=>{if((0,A.uQ)(R.Y.VideoFirstFrame),!C||1===b)return;const t=Object.assign({},{feed_total:e.duration},C),n=(0,A.xt)();U.f.event("first_feed_show_time",Object.assign(Object.assign({},t),n))}),[C,b]),z=(0,o.useCallback)((e=>{if(!C||1===b)return;let t=0,o=!1;(null==n?void 0:n.attributes)&&(t=n.attributes.duration,o=n.attributes.muted);const a=L(),r=I(),l=Object.assign({},r,{duration:Math.round(e.duration),is_bytevc1:a?1:0,video_duration:Math.round(1e3*t),muted:o?1:0,bitrate_set:ge(i),quality_bitrate:fe(i),duration_from_load:Math.round((null==e?void 0:e.durationFromLoaded)||0),duration_with_load:Math.round((null==e?void 0:e.durationWithLoaded)||0),is_same:0,retry_c:e.retryCount||0,retry_l:e.retryList||[]},C);U.f.event("video_play_quality",l)}),[C,L,i,I,b]),Q=(0,o.useCallback)((e=>{if(!C||1===b||(null==n?void 0:n.state)!==V.R.ACTIVE)return;const t=I();let i=0;(null==n?void 0:n.attributes)&&(i=n.attributes.currentTime);const o=L(),a=Object.assign({},t,{duration:Math.round(e.duration),is_bytevc1:o?1:0,position:Math.round(1e3*i),should_filter:"0",droppedRate:0,end_type:0,block_type:S.current},C);U.f.event("video_block",a)}),[C,L,I,b]),q=(0,o.useCallback)((e=>{e.preventDefault()}),[]),W=(0,o.useCallback)((()=>{(0,A.uQ)(R.Y.VideoCanPlay),null==a||a()}),[a]),G=(0,o.useCallback)((e=>{null==u||u(e)}),[u]),K=(0,o.useCallback)((e=>{null==c||c(e)}),[c]),J=(0,o.useCallback)((e=>{null==r||r(e)}),[r]),Y=(0,o.useCallback)((e=>{null==l||l(e)}),[l]),Z=(0,o.useCallback)((e=>{null==s||s(e)}),[s]),X=(0,o.useCallback)((()=>{null==d||d()}),[d]),ee=(0,o.useCallback)((e=>{null==v||v(e)}),[v]),te=(0,o.useCallback)((e=>{null==h||h(e)}),[h]),ne=(0,o.useCallback)((e=>{null==m||m(e)}),[m]);return(0,o.useEffect)((()=>()=>{(null==n?void 0:n.metrics)&&n.metrics.stop()}),[k]),(0,o.useEffect)((()=>{if(null==n?void 0:n.metrics)return n.metrics.bind("PlayEnded",H),()=>{n.metrics&&n.metrics.clear("PlayEnded")}}),[H]),(0,o.useEffect)((()=>{if(null==n?void 0:n.metrics)return n.metrics.on("VideoRequest",j),n.metrics.on("VideoRequestResponse",O),n.metrics.on("BlockStart",B),n.metrics.on("Block",Q),n.metrics.on("PlayQuality",z),n.metrics.on("PlayFailed",N),n.metrics.on("FirstFrame",$),n.element&&n.element.addEventListener("contextmenu",q),n.event&&(n.event.on("canplay",W),n.event.on("play",J),n.event.on("waiting",Y),n.event.on("ended",Z),n.event.on("timeupdate",X),n.event.on("error",ee),n.event.on("pause",te),n.event.on("playing",ne),n.event.on("loadstart",G),n.event.on("loadeddata",K)),()=>{n.metrics&&(n.metrics.off("VideoRequest",j),n.metrics.off("VideoRequestResponse",O),n.metrics.off("BlockStart",B),n.metrics.off("Block",Q),n.metrics.off("PlayQuality",z),n.metrics.off("PlayFailed",N),n.metrics.off("FirstFrame",$),n.element&&n.element.removeEventListener("contextmenu",q),n.event&&(n.event.off("canplay",W),n.event.off("play",J),n.event.off("waiting",Y),n.event.off("ended",Z),n.event.off("timeupdate",X),n.event.off("error",ee),n.event.off("pause",te),n.event.off("playing",ne),n.event.off("loadstart",G),n.event.off("loadeddata",K)))}}),[J,W,Y,Z,X,ee,te,ne,G,K,j,O,B,Q,z,N,$,q,a,u,c]),(0,F.FD)("div",{id:e,className:t.join(" "),ref:w,children:[g?(0,F.Y)("track",{default:!0,kind:"subtitles",srcLang:g.language,src:g.url}):null,De>0?(0,F.FD)("div",{style:qe,children:[null==n?void 0:n.uuid,"_",null==n?void 0:n.state,"_before"]}):null]})})));var Ge=n(67353);const Ke={Chrome:{cpuCore:6,dScore:0,score:0,gpuScore:6.5,hevcQualityType:28,checkLevel:2}},Je="PlayerLife",Ye="PlayerCall";var Ze;!function(e){e.NoInteract="failed because the user didn't interact with the document first.",e.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context",e.AbortRequest="new load request"}(Ze||(Ze={}));const Xe=(e,t)=>{var n,i,o,a,r,l,s,d,u,c,p,v;const h=null!==(i=null===(n=null==e?void 0:e.element)||void 0===n?void 0:n.error)&&void 0!==i?i:null,m=null===(o=null==e?void 0:e.element)||void 0===o?void 0:o.buffered,y=null==e?void 0:e.currentTime,g=null==e?void 0:e.type,f=null==e?void 0:e.curDefinition;return{buffered:m,currentTime:y,ended:null===(a=null==e?void 0:e.element)||void 0===a?void 0:a.ended,currentSrc:null!=t?t:null===(r=null==e?void 0:e.element)||void 0===r?void 0:r.currentSrc,duration:null==e?void 0:e.duration,readyState:null===(l=null==e?void 0:e.element)||void 0===l?void 0:l.readyState,networkState:null===(s=null==e?void 0:e.element)||void 0===s?void 0:s.networkState,error:h?{code:null==h?void 0:h.code,message:null!==(u=null===(d=null==e?void 0:e.element)||void 0===d?void 0:d.error)&&void 0!==u?u:(null==h?void 0:h.message)||"UNKNOWN_ERROR_MESSAGE",MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4}:null,playerType:g,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted,videoBitrate:null==f?void 0:f.bitrate,videoQuality:null==f?void 0:f.definition,codecType:null!==(c=null==f?void 0:f.codecType)&&void 0!==c?c:"h264",play_url:null!==(v=null===(p=null==e?void 0:e.element)||void 0===p?void 0:p.currentSrc)&&void 0!==v?v:t}},et=(0,o.memo)((0,o.forwardRef)((function({id:e,url:t,mode:n,muteSetting:i,playProgress:a,duration:r,playbackRate:l=1,onLoadStart:s,onLoadedData:d,onCanPlay:u,onPause:c,onPlay:p,onPlaying:v,onTimeUpdate:h,onWaiting:m,onEnded:g,onError:f,onUnmount:_,onVideoChange:b,onBreak:k,onVideoVolumeChange:w,onVideoPlayEnd:P,onAutoplayPrevented:C,subtitleStruct:S,subtitleList:x,curSubtitle:M,onSubtitleCallback:E=e=>{},bitrateInfo:I,defaultDefinition:L,preloadUrlsList:j,preloader:O,defaultBitrate:z=-1,playerInitHost:Q,teaParams:W,autoPlay:G,autoReplay:K=!0,size:J,pathId:Y="",metrics:Z,hevcTest:X={open:!1,qualityType:20,closePreload:!1},playbackAbTestInfo:ee=D.Ah,isTTP:te,videoDimensionParams:ne,vIndex:ie=-1,extInfo:oe={},renderState:ae=V.R.ACTIVE},re){const[le,se]=(0,o.useState)(null),de=(0,o.useRef)(null),ue=(0,o.useRef)((new Date).getTime()),ce=(0,o.useRef)(!1),pe=(0,o.useRef)(0),ve=(0,o.useRef)(null),he=(0,o.useRef)(),me=(0,o.useRef)(null),ge=(0,o.useRef)(ae);!function(e){e&&(Ue=e)}(Q);const[fe,_e]=(0,o.useState)(!1),be=(0,y.i3)(),we=1===n?i:i||be;const Se=(0,y.R4)(),Te=(0,y.S4)().setMute,Le=ye(n);B.M.playMode=Le,B.M.pageName=Y;const Ae=B.M.checkHevcResult(),je=(0,o.useCallback)(((e,t)=>{var i,o,a,r,l,s;const d={mode:n,pathId:Y};if("MP4_2"===e){if(ve.current)try{const e=null===(i=ve.current)||void 0===i?void 0:i.element;Object.assign(d,{currentTime:null!==(o=null==e?void 0:e.currentTime)&&void 0!==o?o:0,codec:null!==(l=null===(r=null===(a=ve.current)||void 0===a?void 0:a.curDefinition)||void 0===r?void 0:r.codecType)&&void 0!==l?l:"",duration:null!==(s=null==e?void 0:e.duration)&&void 0!==s?s:0})}catch(e){console.error("playCatch error")}Pe("running",Object.assign(t,d))}(0,Ge.AX)(t)&&$e("h264")}),[e,n,Y,me]);(0,o.useEffect)((()=>{B.M.setHevcEffectiveConditions(Ke)}),[]),(0,o.useEffect)((()=>{Fe(Ye,"changePreloadCodec",Ae.open),$e(Ae.open?"h265":"h264"),$.Tz.updateConfig({hevcQuality:Ae.hevcQualityType,quality:Ae.qualityType})}),[e,Ae.open,Ae.openSrc]);const Be=(0,o.useCallback)((e=>{var t;const n=e.player;if(!n)return;const i=n.element;(0,Ge.y8)(i)&&(Re(n),$e("h264")),null===(t=ve.current)||void 0===t||t.off("loadedmetadata",Be)}),[e,n,Y,me]),De=t=>{Fe(Ye,"handlerPreloadInfoReady",t),(0,D.ZQ)().setPreloadCacheInfo(e,t)},qe=(0,o.useMemo)((()=>x&&x.length>0?x:[]),[x]),Ze=(0,o.useMemo)((()=>j.length),[e,j]);(0,o.useEffect)((()=>{const{playerPreload:t}=ee,n=Me((null==t?void 0:t.vid)||"v0");Fe(Je,"addPreloadList",e,j.map((e=>e[0].id))),n>0&&He(j)}),[e,Ze]),(0,o.useEffect)((()=>{var e,t,n,i,o;qe.length>0?(he.current?he.current.setSubTitles(qe):(he.current=new $.SX({subTitlesList:qe}),null===(e=he.current)||void 0===e||e.on("update",(e=>{E(e)})),null===(t=he.current)||void 0===t||t.on("change",(e=>{E(e)})),null===(n=he.current)||void 0===n||n.on("error",(e=>{E(e)}))),ve.current&&he.current.attach(null===(i=ve.current)||void 0===i?void 0:i.element)):null===(o=he.current)||void 0===o||o.switchOff()}),[qe,e]),(0,o.useEffect)((()=>{var e,t;M?null===(t=he.current)||void 0===t||t.switch(M):null===(e=he.current)||void 0===e||e.switchOff()}),[M,e]),(0,o.useEffect)((()=>{ve.current&&(null==Z||Z.setPlayerType(1))}),[Z,le]),(0,o.useEffect)((()=>{var t,n;Fe(Je,"renderState",null===(t=ve.current)||void 0===t?void 0:t.uuid,e,ae,we,Se);let i=ae;ve.current?(ae===V.R.BACKUP&&(i=V.R.RETAIN),Ne.updatePlayer(ve.current,i),Qe(ge.current)&&G&&(ve.current.play(),ve.current.forceAutoplay=!1),i!==V.R.ACTIVE&&ve.current.pause()):ae===V.R.RETAIN&&(i=V.R.BACKUP),Fe(Je,"renderStateChange",e,null===(n=ve.current)||void 0===n?void 0:n.uuid,`renderState:${ae} state:${i} muted:${we} volume:${Se} autoplay:${G}`),ge.current=i}),[ae]),(0,o.useEffect)((()=>{var n;if(!le){Ge.bt.hevcTest=X;const i={vIndex:ie,extInfo:Object.assign(Object.assign({},oe),{log_id:(null==W?void 0:W.log_id)||"none",is_ad:(null==W?void 0:W.isAd)?1:0})},o=function(e=[],t=0,n,i,o=0,a=!0,r,l,s,d,u,c,p,v,h){const{channelInfo:m,regionInfo:y}=B.M.getInstance(),g=d,f=(null==p?void 0:p.open)?"h265":"h264";let _="",b="",k="",w=!1;const P=t,C=`TT-vCache-${i}`,S=$.IH.getPreloadMeta(C);_=function(e){return Fe("getDefaultDefinition",e),e&&e.videoQuality&&e.definition?`${e.videoQuality}_${e.definition.substring(0,e.definition.length-1)}_0`:"unknown_definition_from_xgpreload_config"}(r);const T=function(e,t){return e&&0!==e.length?e.map((e=>{var t,n,i,o,a,r;const l=(null===(t=e.PlayAddr)||void 0===t?void 0:t.UrlList)||[];return{bitrate:e.Bitrate,size:(null===(n=e.PlayAddr)||void 0===n?void 0:n.DataSize)||0,width:(null===(i=e.PlayAddr)||void 0===i?void 0:i.Width)||0,height:(null===(o=e.PlayAddr)||void 0===o?void 0:o.Height)||0,fileId:(null===(a=e.PlayAddr)||void 0===a?void 0:a.FileHash)||"",uri:(null===(r=e.PlayAddr)||void 0===r?void 0:r.Uri)||"",codecType:(s=e.CodecType,s.includes("h265")?"h265":"h264"),gearName:e.GearName,definition:e.GearName,qualityType:e.QualityType,mvmaf:e.MVMAF||"",url:l.map((e=>({src:e}))),vtype:"MP4"};var s})):[{codecType:"h264",url:t.url?[{src:t.url}]:[],vtype:"MP4",qualityType:t.qualityType||0,definition:t.defaultDefinition||"default",bitrate:t.defaultBitrate||0}]}(e,{defaultBitrate:t,defaultDefinition:n,url:d});Fe("generatePlayerConfig",C,T,e);const{h264Set:x,h265Set:M}=(0,ke.cU)(e),E=g;let I="";g&&(I=xe(g,Ue.group1,Ue.group2));const L=I===Ie.uJ?{credentials:"include"}:{},A={channel:null==m?void 0:m.channel,channel_domain:null==m?void 0:m.domain,channel_type:null==m?void 0:m.type};b=(null==y?void 0:y.region)||"",k=(null==y?void 0:y.uid)||"",w=(null==y?void 0:y.isLogin)||!1;const R=(null==h?void 0:h.playerPreload)||{},j=(null==u?void 0:u.extInfo)||{},O=B.a.getHevcDisableInfo();return{enableSubtitle:!0,enablePreloader:!0,enableLogger:"three_column"!==B.M.playMode,preloader:Object.assign(Object.assign({minBufferLength:10,preloadCacheType:1,preloadMaxCacheCount:5,preloadTime:10,preloadSize:209715,segmentMinDuration:10,reqOptions:L},R),{getRequestOptionsCallback:ze}),mp4EncryptPlayer:{closeDowngrade:!1,minBufferLength:10,maxBufferLength:30,needPreloadRangeList:!0,needPreloadCheck:!0,needAutoBitrate:!0,removeBufferLen:60,resumePlayWaterLevel:0,segmentMinDuration:10,reqOptions:L,getRequestOptionsCallback:ze},logger:{appId:548444,line_app_id:1988,playerCoreVersion:"",codec_type:f,tag:B.M.pageName,preTag:B.M.prePageName,preSubtag:B.M.prePlayMode,subtag:B.M.playMode,vid:i,region:b,webId:k,isLogin:w,channelConfig:A,switchPlayerTime:v,bitrateSet:x,bitrateSetHevc:M,pIndex:(null==u?void 0:u.vIndex)||-1,ext:Object.assign(Object.assign(Object.assign({},j),O),{log_id:(null==r?void 0:r.log_id)||"",is_ad:(null==r?void 0:r.isAd)?1:0}),deviceScore:B.b.shortData,strategyVersion:q.v},video:{codecType:f,defaultBitrate:P,defaultDefinition:_,definitionList:[],duration:o,autoplay:a,volume:null!=l?l:.7,muted:s||!1,vqscore:null!=c?c:0,mvmaf:""},extra:{url:g,actualUrl:E,vid:C,ignores:["play","start"],reqAuth:I,closeMSE:!Ee(S)},hevcResult:p,bitrateList:T,bitrateAdapter:{hevcQuality:(null==p?void 0:p.hevcQualityType)||28,quality:(null==p?void 0:p.qualityType)||20}}}(I,z,L,e,r,G,W,Se,we,t,i,0,Ae,ue.current);de.current=o;const a=Ne.usePlayer(o,ge.current);Ne.mountDom(a,me.current),He(j),Fe(Je,"usePlayer",a.uuid,e,`autoPlay:${G} volume:${Se} mute:${we} playMode:${Le}`,o,Le,Y,Ae),a.on("playCatch",je),a.on(Ie.Wu,De),a&&(ve.current=a,null===(n=he.current)||void 0===n||n.attach(a.player),se("xgplayer")),ee.playerLogger&&H.DS.setCustomTracker({event:(e,t)=>{U.f.event(e,t)}}),Ne.setCustomTracker({event:(e,t)=>{Fe("VodLogger",e,t),U.f.event(e,t)}})}}),[J,e,t,n,O,Te,L,te]),(0,o.useEffect)((()=>{if(!le)return;const{mp4Preloader:e}=Ce;if(e){const t=e=>{var t,n;const i={task_type:2,cdn_size:e.len,cdn_speed:e.speed,project:"webapp-desktop",is_hevc:null!==(n=null===(t=ve.current)||void 0===t?void 0:t.curDefinition.codecType)&&void 0!==n?n:""};(0,Ve.k)(i),null==Z||Z.videoQualityReport.msePlayerCacheUpdate(e.len)};return e.on("real_time_speed",t),()=>{e.off("real_time_speed",t)}}}),[le,Z]),(0,o.useEffect)((()=>{var e;if(!le)return;const t=ve.current;if(ve.current&&t instanceof Oe){const t=e=>{const t={task_type:1,cdn_size:e.cdn_size,cdn_speed:e.cdn_speed,project:"webapp-desktop"};(0,Ve.k)(t),null==Z||Z.videoQualityReport.msePlayerCacheUpdate(e.cdn_size)};return null===(e=ve.current)||void 0===e||e.on("prf_data_size",t),()=>{var e;null===(e=ve.current)||void 0===e||e.off("prf_data_size",t)}}}),[le,Z]);const et=(0,o.useCallback)((e=>{null==p||p(e)}),[p]),tt=(0,y.VN)();(0,o.useImperativeHandle)(re,(()=>{const i=ve.current;return{play:()=>(0,T.__awaiter)(this,void 0,void 0,(function*(){var e;if(Fe(Ye,"play",null===(e=ve.current)||void 0===e?void 0:e.uuid,ge.current,!Qe(ge.current)),!ve.current||!Qe(ge.current))return Promise.resolve();try{const e=null==i?void 0:i.player;(null==e?void 0:e.isCanplay)?yield null==i?void 0:i.play():null==i||i.once("canplay",(()=>(0,T.__awaiter)(this,void 0,void 0,(function*(){Qe(ge.current)&&(yield null==i?void 0:i.play())}))))}catch(e){console.info("Video play error: ",e)}})),pause:()=>{var t,i;Fe(Ye,"pause",null===(t=ve.current)||void 0===t?void 0:t.uuid,ge.current);try{null===(i=ve.current)||void 0===i||i.pause(),N.A.emit("video_pause",{itemId:e,playMode:n})}catch(e){console.info("Video pause error: ",e)}},seek:t=>{if(i){N.A.emit("video_seek",{itemId:e,playMode:n});const o=i.duration;o&&ve.current&&ve.current.seek(o*t)}},seekTime:e=>{null==i||i.seek(e)},onSeeked:e=>{null==i||i.on("seeked",e)},onSeeking:e=>{null==i||i.on("seeking",e)},onTimeUpdate:e=>{null==i||i.on("timeupdate",(()=>{var t,n;const o=null!==(t=null==i?void 0:i.currentTime)&&void 0!==t?t:0,a=null!==(n=null==i?void 0:i.duration)&&void 0!==n?n:0;e(o/a,o,a)}))},onCanPlay:e=>{null==i||i.on("canplay",e)},getFullscreen:e=>(0,T.__awaiter)(this,void 0,void 0,(function*(){yield null==i?void 0:i.enterFullscreen(e)})),exitFullscreen:e=>(0,T.__awaiter)(this,void 0,void 0,(function*(){yield null==i?void 0:i.exitFullscreen(e)})),getPlayerAttributes:()=>Xe(i,t),replay:()=>{(null==i?void 0:i.replay)&&(null==i||i.replay())},getPlaybackQuality:()=>{var e;return null===(e=null==i?void 0:i.element)||void 0===e?void 0:e.getVideoPlaybackQuality()},updatePlayer:e=>{ve.current&&Ne.updatePlayer(ve.current,ae)},get renderState(){return ge.current}}}));const nt=(0,o.useCallback)(((e=0)=>(0,T.__awaiter)(this,void 0,void 0,(function*(){var t,n,i,o,a;if(Qe(ge.current)&&!(e>=3))try{const e=null===(t=ve.current)||void 0===t?void 0:t.player;(null==e?void 0:e.isCanplay)?yield null===(n=ve.current)||void 0===n?void 0:n.play():null===(i=ve.current)||void 0===i||i.on("canplay",(()=>(0,T.__awaiter)(this,void 0,void 0,(function*(){var e;Qe(ge.current)&&(yield null===(e=ve.current)||void 0===e?void 0:e.play())}))))}catch(t){const n=null!==(o=t.message)&&void 0!==o?o:"",i=n.indexOf("new load request")>-1,r=null!==(a=n.match("failed because the user didn't interact with the document first."))&&void 0!==a?a:n.match("The request is not allowed by the user agent or the platform in the current context");if(i)return;r?(Te(!0),setTimeout((()=>{nt(e+1)}),0)):nt(e+1)}}))),[Te]),it=(0,o.useCallback)((()=>{var t,i;try{(null===(t=ve.current)||void 0===t?void 0:t.replay)&&(null===(i=ve.current)||void 0===i||i.replay()),N.A.emit("video_replay",{itemId:e,playMode:n})}catch(e){setTimeout((()=>{Te(!0)}),0)}}),[Te,e,n]);(0,o.useEffect)((()=>{le&&ve.current&&(ve.current.volume=Se,ve.current.muted=we,ve.current.playbackRate=l,null==w||w(we?0:Se))}),[le,we,l,Se,w]),(0,o.useEffect)((()=>{const t=ve.current;if(!le||!t||!Qe(ge.current))return;const i="undefined"!=typeof document&&!document.hidden;G&&le&&(8===n||i)&&nt(),Fe("videoCanplay",e,t.uuid,t.currentTime,a,`videoCanplay:${fe} autoPlay:${G}`),4!==n&&t&&Math.abs(t.currentTime-a)>.2&&(t instanceof Oe?fe&&t.seek(a):t.seek(a))}),[fe,G,a,nt,le,n]);const ot=(0,o.useCallback)((e=>{le&&(null==m||m(e))}),[le,m]),at=(0,o.useCallback)((()=>{le&&(null==k||k())}),[le,k]),rt=(0,o.useCallback)((e=>{le&&(null==g||g(e),K&&it())}),[le,g,it,K]),lt=(0,o.useCallback)((e=>{null==s||s(e)}),[s]),st=(0,o.useCallback)((e=>{null==d||d(e)}),[d]),dt=(0,o.useCallback)((()=>{null==h||h()}),[h]),ut=(0,o.useCallback)((e=>{null==f||f(e)}),[f]),ct=(0,o.useCallback)((()=>{null==u||u(),_e(!0)}),[u]),pt=(0,o.useCallback)((e=>{null==c||c(e)}),[c]),vt=(0,o.useCallback)((e=>{null==v||v(e)}),[v]),ht=(0,o.useMemo)((()=>"xgplayer"===le?"autoplay_was_prevented":"AUTOPLAY_PREVENTED"),[le]),mt=(0,o.useCallback)((t=>{var i;Fe(Ye,"handlePrevention",null===(i=ve.current)||void 0===i?void 0:i.uuid,e,ge.current),le&&setTimeout((()=>{try{if(!Qe(ge.current))return;if(pe.current>=3)return void(null==C||C());if("xgplayer"===le||!(null==t?void 0:t.errorName)||"NotAllowedError"===(null==t?void 0:t.errorName)){if(8===n)return void pt(t);Te(!0);const e=ve.current;ve.current&&(ve.current.muted=!0),null==e||e.play()}pe.current+=1}catch(e){console.error("handle autoplay error",e)}}),0)}),[ht,le,n]);return(0,o.useEffect)((()=>{if(!le)return;const e=ve.current;return null==e||e.on(ht,mt),()=>{var e;(null===(e=ve.current)||void 0===e?void 0:e.element)&&ve.current.off(ht,mt)}}),[le,mt,ht]),(0,o.useEffect)((()=>{if(le)return()=>{var e;const t=ve.current;Fe(Je,"release off events",null===(e=ve.current)||void 0===e?void 0:e.uuid),t&&(t.off("playCatch",je),t.off(Ie.Wu,De))};(e=>{var t;const{playerPreload:n}=e;window.MultiMediaPreloader=$.IH,null===(t=$.IH.preloader)||void 0===t||t.update(Object.assign({getRequestOptionsCallback:ze},n)),(0,D.as)((null==n?void 0:n.maxQueueCount)||3)})(ee)}),[le,je]),(0,o.useEffect)((()=>{var t,n;Fe(Ye,"playing",null===(t=ve.current)||void 0===t?void 0:t.uuid,e,ge.current,`playing:${tt} isPausedForced:${ce.current}`),tt?ce.current&&G&&(ce.current=!1,nt()):(ce.current=!0,null===(n=ve.current)||void 0===n||n.pause())}),[G,tt,nt]),(0,o.useEffect)((()=>()=>{var e,t,n,i,o;const a=null===(t=null===(e=ve.current)||void 0===e?void 0:e.element)||void 0===t?void 0:t.getVideoPlaybackQuality();if(a){null==Z||Z.updateFrameInfo({drop_frame:a.droppedVideoFrames,total_play_frame:a.totalVideoFrames,drop_frame_rate:a.droppedVideoFrames/a.totalVideoFrames,drop_frame_duration:a.creationTime});const e=null!==(o=null===(i=null===(n=ve.current)||void 0===n?void 0:n.curDefinition)||void 0===i?void 0:i.codecType)&&void 0!==o?o:"";Ge.bt.setDropRate(a.droppedVideoFrames,a.totalVideoFrames,e)}}),[]),(0,o.useEffect)((()=>()=>{(0,A.uQ)(R.Y.PlayerDestroy),_(Xe(ve.current,t))}),[]),(0,o.useEffect)((()=>{var i;return Fe(Je,"releasePlayer0",null===(i=ve.current)||void 0===i?void 0:i.uuid,e),()=>{var i,o,a,r,l,s;null===(i=Ce.mp4Preloader)||void 0===i||i.cancelLoading(),null===(a=null===(o=ve.current)||void 0===o?void 0:o.metrics)||void 0===a||a.stop(),Fe(Je,"releasePlayer1",null===(r=ve.current)||void 0===r?void 0:r.uuid,e,ge,t,n),Ne.releasePlayer(ve.current),null===(l=he.current)||void 0===l||l.detach(),null===(s=he.current)||void 0===s||s.destroy(),he.current=null,_e(!1),ve.current=null,null==b||b(!1)}}),[]),(0,F.Y)(We,{containerId:`xgwrapper-${n}-${e}`,classList:["xgplayer-container","tiktok-web-player"],player:ve.current,containerRef:me,bitrateInfo:I,oncanplay:ct,onplay:et,onwaiting:ot,onended:rt,onbreak:at,ontimeupdate:dt,onerror:ut,onpause:pt,onplaying:vt,onloadstart:lt,onloadeddata:st,onVideoPlayEnd:P,subtitle:4===n&&S?S:void 0,teaParams:W,videoDimensionParams:ne,mode:n,id:e})})));var tt=n(64116),nt=n(33805),it=n(53438),ot=n(48615),at=n(49057),rt=n(99282),lt=n(52333),st=n(32098);let dt=null,ut=null;const ct=(0,o.memo)((0,o.forwardRef)((function({poster:e,videoCover:t,lazyLoading:n=!0,horizontal:d,playUrl:b,id:w,teaParams:P,index:C,mode:S,itemMute:M,desc:I,topSearchQueryAfterViewWord:F,duration:N,playbackRate:U=1,onVideoPause:H=L(),onVideoPlaying:$=L(),onVideoPlay:z,onVideoEnded:Q,onVideoError:q,onTimeUpdate:W,onLoadStart:G,onLoadedData:K,onVolumeChange:J,onVideoUnmount:Y,onUserHandlePlayVideo:Z,onUserHandlePauseVideo:X,onVideoInit:ee=L(),e2eTag:te,subtitleStruct:ne,subtitleList:ie,curSubtitle:oe,onSubtitleCallback:ae,disableDownload:re=!0,volumeInfo:le=L(),adaptBitrateVid:se,bitrateInfo:de,bitrate:ue,posterStyle:ce,playModeForTea:pe,autoPlay:ve=!0,autoReplay:he=!0,size:me,playerStyle:ye,fetchPriority:ge="auto",renderState:fe=V.R.ACTIVE},_e){var be,ke,we,Pe,Ce;const Se=(0,p.Ul)(),Te=null!==(be=(0,p.eu)())&&void 0!==be&&be,xe=(0,p.xI)(),Me=(0,r.Nj)(l.Gs),Ee=(0,r.Nj)(s.AU),Ie=(0,o.useRef)(null),Le=(0,o.useRef)(null),Ae=(0,p.nr)(),Re=(0,y.S4)(),je=(0,a.HL)(),[Oe,Ve]=(0,o.useState)(!1),[Be,De]=(0,o.useState)(b),[Fe,Ne]=(0,o.useState)(!1),Ue=(0,o.useRef)(null),He=(0,x.w)(lt.k),$e=(0,a.qZ)(),ze=(0,r.Nj)(v.V),Qe=null!=pe?pe:S;if(dt||(dt=(0,j.V)(),dt&&(B.M.getInstance().channelInfo={domain:dt.tea,channel:dt.teaChannel,type:null!==(ke=dt.teaChannelType)&&void 0!==ke?ke:"tcpy"})),!ut&&(ut=(0,O.x)(),ut)){const{user:e,wid:t,region:n}=ut;B.M.regionInfo={region:n,uid:t,isLogin:Boolean(e)}}const qe=(0,p.w)(C,S,w),We=[V.R.ACTIVE,V.R.BACKUP,V.R.RETAIN].includes(fe)&&0===Qe;(0,o.useEffect)((()=>{var e;let t=fe;Ie.current&&t===V.R.BACKUP?t=V.R.RETAIN:Ie.current||t!==V.R.RETAIN||(t=V.R.BACKUP),null===(e=Ue.current)||void 0===e||e.setRenderState(t||"")}),[fe]),(0,o.useEffect)((()=>{if(Se){const{index:e}=Se;if(E()(e)&&(C-e<0||C-e>=3))return void(Fe&&(Ne(!1),Ue.current=null))}if(!Fe){const e=new u("webapp-desktop",{playReport:Me,experienceReport:Ee});Ne(!0),Ue.current=e}}),[Fe,Se,C,Me,Ee]);const Ge=(0,o.useCallback)((()=>{var e,t;try{null==Z||Z(),null===(t=null===(e=Ie.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e)}catch(e){}}),[]),Ke=(0,o.useCallback)((()=>{var e,t;null===(t=null===(e=Ie.current)||void 0===e?void 0:e.pause)||void 0===t||t.call(e),null==X||X()}),[]);(0,o.useEffect)((()=>{const{id:e,mode:t}=null!=Se?Se:{};e===w&&S===t||De(b)}),[Se,w,S,b]),(0,o.useEffect)((()=>{qe||Ve(!1)}),[qe]),(0,o.useImperativeHandle)(_e,(()=>({play:e=>{Ge(),Le.current=!0,e&&Me.triggerResume({enter_method:"click_resume",playMode:S})},pause:()=>{Ke(),Le.current=!1,Me.triggerPause({enter_method:"click_pause",playMode:Qe,currentBackendSourceEventTracking:P.currentBackendSourceEventTracking})},seek:e=>{var t;null===(t=Ie.current)||void 0===t||t.seek(e)},seekTime:e=>{var t;null===(t=Ie.current)||void 0===t||t.seekTime(e)},onSeeked:e=>{var t;null===(t=Ie.current)||void 0===t||t.onSeeked(e)},onSeeking:e=>{var t;null===(t=Ie.current)||void 0===t||t.onSeeking(e)},onTimeUpdate:e=>{var t;null===(t=Ie.current)||void 0===t||t.onTimeUpdate(e)},getFullscreen:e=>{var t;null===(t=Ie.current)||void 0===t||t.getFullscreen(e)},exitFullscreen:e=>{var t;null===(t=Ie.current)||void 0===t||t.exitFullscreen(e)},replay:()=>{var e;null===(e=Ie.current)||void 0===e||e.replay()},updatePlayer:e=>{var t;null===(t=Ie.current)||void 0===t||t.updatePlayer(e)},get currentTime(){var e,t;return null!==(t=null===(e=Ie.current)||void 0===e?void 0:e.getPlayerAttributes().currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=Ie.current)||void 0===e?void 0:e.getPlayerAttributes().duration)&&void 0!==t?t:0},get currentCanPlay(){return qe&&Oe}})),[Oe,qe,Ke,Ge,Me,Qe,P.currentBackendSourceEventTracking]);const Je=(0,h.jj)();(0,o.useEffect)((()=>{var e;const t=null===Le.current||Le.current,{ended:n}=(0,m.L$)(null===(e=Ie.current)||void 0===e?void 0:e.getPlayerAttributes());Je&&t&&ve&&(!n||he)||8===S&&t?Ge():(Ke(),qe&&!Je&&Me.triggerPause({enter_method:"switch_tab",playMode:Qe,currentBackendSourceEventTracking:P.currentBackendSourceEventTracking}))}),[ve,Je,Ge,Ke,Me,qe,Qe,he,S,P.currentBackendSourceEventTracking]);const Ye=(0,it.Zd)({id:w}),Ze=(0,it.Hs)(w),Xe=(0,it.yy)(w,C),ct=(0,rt.WH)(w),pt=(0,o.useMemo)((()=>{var e;const{videoQuality:t}=(0,m.L$)(null===(e=Ie.current)||void 0===e?void 0:e.getPlayerAttributes()),{definition:n}=P;return(0,tt.H4)(t,n)}),[P]),vt=(0,o.useCallback)((()=>{var e;const t=(0,m.L$)(null===(e=Ie.current)||void 0===e?void 0:e.getPlayerAttributes()),{videoBitrate:n,videoQuality:i,codecType:o}=t,a=(0,T.__rest)(t,["videoBitrate","videoQuality","codecType"]),{bitrate:r,author_id:l,format:s,encodedType:d,videoQuality:u,encodeUserTag:c,secret:p,forFriend:v,definition:h,playlist_id:y,popup_type:g,size:f}=P;return Object.assign(Object.assign(Object.assign(Object.assign({id:w,authorId:l,playMode:Qe,bitrate:null!=n?n:r,format:s,encodedType:d,videoQuality:u,encodeUserTag:c,codecType:o,definition:pt,secret:p,forFriend:v,originalDefinition:h,playlist_id:y,popupType:g},null!=a?a:{}),Ze),Xe),{size:f})}),[w,P,pt,Qe,Ze,Xe]),ht=(0,y.i3)(),mt=(0,o.useMemo)((()=>{const{group_id:e,author_id:t,is_scheduled:n,search_id:i,search_keyword:o,search_result_id:a,question_id:r,collection_id:l,collection_name:s,isPaidPartnership:d,poi_id:u,playlist_id:c,popup_type:p,enter_tab:v,diversify_id:h,enter_method:m,is_sub_only_video:y,tab_name:g,isPinnedItem:f,isReposted:_,is_just_watched:b,index_from_just_watched:k,currentBackendSourceEventTracking:w}=P;return Object.assign(Object.assign(Object.assign({itemId:e,authorId:t,isScheduled:Boolean(n),autoplayStatus:1,searchId:i,searchKeyword:o,searchResultId:a,questionId:r,playMode:Qe,isMute:ht,collectionId:l,collectionName:s,isPaidPartnership:Boolean(d),poiId:u,playlistId:c,popupType:p,enterTab:v,diversifyId:h,enterMethod:m,isSubOnlyVideo:y,isCopyrightMuted:M,isPinnedItem:f,isReposted:_,tab_name:g,isAutoScroll:Te,is_just_watched:b,index_from_just_watched:k,currentBackendSourceEventTracking:w},Ze),Xe),ct)}),[ht,M,P,Te,Qe,Ze,Xe,ct]),yt=(0,o.useCallback)((()=>{var e;const{currentTime:t=0,duration:n=0}=(0,m.L$)(null===(e=Ie.current)||void 0===e?void 0:e.getPlayerAttributes());return Object.assign(Object.assign({},mt),{currentTime:t,duration:n,index:C})}),[C,mt]);(0,o.useEffect)((()=>{P&&Fe&&Ue.current&&(Ue.current.videoPlayHandleParams=yt())}),[yt,P,Fe]);const gt=(0,o.useMemo)((()=>(0,c.fU)()?"":(0,nt.N2)(window.location.pathname)),[]),{loading:ft,handleCanPlayWithLoading:_t,handlePauseWithLoading:bt,handlePlayingWithLoading:kt,handleWaitingWithLoading:wt}=(0,h.iJ)({isCurrentVideo:qe}),Pt=(0,o.useCallback)((()=>{var e,t,n;null===(e=Ue.current)||void 0===e||e.updateMetricsParams({playbackAttribute:null===(t=Ie.current)||void 0===t?void 0:t.getPlayerAttributes(),videoQualityParams:vt()}),null===(n=Ue.current)||void 0===n||n.onLoadStart(),null==G||G()}),[vt]),Ct=(0,o.useCallback)((()=>{var e,t,n;null===(e=Ue.current)||void 0===e||e.updateMetricsParams({playbackAttribute:null===(t=Ie.current)||void 0===t?void 0:t.getPlayerAttributes(),videoQualityParams:vt()}),null===(n=Ue.current)||void 0===n||n.onLoadedData(),null==K||K()}),[vt]),St=(0,o.useCallback)((()=>{var e,t,n;null===(e=Ue.current)||void 0===e||e.updateMetricsParams({playbackAttribute:null===(t=Ie.current)||void 0===t?void 0:t.getPlayerAttributes(),videoQualityParams:vt()}),_t(),Ve(!0),null==ee||ee(!0),null===(n=Ue.current)||void 0===n||n.onCanPlay()}),[vt,_t,ee]),Tt=(0,o.useCallback)((e=>{var t,n,i;null===(t=Ue.current)||void 0===t||t.updateMetricsParams({playbackAttribute:null===(n=Ie.current)||void 0===n?void 0:n.getPlayerAttributes(),videoQualityParams:vt()}),null===(i=Ue.current)||void 0===i||i.onPlay(),null==z||z(e),He.addMlModelTrainData({id:w,action:"play",isPreview:1===S||7===S}),Re.setCanAutoPlay(!0)}),[vt,z,w,He,S]),xt=(0,o.useCallback)((()=>{var e,t,n,i;const{currentTime:o=0,duration:a=0,playerType:r}=(0,m.L$)(null===(e=Ie.current)||void 0===e?void 0:e.getPlayerAttributes()),l=(0,D.ZQ)(),{byteLength:s,duration:d}=l.getPreloadCacheInfo(w);null===(t=Ue.current)||void 0===t||t.updateMetricsParams({playbackAttribute:Object.assign(Object.assign(Object.assign({},Ye),null===(n=Ie.current)||void 0===n?void 0:n.getPlayerAttributes()),{preload_size:s,preload_time:d,player_type:r,bitrateInfo:de}),videoQualityParams:vt()}),null===(i=Ue.current)||void 0===i||i.onTimeUpdate(),null==W||W(o/a)}),[vt,W,w,de,Ye]),Mt=(0,o.useCallback)((e=>{Re.setCurrentCaption(e)}),[]),Et=(0,h.TL)(),It=(0,o.useCallback)((e=>{const{httpCode:t=-1,errorCode:n=-1,errorMessage:i="",url:o="",response:a="",mode:r="",pathId:l=""}=e;ze.emitEvent("video_mse_error",{},{httpCode:String(t),errorCode:String(n),errorMessage:i,url:o,response:a,mode:r,pathId:l})}),[ze]),Lt=(0,o.useCallback)((e=>{var t,n,i,o;Ae.setPlayerError(),null==q||q(e);const a=vt(),r=null===(t=Ie.current)||void 0===t?void 0:t.getPlayerAttributes();Et(Object.assign(Object.assign({},r),a)),null===(n=Ue.current)||void 0===n||n.updateMetricsParams({playbackAttribute:null===(i=Ie.current)||void 0===i?void 0:i.getPlayerAttributes(),videoQualityParams:vt()}),null===(o=Ue.current)||void 0===o||o.onError()}),[vt,q,Et]),At=(0,o.useCallback)((e=>{var t,n,i;H(e),bt(),null===(t=Ue.current)||void 0===t||t.updateMetricsParams({playbackAttribute:null===(n=Ie.current)||void 0===n?void 0:n.getPlayerAttributes(),videoQualityParams:vt()}),null===(i=Ue.current)||void 0===i||i.onPause(),He.addMlModelTrainData({id:w,action:"pause"})}),[vt,H,bt,w,He]),Rt=(0,o.useCallback)((e=>{var t,n,i;$(e),kt(),null===(t=Ue.current)||void 0===t||t.updateMetricsParams({playbackAttribute:null===(n=Ie.current)||void 0===n?void 0:n.getPlayerAttributes(),videoQualityParams:vt()}),null===(i=Ue.current)||void 0===i||i.onPlaying()}),[vt,$,kt]),jt=(0,o.useCallback)((()=>{var e,t,n,i,o,a;wt();const r=null===(e=Ie.current)||void 0===e?void 0:e.getPlayerAttributes();if(r){null===(t=Ue.current)||void 0===t||t.updateMetricsParams({playbackAttribute:null===(n=Ie.current)||void 0===n?void 0:n.getPlayerAttributes(),videoQualityParams:vt()});const{buffered:e,currentTime:l=0,duration:s=0}=r,d=(null!==(i=null==e?void 0:e.length)&&void 0!==i?i:0)>0&&null!==(o=null==e?void 0:e.start(0))&&void 0!==o?o:0;if(Math.abs(d-l)<.5)return;if(Math.abs(s-l)<.5)return;null===(a=Ue.current)||void 0===a||a.onWaiting(),He.addMlModelTrainData({id:w,action:"wait"})}}),[vt,wt,w,He]),{handleVvCountOnEnd:Ot,handleBreakCount:Vt}=(0,st.K)(S),Bt=(0,o.useCallback)((()=>{Vt()}),[]),Dt=(0,o.useCallback)((e=>{null==J||J(e)}),[]),Ft=(0,o.useCallback)((e=>{var t,n,i;null===(t=Ue.current)||void 0===t||t.updateMetricsParams({playbackAttribute:null===(n=Ie.current)||void 0===n?void 0:n.getPlayerAttributes(),videoQualityParams:vt()}),null===(i=Ue.current)||void 0===i||i.onEnded(),null==Q||Q(e),Ot(),He.addMlModelTrainData({id:w,action:"finish"})}),[vt,Q,w,He]),Nt=(0,o.useCallback)((e=>{var t,n,i,o;const a=(0,D.ZQ)(),{byteLength:r,duration:l}=a.getPreloadCacheInfo(w);null===(t=Ue.current)||void 0===t||t.updateMetricsParams({playbackAttribute:null===(n=Ie.current)||void 0===n?void 0:n.getPlayerAttributes(),videoQualityParams:vt()});const s=null===(i=Ie.current)||void 0===i?void 0:i.getPlaybackQuality(),d=s?s.droppedVideoFrames/s.totalVideoFrames*100:0;null===(o=Ue.current)||void 0===o||o.onUnmount(Object.assign(Object.assign({},e),{preload_size:r,preload_time:l,droppedRate:d})),He.addMlModelTrainData({id:w,action:"unmount"}),null==Y||Y()}),[vt,w,He]),Ut=(0,o.useCallback)((e=>{e.preventDefault}),[]);(0,o.useEffect)((()=>{qe||null==H||H({})}),[qe,H]),(0,o.useEffect)((()=>{qe&&(0,A.uQ)(R.Y.PlayerMounted)}),[qe]);const Ht=(0,o.useCallback)((()=>{null==ee||ee()}),[ee]),$t=d||2===S||3===S||4===S||6===S||5===S,zt=(0,o.useMemo)((()=>{const{videoQuality:e,definition:t}=P;return e&&t?`${e}_${t.substring(0,t.length-1)}_0`:"unknown_definition_from_xgpreload_config"}),[P]),{bitrateConfig:Qt}=(0,m.L$)((0,ot.U)((()=>["bitrateConfig"]),[])),{isTTP:qt}=null!==(we=(0,ot.U)((()=>["isTTP"]),[]))&&void 0!==we?we:{},{region:Wt}=null!==(Pe=(0,at.W)((()=>["region"]),[]))&&void 0!==Pe?Pe:{},{abTestVersion:Gt}=null!==(Ce=(0,at.W)((()=>["abTestVersion"]),[]))&&void 0!==Ce?Ce:{},Kt=(0,a.pd)("desktop"),Jt=(0,a.iM)("desktop"),Yt=(0,a.Yu)(),Zt=B.M.getInstance();Zt.isTTP=qt,Gt&&(Zt.abTestVersion=Gt.versionName,B.M.setABTest(Yt)),Kt&&(Zt.hevcAbVersion=Kt,B.M.setHevcTestData(Jt));const{normalizationVid:Xt,playbackNormalizePath:en}=(0,a.KV)(),tn=(0,r.Nj)(D.JX),nn=tn.getPreloadUrls(),on=(0,h.CT)(nn,zt),{playerInitHost:an}=(0,a.NY)(),{videoOrder:rn}=(0,a.oJ)(),{bitrateSelectorConfigs:ln}=(0,a.Tg)(),{preloadConfigVid:sn}=(0,a.Md)(),dn=F?`${F}. ${I}`:I,{armCoreContentEvent:un}=(0,o.useContext)(_.e),cn=(0,o.useCallback)((()=>{null==un||un(),ze.reportActualFMP()}),[un,ze]),pn=(0,o.useCallback)((e=>{const{errorCode:t,errorMessage:n,logid:i}=e;ze.emitEvent("video_play_end",{count:1},{is_success:`${0===t}`,error_code:String(t),error_msg:n,logid:i})}),[ze]);return(0,i.jsxs)(k.Le,{horizontal:d,mode:S,style:ye,children:[e?(0,i.jsx)(k.R,{horizontal:$t,mode:S,src:e,alt:dn,loading:n?"lazy":"eager",style:ce,onLoad:cn,fetchPriority:ge}):t?(0,i.jsx)(f.x,{video:t,objectFit:$t?"contain":"cover",style:ce,alt:dn,onLoad:cn,fetchPriority:ge}):null,(qe||We)&&(0,i.jsxs)(k.Ec,{horizontal:$t,"data-e2e":te,children:[(0,i.jsx)(et,{ref:Ie,id:w,url:Be,playbackRate:U,mode:S,muteSetting:M||g.T5[S].forceMute,defaultMute:g.T5[S].defaultMute,playProgress:null!=xe?xe:0,duration:N,onUnmount:Nt,onLoadStart:Pt,onLoadedData:Ct,onTimeUpdate:xt,onError:Lt,onCanPlay:St,onPause:At,onPlay:Tt,onPlaying:Rt,onWaiting:jt,onEnded:Ft,onBreak:Bt,onVideoChange:Ht,onContextMenu:Ut,onVideoVolumeChange:Dt,onCaptionChange:Mt,onVideoPlayEnd:pn,subtitleStruct:ne,subtitleList:ie,curSubtitle:oe,onSubtitleCallback:ae,disableDownload:re,volumeInfo:le,adaptBitrateVid:se,bitrateInfo:de,defaultDefinition:zt,bitrateConfig:Qt,preloader:tn,normalizationVid:Xt,playbackNormalizePath:en,preloadUrlsList:on,playerInitHost:an,defaultBitrate:ue,videoOrder:rn,teaParams:P,autoPlay:ve,autoReplay:he,size:me,bitrateSelectorConfigs:ln,preloadConfigVid:sn,pathId:gt,metrics:Ue.current,hevcTest:Jt,hevcRobustnessTest:$e,playbackAbTestInfo:Yt,handleMseError:It,isTTP:!!qt&&"US"===Wt,vIndex:C,renderState:fe,onAutoplayPrevented:()=>{je&&Re.setCanAutoPlay(!1)}}),ft&&(0,i.jsx)(k.K3,{})]})]})}))),pt=(0,o.memo)((0,o.forwardRef)((function(e,t){const n=(0,o.useRef)(null);(0,o.useImperativeHandle)(t,(()=>({play:e=>{var t,i;(null===(t=n.current)||void 0===t?void 0:t.play)&&(null===(i=n.current)||void 0===i||i.play(e))},pause:()=>{var e,t;(null===(e=n.current)||void 0===e?void 0:e.pause)&&(null===(t=n.current)||void 0===t||t.pause())},seek:e=>{var t,i;(null===(t=n.current)||void 0===t?void 0:t.seek)&&(null===(i=n.current)||void 0===i||i.seek(e))},seekTime:e=>{var t,i;(null===(t=n.current)||void 0===t?void 0:t.seekTime)&&(null===(i=n.current)||void 0===i||i.seekTime(e))},onSeeked:e=>{var t,i;(null===(t=n.current)||void 0===t?void 0:t.onSeeked)&&(null===(i=n.current)||void 0===i||i.onSeeked(e))},onSeeking:e=>{var t,i;(null===(t=n.current)||void 0===t?void 0:t.onSeeking)&&(null===(i=n.current)||void 0===i||i.onSeeking(e))},onTimeUpdate:e=>{var t,i;(null===(t=n.current)||void 0===t?void 0:t.onTimeUpdate)&&(null===(i=n.current)||void 0===i||i.onTimeUpdate(e))},getFullscreen:e=>{var t;null===(t=n.current)||void 0===t||t.getFullscreen(e)},exitFullscreen:e=>{var t;null===(t=n.current)||void 0===t||t.exitFullscreen(e)},replay:()=>{var e,t;(null===(e=n.current)||void 0===e?void 0:e.replay)&&(null===(t=n.current)||void 0===t||t.replay())},updatePlayer:e=>{var t,i;(null===(t=n.current)||void 0===t?void 0:t.updatePlayer)&&(null===(i=n.current)||void 0===i||i.updatePlayer(e))},get currentTime(){var e,t;return null!==(t=null===(e=n.current)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0},get duration(){var e,t;return null!==(t=null===(e=n.current)||void 0===e?void 0:e.duration)&&void 0!==t?t:0},get currentCanPlay(){var e,t;return null!==(t=null===(e=n.current)||void 0===e?void 0:e.currentCanPlay)&&void 0!==t&&t}})));const{isUseNativePlayer:r,adaptBitrateVid:l}=(0,a.Sc)();return r?(0,i.jsx)(w,Object.assign({},e,{ref:n})):(0,i.jsx)(ct,Object.assign({},e,{adaptBitrateVid:l,ref:n}))})))},1967:(e,t,n)=>{n.d(t,{CZ:()=>d,Ec:()=>l,K3:()=>s,Le:()=>a,R:()=>r});var i=n(62186),o=n(84827);const a=(0,i.default)("div",{target:"e1yey0rl0"})((({horizontal:e,mode:t,theme:{colors:n}})=>[{width:"100%",height:"100%",overflow:"hidden",position:"relative",backgroundColor:1===t?n.BGPlaceholderOpaque:n.BGPlaceholderDefault,backgroundSize:e?"contain":"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},2===t||1===t||3===t||5===t?{display:"flex",alignItems:"center",justifyContent:"center"}:null]),"label:DivContainer;"),r=(0,i.default)("img",{target:"e1yey0rl1"})((({horizontal:e,mode:t,fetchPriority:n="auto"})=>2!==t&&3!==t&&4!==t&&5!==t?{width:"100%",height:"100%",objectFit:"cover",fetchPriority:n}:{width:"100%",height:"100%",objectFit:e?"contain":"cover",fetchPriority:n}),"label:ImgPoster;"),l=(0,i.default)("div",{target:"e1yey0rl2"})((({horizontal:e=!0})=>({position:"absolute",left:0,top:0,width:"100%",height:"100%","& .xgplayer video":{display:"block",width:"100%",height:"100%",objectFit:e?"contain":"cover"},"& .tiktok-web-player video":{display:"block",width:"100%",height:"100%",objectFit:e?"contain":"cover"}})),"label:DivBasicPlayerWrapper;"),s=(0,i.default)(o.R,{target:"e1yey0rl3"})({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},"label:StyledLoading;"),d=(0,i.default)("video",{target:"e1yey0rl4"})((({horizontal:e})=>({display:"block",width:"100%",height:"100%",objectFit:e?"contain":"cover"})),"label:VideoBasic;")},79395:(e,t,n)=>{n.d(t,{$:()=>r,k:()=>a});var i=n(60072),o=n(32125);function a(e){return(0,i.F3)((t=>t[e]),o.bN)}function r(e,t){return(0,i.F3)((n=>t(n[e])),o.bN)}},45347:(e,t,n)=>{n.d(t,{lN:()=>l});var i,o,a,r=n(93608);!function(e){e.Hidden="hidden",e.Captions="captions",e.Icon="icon"}(i||(i={})),function(e){e.HasSelection="has_selection",e.NoSelection="no_selection"}(o||(o={})),function(e){e.Default="default_language",e.UserSelected="user_selected_language"}(a||(a={}));const l={handleCaptionButtonShow:e=>{r.f.sendEvent("show_captions_button",e)},handleCaptionButtonClick:e=>{r.f.sendEvent("click_captions_button",e)},handleCaptionPopupShow:e=>{r.f.sendEvent("show_captions_popup",e)},handleCaptionPopupClose:e=>{r.f.sendEvent("close_captions_popup",e)},handleCaptionSwitch:e=>{r.f.sendEvent("switch_captions",e)},handleCaptionError:e=>{r.f.sendEvent("caption_error",e)},handleClickSubtitle:e=>{r.f.sendEvent("click_subtitle",e)},handleExpandSubtitle:e=>{r.f.sendEvent("expand_subtitle",e)},handleHideSubtitle:e=>{r.f.sendEvent("hide_subtitle",e)},handleSeeMoreShow:e=>{r.f.sendEvent("see_more_show",e)},handleDescriptionUnfolded:e=>{r.f.sendEvent("descriptions_unfolded",e)},handleDescriptionFolded:e=>{r.f.sendEvent("descriptions_folded",e)}}},56546:(e,t,n)=>{n.d(t,{A:()=>d});var i,o=n(58632),a=n(38203),r=n(93608),l=n(92603),s=n(40040);!function(e){e.Share="share",e.ShareVideo="share_video",e.SharePanelShow="share_panel_show",e.SharePanelClick="share_panel_click",e.ClickShare="click_share_button",e.ExpandSubtitle="expand_subtitle",e.ClickClosePanel="click_close_panel"}(i||(i={}));let d=class{handleEvent(e,t={}){r.f.sendEvent(e,Object.assign(Object.assign({},t),{type:t.group_id?"video":this.type}))}handleSubtitleExpand(e){r.f.sendEvent("expand_subtitle",{page_url:e.pageUrl,item_id:e.itemId,type:this.type})}handleSharePanelShow(e){const t=(0,l.Hd)(s.DK);this.handleEvent("share_panel_show",Object.assign(Object.assign({},e),{from_group_id:t}))}handleSharePanelClick(e){this.handleEvent("share_panel_click",e)}handleShare(e){const t=(0,l.Hd)(s.DK),n=e.group_id?"share_video":"share";this.handleEvent(n,Object.assign(Object.assign({},e),{from_group_id:t}))}handleClickClosePannel(e){this.handleEvent("click_close_panel",e)}handleClickShare(e){this.handleEvent("click_share_button",e)}get type(){const{page_name:e}=r.f.commonParams;switch(e){case"video_detail":return"video";case"single_song":return"music";case"challenge":return"tag";case"others_homepage":case"personal_homepage":return"profile";case"discover_kw":return"kep";case"collection":return"collection";case"place":return"poi";case"channel":return"channel";case"playlist":return"playlist";default:return}}};d=(0,o.__decorate)([(0,a._)()],d)},69617:(e,t,n)=>{n.d(t,{V:()=>o});var i=n(93608);const o={handleVideoControlChange:e=>{i.f.sendEvent("video_play_control",e)},handleToggleCommentPanel:e=>{i.f.sendEvent("comments_panel_toggle",e)},handleCommentPanelShow:e=>{i.f.sendEvent("comments_panel_show",e)},handleVideoControlReport:e=>{i.f.sendEvent("show_video_controls",e)}}},61740:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(93608);const o={handleContextMenu:e=>{i.f.sendEvent("right_click",e)},handleDownload:e=>{i.f.sendEvent("click_download",e)},handleCopyVideoUrl:e=>{i.f.sendEvent("click_copy_video_url",e)},handlePictureInPicture:e=>{i.f.sendEvent("click_picture_in_picture",e)}}},49677:(e,t,n)=>{n.d(t,{_:()=>a});var i,o=n(93608);!function(e){e.General="general",e.Photosensitive="photosensitive",e.LoggedOut="logged_out",e.AgeRestriction="age_restriction"}(i||(i={}));const a={handleRemovePhotosensitiveStatus:e=>{o.f.sendEvent("tns_remove_photosensitive_status",{status:e})},handleShowMaskLayer:e=>{o.f.sendEvent("tns_show_mask_layer",e)},handleShowPhotosensitiveRemoved:e=>{o.f.sendEvent("tns_show_photosensitive_removed",e)},handleMaskLayerClickSkip:e=>{o.f.sendEvent("tns_mask_layer_click_skip",e)},handleMaskLayerClickWatch:e=>{o.f.sendEvent("tns_mask_layer_click_watch",e)},handleCCMaskShow:e=>{o.f.sendEvent("cc_mask_show",e)},handleClickLogInCCMask:e=>{o.f.sendEvent("click_log_in_cc_mask",e)}}},48578:(e,t,n)=>{n.d(t,{p:()=>a});var i=n(93608);const o={0:"one-column",1:"three-column",2:"browser-mode",3:"swiper_mode",4:"video-detail",6:"pip",5:"fullscreen",7:"creator_tab",8:"mini_player",9:"immersive_player"},a={handleSwitchSound:e=>{const{muted:t,playMode:n,enter_method:a="click",volume_from:r,volume_to:l,aweme_type:s,pic_cnt:d}=e;void 0!==r&&void 0!==l?i.f.sendEvent("switch_sound",{sound_mode:l>r?"adjust_up":"adjust_down",play_mode:o[n],enter_method:a,volume_from:r,volume_to:l,aweme_type:null!=s?s:0,pic_cnt:d}):i.f.sendEvent("switch_sound",{sound_mode:t?"off":"on",play_mode:o[n],enter_method:a,aweme_type:null!=s?s:0,pic_cnt:d})},handleVideoUnmuteButtonShow:()=>{i.f.sendEvent("unmute_show")},handleVideoUnmuteButtonClicked:()=>{i.f.sendEvent("unmute_click")},handleVolumeChange:e=>{const{volume_from:t=0,volume_to:n=0,click_mute:o=!1}=e;i.f.sendEvent("volume_change",{volume_change:o?0:Number((n-t).toFixed(4)),volume_level:n,click_mute:o})}}}}]);