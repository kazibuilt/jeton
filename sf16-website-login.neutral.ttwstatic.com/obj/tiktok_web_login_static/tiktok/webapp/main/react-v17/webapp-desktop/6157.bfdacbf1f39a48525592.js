"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6157],{8877:(e,t,n)=>{n.d(t,{$4:()=>L,M_:()=>_,R0:()=>S,dF:()=>O});var i,s=n(96754),o=n(60484),a=n(97086),r=n(88920),l=n(57431),c=n(92032),d=n(22972),u=n(56111),v=n(47479),g=n(84908),f=n(93751),y=n(18499),h=n(14374),p=n(71111),m=n(31209);!function(e){e.Initial="initial",e.CreatePlaylist="create_playlist",e.CreatePlaylistReady="create_playlist_ready"}(i||(i={}));const b=(0,h._)((0,p.atom)({uniqueId:void 0,statusCode:void 0,secUid:void 0,profileState:"initial",selectedTab:"user-post"}),{rehydrationKey:"webapp.userPage"});b.debugLabel="userPageAtom";const{useAtomService:O,useServiceDispatchers:_,useServiceState:S,getStaticApi:L}=(0,m.i)(b,((e,t)=>({setUniqueId(e){t(b,(t=>Object.assign(Object.assign({},t),{uniqueId:e})))},setProfileState(e){t(b,(t=>Object.assign(Object.assign({},t),{profileState:e})))},resetUserPage(){(0,y.unstable_batchedUpdates)((()=>{t(b,(e=>Object.assign(Object.assign({},e),{uniqueId:void 0,secUid:void 0,statusCode:0,profileState:"initial"}))),(0,c.Ds)().resetAllLists(),(0,d.UO)().setUniqueId(void 0),(0,u.cF)().resetUserFollowInfo(),(0,v.MA)().resetData(),(0,s.rS)().resetCollectionInfoList()}))},getUserInfo(n){var i,c,u,h,p,m,O,_,S;return m=this,O=void 0,S=function*(){const m=(0,d.UO)(),O=(0,g.Gp)(),{uniqueId:_,locateItemID:S}=n,{user:L}=(0,l.x)(),{uniqueId:P,secUid:I}=(0,o.L$)(L);let C=e(g.p9).users[null!=_?_:""];try{let l;if(this.resetUserPage(),"number"!=typeof(null===(i=null==C?void 0:C.extraInfo)||void 0===i?void 0:i.statusCode)){const t=yield O.getUserDetail(n);C=e(g.p9).users[null!==(h=null===(u=null===(c=t.userInfo)||void 0===c?void 0:c.user)||void 0===u?void 0:u.uniqueId)&&void 0!==h?h:""],l=t.statusCode}(0,y.unstable_batchedUpdates)((()=>{t(b,(e=>Object.assign(Object.assign({},e),{statusCode:null!=l?l:e.statusCode,uniqueId:null==C?void 0:C.uniqueId,secUid:null==C?void 0:C.secUid}))),m.setUniqueId(null==C?void 0:C.uniqueId)}));const d=[];(null==C?void 0:C.id)&&(0===l||10222===l)&&(0,a.fU)()&&d.push((0,f.s5)().getItemList(Object.assign({secUid:null!==(p=C.secUid)&&void 0!==p?p:"",userId:C.id},S&&{locateItemID:S})));const _=Boolean(L)&&(Boolean(P&&P===(null==C?void 0:C.uniqueId))||Boolean(I&&I===(null==C?void 0:C.secUid))),{id:j="",secUid:w=""}=(0,o.L$)(C);!_&&(null==C?void 0:C.privateAccount)||d.push((0,v.MA)().getVideoPlaylistData({uid:j,secUid:w,isReset:!0})),(0,r.Oi)()&&w&&!_&&d.push((0,s.rS)().getCollectionInfoList({secUid:w,isReset:!0})),yield Promise.allSettled(d)}catch(e){console.error(e),t(b,(e=>Object.assign(Object.assign({},e),{statusCode:-1})))}},new((_=void 0)||(_=Promise))((function(e,t){function n(e){try{s(S.next(e))}catch(e){t(e)}}function i(e){try{s(S.throw(e))}catch(e){t(e)}}function s(t){var s;t.done?e(t.value):(s=t.value,s instanceof _?s:new _((function(e){e(s)}))).then(n,i)}s((S=S.apply(m,O||[])).next())}))},setSelectedTab(e){t(b,(t=>Object.assign(Object.assign({},t),{selectedTab:e})))}})))},56111:(e,t,n)=>{n.d(t,{cF:()=>q,Nl:()=>A,Gd:()=>U,_0:()=>x});var i=n(71111),s=n(31209),o=n(14374),a=n(22113),r=n.n(a),l=n(84908),c=n(39785),d=n(78662),u=n(39228),v=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function r(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};const g=(0,c.M)({csr:function(e,t){return v(this,void 0,void 0,(function*(){let n=28,i=17;return(0,d.gq)(e)?n=50:(0,d.cj)(e)?(n=30,i=15):n=30,(yield u.hd.get("/node/share/discover",{query:{noUser:"0",count:n,scene:i,pageId:t,userId:t}})).body[0].exploreList}))}}),f={list:[],hasMore:!0,loading:!0,maxCursor:0,minCursor:0,total:0,statusCode:0};function y(e,t,n){const{list:i,maxCursor:s,minCursor:o,total:a,statusCode:l,hasMore:c}=n;e(t,(e=>Object.assign(Object.assign({},e),{list:r()(e.list.concat(i)),maxCursor:s,minCursor:o,total:null!=a?a:e.total,statusCode:null!=l?l:e.statusCode,hasMore:null!=c?c:-1!==s,loading:!1})))}function h(e,t,n,i,s){var o,a,r,c,d;return a=this,r=void 0,d=function*(){try{const{count:a,scene:r,isNonPersonalized:c,secUid:d}=i,{list:g,maxCursor:f=0,minCursor:h=0}=e(n);t(n,(e=>Object.assign(Object.assign({},e),{loading:!0})));const p=yield function(e){return v(this,void 0,void 0,(function*(){return u.hd.get("/api/user/list/",{query:e,baseUrlType:2})}))}({scene:r,maxCursor:f,minCursor:h,count:a,isNonPersonalized:c,secUid:d});!function({set:e,atom:t,response:n,idList:i,useSorting:s=!1}){const{maxCursor:o,minCursor:a,userList:r=[],total:c,statusCode:d,hasMore:u}=n,v=(0,l.Gp)();v.multiSetUser(r.map((({user:e})=>e))),v.multiSetUserStats(r.map((({user:e,stats:t})=>({uniqueId:e.uniqueId,stats:t})))),y(e,t,{list:s?r.sort(((e,t)=>{var n,i,s,o;return(null!==(i=null===(n=t.user.roomId)||void 0===n?void 0:n.length)&&void 0!==i?i:0)-(null!==(o=null===(s=e.user.roomId)||void 0===s?void 0:s.length)&&void 0!==o?o:0)})).map((({user:{uniqueId:e}})=>e)).filter((e=>i.indexOf(e)<0)):r.map((({user:{uniqueId:e}})=>e)).filter((e=>i.indexOf(e)<0)),maxCursor:o,minCursor:a,total:c,statusCode:d,hasMore:u})}({set:t,atom:n,response:p,idList:g,useSorting:null!==(o=null==s?void 0:s.useSorting)&&void 0!==o&&o})}catch(e){}},new((c=void 0)||(c=Promise))((function(e,t){function n(e){try{s(d.next(e))}catch(e){t(e)}}function i(e){try{s(d.throw(e))}catch(e){t(e)}}function s(t){var s;t.done?e(t.value):(s=t.value,s instanceof c?s:new c((function(e){e(s)}))).then(n,i)}s((d=d.apply(a,r||[])).next())}))}function p(e){const t=e.toLowerCase().replace(/([-_][a-z])/g,(e=>e.toUpperCase().replace("-","").replace("_",""))),n=(0,o._)((0,i.atom)(f),{rehydrationKey:`webapp.accountList.${t}`});return n.debugLabel=`${t}ListAtom`,n}var m=n(18499),b=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function r(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};const O=p("following"),_=p("follower"),S=p("suggest"),L=p("friend"),P=p("others_following"),I=p("others_follower"),C=p("suggested_follow"),j=(0,i.atom)({following:O,follower:_,suggest:S,friend:L,others_following:P,others_follower:I,suggested_follow:C}),w=(0,i.atom)((e=>({following:e(O),follower:e(_),suggest:e(S),friend:e(L),others_following:e(P),others_follower:e(I),suggested_follow:e(C)})),((e,t,n)=>{t(e(j)[n.key],n.data)}));w.debugLabel="accountListAtom";const{useAtomService:U,useServiceState:x,useServiceDispatchers:A,getStaticApi:q}=(0,s.i)(w,((e,t)=>({resetList(e){t(w,{key:e.key,data:f})},resetUserFollowInfo(){(0,m.unstable_batchedUpdates)((()=>{t(I,f),t(P,f)}))},getRecommendList(e){return b(this,void 0,void 0,(function*(){try{const{pathname:n,userId:i=""}=e,s=yield g(n,i);t(S,f);const o=s.map((({cardItem:e})=>({avatarLarger:e.cover,avatarMedium:e.cover,avatarThumb:e.cover,id:e.id,nickname:e.title,relation:e.extraInfo.relation,signature:e.description,uniqueId:e.subTitle.replace(/^@/,""),verified:e.extraInfo.verified,secUid:e.extraInfo.secUid,roomId:e.extraInfo.roomId}))).sort(((e,t)=>{var n,i;return(null!==(n=null==e?void 0:e.relation)&&void 0!==n?n:0)-(null!==(i=null==t?void 0:t.relation)&&void 0!==i?i:0)})).sort(((e,t)=>{var n,i,s,o;return(null!==(i=null===(n=null==t?void 0:t.roomId)||void 0===n?void 0:n.length)&&void 0!==i?i:0)-(null!==(o=null===(s=null==e?void 0:e.roomId)||void 0===s?void 0:s.length)&&void 0!==o?o:0)}));(0,l.Gp)().multiSetUser(o),y(t,S,{list:o.map((({uniqueId:e})=>e)),hasMore:!1})}catch(e){}}))},getFollowingList(n){return b(this,void 0,void 0,(function*(){yield h(e,t,O,{count:n.count,scene:21},{useSorting:!0})}))},getFollowerList(n){return b(this,void 0,void 0,(function*(){yield h(e,t,_,{count:n.count,scene:67})}))},getFriendsList(n){var i;return b(this,void 0,void 0,(function*(){yield h(e,t,L,{count:null!==(i=n.count)&&void 0!==i?i:30,scene:150})}))},getSuggestedList(n){var i;return b(this,void 0,void 0,(function*(){yield h(e,t,C,{count:null!==(i=n.count)&&void 0!==i?i:30,isNonPersonalized:n.isNonPersonalized,scene:151})}))},getTargetFollowerList(n){var i;return b(this,void 0,void 0,(function*(){yield h(e,t,I,{count:null!==(i=n.count)&&void 0!==i?i:30,secUid:n.secUid,scene:67})}))},getTargetFollowingList(n){var i;return b(this,void 0,void 0,(function*(){yield h(e,t,P,{count:null!==(i=n.count)&&void 0!==i?i:30,secUid:n.secUid,scene:21})}))}})))},22972:(e,t,n)=>{n.d(t,{UO:()=>d,kq:()=>c});var i=n(14374),s=n(71111),o=n(31209);const a=(0,i._)((0,s.atom)({uniqueId:void 0}),{rehydrationKey:"webapp.recommendUserList"});a.debugLabel="recommendUserListAtom";const{useAtomService:r,useServiceDispatchers:l,useServiceState:c,getStaticApi:d}=(0,o.i)(a,((e,t)=>({setUniqueId(e){t(a,(t=>Object.assign(Object.assign({},t),{uniqueId:e})))}})))},47479:(e,t,n)=>{n.d(t,{MA:()=>L,kn:()=>O,aD:()=>S,c8:()=>b});var i=n(39952),s=n(60484),o=n(14374),a=n(71111),r=n(31209),l=n(97446),c=n(4474),d=n(68881),u=n(39228),v=n(39785),g=n(46311),f=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function r(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};const y=(0,v.M)({csr:function(e){return f(this,void 0,void 0,(function*(){const{uid:t}=e,n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n}(e,["uid"]),i=(0,d.t$)("userPlayList");if(i)return i;const s=(0,d.DV)("userPlayList");return s?(g.P.emit("consume_prefetch_data",performance.now(),"unknown","userPlayList"),s.catch((e=>(g.P.emit("consume_prefetch_data",performance.now(),"fail","userPlayList"),g.P.emit("consume_prefetch_data_error",null==e?void 0:e.message,"userPlayList"),u.hd.get("/api/user/playlist/",{query:n,baseUrlType:2}))))):u.hd.get("/api/user/playlist/",{query:n,baseUrlType:2})}))}});var h=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function r(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};const p="0",m={loading:!1,changeOrderLoading:!1,hasMore:!0,statusCode:0,playList:[],cursor:p},b=(0,o._)((0,a.atom)(m),{rehydrationKey:"webapp.videoPlaylist"});b.debugLabel="videoPlaylistSharedAtom";const{useAtomService:O,useServiceDispatchers:_,useServiceState:S,getStaticApi:L}=(0,r.i)(b,((e,t)=>({resetData(){t(b,m)},setPlaylist(e){const{statusCode:n,playList:i=[],hasMore:o,cursor:a,loading:r,changeOrderLoading:l,isMerge:c=!1}=(0,s.L$)(e);t(b,(e=>{var t;return Object.assign(Object.assign({},e),{statusCode:null!=n?n:e.statusCode,hasMore:null!=o?o:e.hasMore,cursor:null!=a?a:e.cursor,playList:c?[...null!==(t=e.playList)&&void 0!==t?t:[],...i]:i,loading:null!=r?r:e.loading,changeOrderLoading:null!=l?l:e.changeOrderLoading})}))},changePlaylistOrder(n){return h(this,void 0,void 0,(function*(){const{playlist:s=[],endIndex:o=-1,successCallback:a}=n,{playList:r=[]}=e(b),l=s.slice(0,o+1);if(!l.length)return 0;let d;t(b,(e=>Object.assign(Object.assign({},e),{changeOrderLoading:!0})));try{({statusCode:d}=yield function(e){var t;return f(this,void 0,void 0,(function*(){return u.hd.post("/api/playlist/modify_order/",{baseUrlType:2,body:c.stringify({commitMixIds:null!==(t=e.commitMixIds)&&void 0!==t?t:""})})}))}({commitMixIds:l.join(",")}))}catch(e){d=-1}try{if(i.c.handleSaveChangePlaylistOrder({status:0===d?"1":"0"}),0!==d)return t(b,(e=>Object.assign(Object.assign({},e),{changeOrderLoading:!1}))),d;const e=[...l,...r.slice(o+1)];return null==a||a(),this.setPlaylist({playList:e,changeOrderLoading:!1}),d}catch(e){return console.error(e),t(b,(e=>Object.assign(Object.assign({},e),{changeOrderLoading:!1}))),-1}}))},getVideoPlaylistData(n){return h(this,void 0,void 0,(function*(){const{uid:i,secUid:s,isReset:o}=n,{cursor:a=p,hasMore:r}=e(b);if(!r)return;const c=o?p:a;let d;t(b,(e=>Object.assign(Object.assign({},e),{loading:!0})));try{d=yield y({uid:i,secUid:s,cursor:c,count:20})}catch(e){d={statusCode:-1,playList:[],hasMore:r}}try{const{playList:e=[]}=d,t=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n}(d,["playList"]),n=e.filter((({id:e})=>e)),i=n.map((({id:e})=>e));(0,l._J)().multiSetPlaylistDetail(n),this.setPlaylist(Object.assign(Object.assign({},t),{playList:i,isMerge:!o,loading:!1}))}catch(e){console.error(e),t(b,(e=>Object.assign(Object.assign({},e),{loading:!1})))}}))}})))},97446:(e,t,n)=>{n.d(t,{A4:()=>r,Se:()=>c,_J:()=>d});var i=n(14374),s=n(71111),o=n(31209);const a=(0,i._)((0,s.atom)({}),{rehydrationKey:"webapp.videoPlaylistDetails"});a.debugLabel="playlistDetailAtom";const{useAtomService:r,useServiceDispatchers:l,useServiceState:c,getStaticApi:d}=(0,o.i)(a,((e,t)=>({multiSetPlaylistDetail(n){const i=e(a),s={};n.forEach((e=>{var t;const{id:n=""}=e,o=null!==(t=i[n])&&void 0!==t?t:{};s[n]=Object.assign(Object.assign({},o),e)})),t(a,Object.assign(Object.assign({},i),s))},setPlaylistDetail(e){const{id:n=""}=e;t(a,(t=>Object.assign(Object.assign({},t),{[n]:Object.assign(Object.assign({},t[n]),e)})))}})))},96737:(e,t,n)=>{n.d(t,{T:()=>c});var i=n(24643),s=n(40099),o=n(25941),a=n(70461),r=n(85844),l=n(45816);const c=(0,s.memo)((({iconSize:e,children:t,lastSharedIconStyle:n,onClick:c})=>{const{isSharedPulsing:d,lastSharedMethod:u}=(0,o.p)(),[v,g]=(0,s.useState)(!0),[f,y]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{if(d)return()=>{g(!0),y(!1)}}),[d]),d&&u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.A,{in:v,timeout:300,onEnter:()=>g(!1),onExited:()=>y(!0),appear:!0,unmountOnExit:!0,children:(0,i.jsxs)(r.K2,{children:[" ",t]})}),(0,i.jsx)(l.V,{isPulsing:f,iconSize:e,lastSharedIconStyle:n,onClick:c})]}):t}))},39952:(e,t,n)=>{n.d(t,{c:()=>s});var i=n(93608);const s={handleCreatePlaylist:()=>{i.f.sendEvent("create_playlist")},handleClickAddPlaylistVideo:e=>{i.f.sendEvent("click_add_playlist_video",e)},handleAddPlaylistVideo:e=>{i.f.sendEvent("add_playlist_video",e)},handlePostCreatingPlaylist:e=>{i.f.sendEvent("post_creating_playlist",e)},handleClickChangePlaylistOrder:()=>{i.f.sendEvent("click_change_playlist_order")},handleSaveChangePlaylistOrder:e=>{i.f.sendEvent("save_change_playlist_order",e)},handleCompleteEditingPlaylist:e=>{i.f.sendEvent("complete_editing_playlist",e)},handleClickPlaylistEntrance:e=>{i.f.sendEvent("click_playlist_entrance",e)},handleClickRenamePlaylist:e=>{i.f.sendEvent("click_rename_playlist",e)},handleClickDeletePlaylist:e=>{i.f.sendEvent("click_delete_playlist",e)},handleDeletePlaylist:e=>{i.f.sendEvent("delete_playlist",e)},handleClickRemovePlaylistVideo:e=>{i.f.sendEvent("click_remove_playlist_video",e)},handleRemovePlaylistVideo:e=>{i.f.sendEvent("remove_playlist_video",e)}}}}]);