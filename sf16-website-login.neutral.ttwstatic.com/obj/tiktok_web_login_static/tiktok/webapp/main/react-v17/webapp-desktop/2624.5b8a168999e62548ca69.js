"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2624],{63363:(e,t,a)=>{a.d(t,{AF:()=>h,AP:()=>v,CA:()=>_,a8:()=>g,hA:()=>u,uJ:()=>p});var s=a(41271),r=a(47172),i=a(78662),o=a(60484),n=a(71281),d=a(49057),l=a(50970);const c="abTestVersion",u=()=>{var e;const{abTestVersion:t}=(0,o.L$)((0,d.W)((()=>[c]),[])),a=null!==(e=(0,n.qt)(t,"search_bar_style_opt"))&&void 0!==e?e:"v1",s="v2"===a,r="v3"===a;return{isSearchBarStyleV1:"v1"===a,isSearchBarStyleV2:s,isSearchBarStyleV3:r,withNewStyle:s||r}},_=()=>{var e;const{pathname:t}=(0,r.useLocation)(),{abTestVersion:a}=(0,o.L$)((0,d.W)((()=>[c]),[])),s=null!==(e=(0,n.qt)(a,"search_remove_related_search"))&&void 0!==e?e:"v0";return{hasRelatedSearch:"v0"===s||(0,i.ie)(t),hasSugReport:!0,isNewSearchLayout:"v0"!==s}},h=()=>{var e;const{abTestVersion:t}=(0,o.L$)((0,d.W)((()=>[c]),[]));return"v2"===(null!==(e=(0,n.qt)(t,"search_keep_sug_show"))&&void 0!==e?e:"v1")};function p(){var e;const{abTestVersion:t}=(0,o.L$)((0,d.W)((()=>[c]),[])),a=null!==(e=(0,n.qt)(t,"search_add_non_personalized_switch"))&&void 0!==e?e:"v1",{user:r}=(0,s.P)(l.L,{selector:e=>{var t;return{user:null===(t=e.appContext)||void 0===t?void 0:t.user}},dependencies:[]}),i=Boolean(r);return{hasPersonalizedSwitch:"v2"===a&&i}}function g(){var e;const{abTestVersion:t}=(0,o.L$)((0,d.W)((()=>[c]),[]));return{shouldRecomReduceIconRisk:"v1"===(null!==(e=(0,n.qt)(t,"should_recom_reduce_icon_risk"))&&void 0!==e?e:"v0")}}function v(){var e;const{abTestVersion:t}=(0,o.L$)((0,d.W)((()=>[c]),[]));return{notificationShouldBeClickable:"v1"===(null!==(e=(0,n.qt)(t,"webapp_moderation"))&&void 0!==e?e:"v0")}}},55913:(e,t,a)=>{a.d(t,{j:()=>h});var s=a(24643),r=a(40099),i=a(78808),o=a(77433),n=a(30671),d=a(6754),l=a(77542),c=a(10879),u=a(62186);(0,u.default)(o.E)`
  border-radius: 50%;
  overflow: hidden;
`,(0,u.default)(i.p)`
  border-radius: 50%;
  overflow: hidden;
`;const _=u.default.span`
  display: inline-flex;
  align-items: center;
  border-radius: 50%;
  overflow: hidden;
`,h=(0,r.memo)((function(e){const{isColor:t,isStrong:a,showTick:r,size:u}=e;return t?r?(0,s.jsx)(_,{children:(0,s.jsx)(i.p,{size:u})}):(0,s.jsx)(_,{children:(0,s.jsx)(o.E,{size:u})}):a?r?(0,s.jsx)(n.S,{size:u}):(0,s.jsx)(d.r,{size:u}):r?(0,s.jsx)(l.n,{size:u}):(0,s.jsx)(c.I,{size:u})}))},90621:(e,t,a)=>{a.d(t,{d:()=>u});var s=a(58632),r=a(64162),i=a(4126),o=a(93995),n=a(71510),d=a.n(n),l=a(8800),c=a(55306);let u=class extends r.E{constructor(e){super(),this.userModule=e,this.defaultState={}}setItem(e,t){t.id_str&&(e[t.id_str]=t)}updateItem(e,t){t.id_str&&e[t.id_str]&&(e[t.id_str]=d()(e[t.id_str],t))}multiSetItem(e,t){t.forEach((t=>this.setItem(e,t)))}addItems(e){const t=e.filter((e=>Boolean(e.owner))).map((e=>{var t,a;return(0,l.bg)(Object.assign(Object.assign({},e.owner),{unique_id:null===(t=e.owner)||void 0===t?void 0:t.display_id,custom_verify:null===(a=e.owner)||void 0===a?void 0:a.authentication_info,room_id:e.id_str}))}));return[this.userModule.getActions().multiSetUser(t),this.getActions().multiSetItem(e)]}setDeleteVideo(e,t){e[t]&&(e[t]=void 0)}};(0,s.__decorate)([(0,i.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Object]),(0,s.__metadata)("design:returntype",void 0)],u.prototype,"setItem",null),(0,s.__decorate)([(0,i.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Object]),(0,s.__metadata)("design:returntype",void 0)],u.prototype,"updateItem",null),(0,s.__decorate)([(0,i.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Array]),(0,s.__metadata)("design:returntype",void 0)],u.prototype,"multiSetItem",null),(0,s.__decorate)([(0,i.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,String]),(0,s.__metadata)("design:returntype",void 0)],u.prototype,"setDeleteVideo",null),u=(0,s.__decorate)([(0,o.n)("LiveModule"),(0,s.__metadata)("design:paramtypes",[c.U])],u)},87303:(e,t,a)=>{a.d(t,{F:()=>v});var s=a(58632),r=a(64162),i=a(4126),o=a(93995),n=a(45537),d=a.n(n),l=a(300),c=a.n(l),u=a(23999),_=a(26324),h=a(24451),p=a(8536),g=a(90621);Object.freeze({statusCode:0,loading:!0,list:[],browserList:[],hasMore:!0,cursor:"0"});let v=class extends r.E{constructor(e){super(),this.live=e,this.defaultState={}}resetLiveList(e,t){const{key:a,hasMore:s=!0,loading:r=!0,cursor:i="0"}=t;e[a]={list:[],browserList:[],loading:r,statusCode:0,hasMore:s,cursor:i}}addLiveList(e,t){const{key:a,list:s,statusCode:r=0,hasMore:i,cursor:o}=t;e[a]||(e[a]={list:[],browserList:[],loading:!1,statusCode:r,hasMore:Boolean(i),cursor:o}),e[a].list=d()(e[a].list,c()(s,"id_str").map((({id_str:e})=>e))),e[a].statusCode=r,e[a].hasMore=i,e[a].cursor=o}setLoading(e,t){const{loading:a,key:s}=t;e[s]||(e[s]={list:[],browserList:[],loading:a,statusCode:0,hasMore:!0,cursor:"0"}),e[s].loading=a}setListKeyword(e,t){const{keyword:a,key:s}=t;e[s]||(e[s]={keyword:a,list:[],browserList:[],loading:!1,statusCode:0,hasMore:!0,cursor:"0"}),e[s].keyword=a}setList(e){return e.pipe((0,h.E)(this.state$),(0,p.Z)((([{key:e,response:t}])=>{const{liveList:a=[],statusCode:s=0,hasMore:r=!1,cursor:i="0"}=t;return 0===s?(0,u.of)(...this.live.addItems(a),this.getActions().addLiveList({key:e,list:a,statusCode:s,hasMore:r,cursor:i})):(0,u.of)(this.getActions().addLiveList({key:e,list:[],statusCode:s,hasMore:!0}))})))}};(0,s.__decorate)([(0,i.uk)(),(0,s.__metadata)("design:type",_.c)],v.prototype,"dispose$",void 0),(0,s.__decorate)([(0,i.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Object]),(0,s.__metadata)("design:returntype",void 0)],v.prototype,"resetLiveList",null),(0,s.__decorate)([(0,i.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Object]),(0,s.__metadata)("design:returntype",void 0)],v.prototype,"addLiveList",null),(0,s.__decorate)([(0,i.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Object]),(0,s.__metadata)("design:returntype",void 0)],v.prototype,"setLoading",null),(0,s.__decorate)([(0,i.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Object]),(0,s.__metadata)("design:returntype",void 0)],v.prototype,"setListKeyword",null),(0,s.__decorate)([(0,i.Mj)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[_.c]),(0,s.__metadata)("design:returntype",void 0)],v.prototype,"setList",null),v=(0,s.__decorate)([(0,o.n)("LiveList"),(0,s.__metadata)("design:paramtypes",[g.d])],v)},45489:(e,t,a)=>{a.d(t,{fu:()=>m});var s=a(58632),r=a(4126),i=a(93995),o=a(46657),n=a(68628),d=a(23999),l=a(26324),c=a(24451),u=a(35572),_=a(8536),h=a(80339),p=a(2408),g=a(34360),v=a(53966);let m=class extends v.E{constructor(){super(...arguments),this.defaultState={isSearchPersonalized:!0,isFeedPersonalized:!0,isSearchConfigInitialized:!1,isFeedConfigInitialized:!1,isManageModalOpen:!1,isExplanationModalOpen:!1,isShowingToast:!1}}setIsShowingToast(e,t){(0,p.nH)().setIsShowingToast(t)}setIsManageModalOpen(e,t){(0,p.nH)().setIsManageModalOpen(t)}setIsExplanationModalOpen(e,t){(0,p.nH)().setIsExplanationModalOpen(t)}setIsSearchPersonalized(e,t){(0,p.nH)().setIsSearchPersonalized(t)}setIsFeedPersonalized(e,t){(0,p.nH)().setIsFeedPersonalized(t)}setSearchConfigInitialized(e,t){(0,p.nH)().setSearchConfigInitialized(t)}setFeedConfigInitialized(e,t){(0,p.nH)().setFeedConfigInitialized(t)}staticInit(e,t){(0,p.nH)().init(t)}init(e){return e.pipe((0,c.E)(this.state$),(0,u.p)((([{isFeed:e},{isSearchConfigInitialized:t,isFeedConfigInitialized:a}])=>t&&!e||a&&e?o.w:(0,n.H)((0,p.nH)().init({isFeed:e})).pipe((0,_.Z)((()=>(0,d.of)(this.noop()))),(0,h.q)(this.terminate("init"))))))}};m.jotaiAtom=p.WH,(0,s.__decorate)([(0,r.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Boolean]),(0,s.__metadata)("design:returntype",void 0)],m.prototype,"setIsShowingToast",null),(0,s.__decorate)([(0,r.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Boolean]),(0,s.__metadata)("design:returntype",void 0)],m.prototype,"setIsManageModalOpen",null),(0,s.__decorate)([(0,r.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Boolean]),(0,s.__metadata)("design:returntype",void 0)],m.prototype,"setIsExplanationModalOpen",null),(0,s.__decorate)([(0,r.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Boolean]),(0,s.__metadata)("design:returntype",void 0)],m.prototype,"setIsSearchPersonalized",null),(0,s.__decorate)([(0,r.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Boolean]),(0,s.__metadata)("design:returntype",void 0)],m.prototype,"setIsFeedPersonalized",null),(0,s.__decorate)([(0,r.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Boolean]),(0,s.__metadata)("design:returntype",void 0)],m.prototype,"setSearchConfigInitialized",null),(0,s.__decorate)([(0,r.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Boolean]),(0,s.__metadata)("design:returntype",void 0)],m.prototype,"setFeedConfigInitialized",null),(0,s.__decorate)([(0,r.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Object]),(0,s.__metadata)("design:returntype",void 0)],m.prototype,"staticInit",null),(0,s.__decorate)([(0,r.Mj)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[l.c]),(0,s.__metadata)("design:returntype",void 0)],m.prototype,"init",null),m=(0,s.__decorate)([(0,i.n)("SearchPersonalization")],m),p.WH.__SIGI_MODULE__=m,(0,g.y)(m)},44900:(e,t,a)=>{a.d(t,{O:()=>f});var s=a(58632),r=a(64162),i=a(4126),o=a(93995),n=a(23999),d=a(76435),l=a(26324),c=a(24451),u=a(62564),_=a(72916),h=a(95719),p=a(8536),g=a(74690),v=a(65365),m=a(93608),y=a(38203),b=a(39228);let S=class{constructor(e){this.fetch=e}getRelatedSearch(e){return this.fetch.get("/api/search/suggest/guide/",{query:e,baseUrlType:2})}};S=(0,s.__decorate)([(0,y._)(),(0,s.__metadata)("design:paramtypes",[b.pM])],S);var k=a(43271),w=a(45489);let f=class extends r.E{constructor(e,t,a){super(),this.service=e,this.search=t,this.personalization=a,this.defaultState={general:{},video:{},user:{},live:{}}}setGeneralState(e,t){e.general=t}setUserState(e,t){e.user=t}setVideoState(e,t){e.video=t}setLiveState(e,t){e.live=t}setGeneralStateShowRSPanel(e,t){e.general=Object.assign(Object.assign({},e.general),{showRSPanel:t})}setUserStateShowRSPanel(e,t){e.user=Object.assign(Object.assign({},e.user),{showRSPanel:t})}setVideoStateShowRSPanel(e,t){e.video=Object.assign(Object.assign({},e.video),{showRSPanel:t})}setLiveStateShowRSPanel(e,t){e.live=Object.assign(Object.assign({},e.live),{showRSPanel:t})}getTopRSData(e){return e.pipe((0,c.E)(this.search.state$,this.personalization.state$),(0,u.T)((([e,{searchGlobalParams:t},{isSearchPersonalized:a}])=>({payload:e,rootEnterFrom:null==t?void 0:t.rootEnterFrom,nonPersonalized:a?void 0:1}))),(0,_.n)((({payload:e,rootEnterFrom:t,nonPersonalized:a})=>this.service.getRelatedSearch(Object.assign(Object.assign({},e),{is_non_personalized_search:a})).pipe((0,u.T)((e=>this.handleRequestData(e))),(0,h.M)((({data:e,log_id:a})=>{this.reportTrendingShow(e,a,t,"general_search")})),(0,p.Z)((e=>{const t=Object.assign(Object.assign({},e),{showRSPanel:!1});return(0,n.of)(this.getActions().setGeneralState(t))})),(0,g.Z)(this.getActions().setGeneralState({})),(0,d.Q)(this.getAction$().dispose)))))}getVideoRSData(e){return e.pipe((0,c.E)(this.search.state$,this.personalization.state$),(0,u.T)((([e,{searchGlobalParams:t},{isSearchPersonalized:a}])=>({payload:e,rootEnterFrom:null==t?void 0:t.rootEnterFrom,nonPersonalized:a?void 0:1}))),(0,_.n)((({payload:e,rootEnterFrom:t,nonPersonalized:a})=>this.service.getRelatedSearch(Object.assign(Object.assign({},e),{is_non_personalized_search:a})).pipe((0,u.T)((e=>this.handleRequestData(e))),(0,h.M)((({data:e,log_id:a})=>{this.reportTrendingShow(e,a,t,"search_video")})),(0,p.Z)((e=>{const t=Object.assign(Object.assign({},e),{showRSPanel:!1});return(0,n.of)(this.getActions().setVideoState(t))})),(0,g.Z)(this.getActions().setVideoState({})),(0,d.Q)(this.getAction$().dispose)))))}getUserRSData(e){return e.pipe((0,c.E)(this.search.state$,this.personalization.state$),(0,u.T)((([e,{searchGlobalParams:t},{isSearchPersonalized:a}])=>({payload:e,rootEnterFrom:null==t?void 0:t.rootEnterFrom,nonPersonalized:a?void 0:1}))),(0,_.n)((({payload:e,rootEnterFrom:t,nonPersonalized:a})=>this.service.getRelatedSearch(Object.assign(Object.assign({},e),{is_non_personalized_search:a})).pipe((0,u.T)((e=>this.handleRequestData(e))),(0,h.M)((({data:e,log_id:a})=>{this.reportTrendingShow(e,a,t,"search_user")})),(0,p.Z)((e=>{const t=Object.assign(Object.assign({},e),{showRSPanel:!1});return(0,n.of)(this.getActions().setUserState(t))})),(0,g.Z)(this.getActions().setUserState({})),(0,d.Q)(this.getAction$().dispose)))))}getLiveRSData(e){return e.pipe((0,c.E)(this.search.state$,this.personalization.state$),(0,u.T)((([e,{searchGlobalParams:t},{isSearchPersonalized:a}])=>({payload:e,rootEnterFrom:null==t?void 0:t.rootEnterFrom,nonPersonalized:a?void 0:1}))),(0,_.n)((({payload:e,rootEnterFrom:t,nonPersonalized:a})=>this.service.getRelatedSearch(Object.assign(Object.assign({},e),{is_non_personalized_search:a})).pipe((0,u.T)((e=>this.handleRequestData(e))),(0,h.M)((({data:e,log_id:a})=>{this.reportTrendingShow(e,a,t,"search_live")})),(0,p.Z)((e=>{const t=Object.assign(Object.assign({},e),{showRSPanel:!1});return(0,n.of)(this.getActions().setLiveState(t))})),(0,g.Z)(this.getActions().setLiveState({})),(0,d.Q)(this.getAction$().dispose)))))}handleRequestData(e){const{status_code:t,data:a=[],log_id:s}=e;let r=[];return 0===t&&(null==a?void 0:a.length)&&(r=a.map((e=>Object.assign(Object.assign({},e),{impr_id:s})))),Object.assign(Object.assign({},e),{data:null!=r?r:[]})}reportTrendingShow(e,t,a,s){if(e&&e.length>=10){const r={enter_from:a,words_source:"related_search",search_position:m.f.commonParams.page_name,page_name:s};v.$G.handleTrendingShow(Object.assign({words_num:e.length,impr_id:null!=t?t:"",raw_query:""},r)),e.forEach(((e,a)=>{var s,i;return v.$G.handleTrendingWordsShow(Object.assign({words_position:a,words_content:null!==(s=null==e?void 0:e.word)&&void 0!==s?s:"",group_id:null!==(i=null==e?void 0:e.group_id)&&void 0!==i?i:"",impr_id:null!=t?t:""},r))}))}}};(0,s.__decorate)([(0,i.uk)(),(0,s.__metadata)("design:type",l.c)],f.prototype,"dispose",void 0),(0,s.__decorate)([(0,i.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Object]),(0,s.__metadata)("design:returntype",void 0)],f.prototype,"setGeneralState",null),(0,s.__decorate)([(0,i.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Object]),(0,s.__metadata)("design:returntype",void 0)],f.prototype,"setUserState",null),(0,s.__decorate)([(0,i.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Object]),(0,s.__metadata)("design:returntype",void 0)],f.prototype,"setVideoState",null),(0,s.__decorate)([(0,i.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Object]),(0,s.__metadata)("design:returntype",void 0)],f.prototype,"setLiveState",null),(0,s.__decorate)([(0,i.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Boolean]),(0,s.__metadata)("design:returntype",void 0)],f.prototype,"setGeneralStateShowRSPanel",null),(0,s.__decorate)([(0,i.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Boolean]),(0,s.__metadata)("design:returntype",void 0)],f.prototype,"setUserStateShowRSPanel",null),(0,s.__decorate)([(0,i.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Boolean]),(0,s.__metadata)("design:returntype",void 0)],f.prototype,"setVideoStateShowRSPanel",null),(0,s.__decorate)([(0,i.h5)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Boolean]),(0,s.__metadata)("design:returntype",void 0)],f.prototype,"setLiveStateShowRSPanel",null),(0,s.__decorate)([(0,i.Mj)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[l.c]),(0,s.__metadata)("design:returntype",void 0)],f.prototype,"getTopRSData",null),(0,s.__decorate)([(0,i.Mj)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[l.c]),(0,s.__metadata)("design:returntype",void 0)],f.prototype,"getVideoRSData",null),(0,s.__decorate)([(0,i.Mj)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[l.c]),(0,s.__metadata)("design:returntype",void 0)],f.prototype,"getUserRSData",null),(0,s.__decorate)([(0,i.Mj)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[l.c]),(0,s.__metadata)("design:returntype",void 0)],f.prototype,"getLiveRSData",null),f=(0,s.__decorate)([(0,o.n)("RelatedSearch"),(0,s.__metadata)("design:paramtypes",[S,k.tq,w.fu])],f)},2301:(e,t,a)=>{a.d(t,{Ae:()=>P,DQ:()=>A,Y6:()=>T,gc:()=>O,nY:()=>j,u5:()=>f});var s=a(46682),r=a(41271),i=a(48292),o=a.n(i),n=a(4474),d=a(40099),l=a(47172),c=a(82715),u=a(65365),_=a(63363),h=a(21367),p=a(71281),g=a(49057),v=a(48615),m=a(87303),y=a(60144),b=a(44900),S=a(79983),k=a(43271),w=a(45489);function f(){var e;const{search:t,state:a}=(0,l.useLocation)(),{enterMethod:s,searchSource:r,enterFrom:i,fromSearchSubTab:o,imprId:d,blankpageEnterFrom:c,blankpageEnterMethod:u,videoPageType:_,preClickId:h}=null!=a?a:{},{q:p}=(0,n.parse)(t);return{enterMethod:s,searchSource:r,enterFrom:i,keyword:null!==(e=Array.isArray(p)?p.toString():p)&&void 0!==e?e:"",fromSearchSubTab:o,imprId:d,blankpageEnterFrom:c,blankpageEnterMethod:u,videoPageType:_,preClickId:h}}function O(e){var t,a;const{keyword:r,enterMethod:i,searchSource:o,enterFrom:n,fromSearchSubTab:u,imprId:_,blankpageEnterFrom:h,blankpageEnterMethod:p,videoPageType:b,preClickId:w}=f(),{user:O,language:j="en",abTestVersion:L}=null!==(t=(0,g.W)((()=>["user","language","abTestVersion"]),[]))&&void 0!==t?t:{},{searchVideoForLoggedin:P,searchLiveForLoggedin:A}=null!==(a=(0,v.U)((()=>["searchVideoForLoggedin","searchLiveForLoggedin"]),[]))&&void 0!==a?a:{},F=(0,l.useLocation)(),{streamDeviceType:E}=(0,y.A)(),{pathname:I}=F,C=Boolean(O),[{state:R,rootEnterFrom:M},x]=(0,s.S)(k.tq,{dependencies:[],selector:t=>{var a;return{state:null!==(a=t[e])&&void 0!==a?a:{},rootEnterFrom:t.searchGlobalParams.rootEnterFrom}}}),z=(0,s.w)(S.O),G=(0,s.w)(m.F),V=I===c.OZ.searchUser,$=T();return(0,d.useCallback)(((t=!0,a=!1)=>{const s=r!==(null==R?void 0:R.keyword)||t,d=r!==(null==R?void 0:R.keyword)||a,l=!P||C,g=!A||C,v={search_source:null!=o?o:"search_outer",search_type:e,enter_method:i,from_search_subtab:u,enter_from:null!=n?n:M,pre_click_id:null!=_?_:w,pre_recom_show_id:_,blankpage_enter_from:h,blankpage_enter_method:p,video_page_type:b};switch(e){case"general":I===c.OZ.searchHome&&s&&l&&(d&&(x.setSearchResult({key:"general",result:k.I4}),z.resetItemList({key:"search_top",loading:!0})),x.getTopSearch({keyword:r,teaParams:v,user:O,language:j,abTestVersion:L,hasSearchLive:$,search_source:o,device_type:E}));break;case"user":V&&s&&(d&&x.setSearchResult({key:"user",result:k.Fy}),x.getUserSearch({keyword:r,teaParams:v,user:O,language:j,abTestVersion:L}));break;case"video":I===c.OZ.searchVideo&&s&&l&&(d&&(x.setSearchResult({key:"video",result:k.Fy}),z.resetItemList({key:"search_video",loading:!0})),x.getVideoSearch({keyword:r,teaParams:v,user:O,language:j,abTestVersion:L}));break;case"live":I===c.OZ.searchLive&&s&&g&&(d&&(x.setSearchResult({key:"live",result:k.Fy}),G.resetLiveList({key:"search_live",loading:!0})),x.getLiveSearch({keyword:r,teaParams:v,user:O,language:j,abTestVersion:L,device_type:E}))}}),[E,r,null==R?void 0:R.keyword,P,C,i,o,e,I,V,x,O,j,L,z,$,G,A,u,M,_,h,p,w,b])}function j(e,t=!0){const{keyword:a}=f(),r=(0,l.useLocation)(),i=(0,l.useHistory)(),{state:o,pathname:n}=r,u=Boolean((0,l.matchPath)(n,{path:c.OZ.searchHome})),{hasRelatedSearch:h}=(0,_.CA)(),[p,g]=(0,s.S)(k.tq,{dependencies:[],selector:t=>{var a;return null!==(a=t[e])&&void 0!==a?a:{}}}),[,v]=(0,s.S)(b.O,{dependencies:[],selector:e=>e}),[m]=(0,s.S)(w.fu,{dependencies:[],selector:e=>({personalized:e.isSearchPersonalized})}),y=O(e);return(0,d.useEffect)((()=>{var s,n,d,l,c;if(!u)return;const _=Boolean(p.data)?!p.error&&0===(null===(n=null===(s=p.data)||void 0===s?void 0:s.videoList)||void 0===n?void 0:n.length)&&0===(null===(l=null===(d=p.data)||void 0===d?void 0:d.otherDataList)||void 0===l?void 0:l.length):0===(null===(c=null==p?void 0:p.items)||void 0===c?void 0:c.length),m=a!==p.keyword||_;if(t&&i.replace(Object.assign(Object.assign({},r),{state:Object.assign({},o)})),y(m),m&&h){const t={req_source:"related_search",search_source:e,keyword:a};switch(e){case"general":v.getTopRSData(t);break;case"user":v.getUserRSData(t);break;case"video":v.getVideoRSData(t);break;case"live":v.getLiveRSData(t)}}return()=>{g.dispose(),v.dispose()}}),[a,h,e,v,m]),Object.assign(Object.assign({},p),{keyword:a,handleSearch:y})}const L={general:c.OZ.searchHome,user:c.OZ.searchUser,video:c.OZ.searchVideo,live:c.OZ.searchLive};function P(e,t){const a=(0,d.useRef)(0),s=(0,l.useHistory)(),i=(0,l.useLocation)(),{keyword:n,enterMethod:c}=f(),{searchGlobalParams:_}=(0,r.P)(k.tq,{dependencies:[],selector:e=>({searchGlobalParams:e.searchGlobalParams})}),p=(0,h.GF)(),{pathname:g}=i;(0,d.useEffect)((()=>{if((0,l.matchPath)(g,{path:L[t]}))return a.current||(a.current=Date.now()),s.listen((({pathname:s})=>{var r;const i=Date.now()-a.current,d=null===(r=o()(L))||void 0===r?void 0:r[s];u.$G.handleSearchSessionFinish({duration:i,impr_id:e,search_id:e,search_type:t,search_keyword:n,enter_method:c,enter_from:_.rootEnterFrom,group_id:p,next_tab:d})}))}),[e,t,_,p,c])}function T(){var e,t;const{abTestVersion:a,user:s}=null!==(e=(0,g.W)((()=>["abTestVersion","user"]),[]))&&void 0!==e?e:{};return"v2"===(0,p.qt)(a,"search_add_live")&&(null===(t=null==s?void 0:s.hasSearchLivePermission)||void 0===t||t)}function A(e){const[,t]=(0,s.S)(k.tq,{selector:e=>({rootEnterFrom:e.searchGlobalParams.rootEnterFrom}),dependencies:[]});(0,d.useEffect)((()=>{t.setSearchGlobalParams({rootEnterFrom:e})}),[t,e])}},43271:(e,t,a)=>{a.d(t,{Fy:()=>V,I4:()=>$,tq:()=>B});var s,r,i=a(58632),o=a(64162),n=a(4126),d=a(93995),l=a(42051),c=a(23999),u=a(63700),_=a(26324),h=a(24451),p=a(62564),g=a(72916),v=a(8536),m=a(74690),y=a(80339),b=a(76435),S=a(95719),k=a(20259),w=a(82715),f=a(65365),O=a(42713),j=a(11983),L=a(97086),P=a(64356),T=a(8800),A=a(27375),F=a(54888),E=a(87303),I=a(49799),C=a(55306),R=a(59952),M=a(79983),x=a(45489),z=a(30264),G=a(27016);!function(e){e[e.NetworkError=-1]="NetworkError",e[e.NoResultText=10]="NoResultText",e[e.SelfHarmText=11]="SelfHarmText",e[e.HateSexualizationText=12]="HateSexualizationText",e[e.Guide=13]="Guide"}(s||(s={})),function(e){e.ShowWithButton="show_with_button",e.ShowDirectly="show_directly",e.NoResult="no_results"}(r||(r={}));const V={keyword:"",error:null,loading:!0,hasMore:!0,cursor:0,items:[],preloadList:[],searchPrecheck:null},$={keyword:"",error:null,loading:!0,hasMore:!0,totalLength:0,isGoToHashtag:!1,cursor:0,data:{videoList:[],otherDataList:[]},preloadList:[],searchPrecheck:null},D={rootEnterFrom:void 0,preSearchId:void 0},q={1:(e,t)=>{var a,s,r,i,o,n,d,l,c;t.totalLength++,t.data.videoList=[...t.data.videoList,null!==(s=null===(a=e.item)||void 0===a?void 0:a.id)&&void 0!==s?s:""];const u={id:null!==(o=null===(i=null===(r=e.item)||void 0===r?void 0:r.video)||void 0===i?void 0:i.id)&&void 0!==o?o:"",url:null!==(l=null===(d=null===(n=e.item)||void 0===n?void 0:n.video)||void 0===d?void 0:d.playAddr)&&void 0!==l?l:""};t.preloadList=[...null!==(c=t.preloadList)&&void 0!==c?c:[],u]},4:(e,t)=>{var a,s;const r=t.data.videoList.length,i={type:e.type,items:null===(a=e.user_list)||void 0===a?void 0:a.map((({user_info:e})=>{var a;return t.totalLength++,null!==(a=e.unique_id)&&void 0!==a?a:""})),position:r%6==0?r:6*Math.ceil(r/6),hasMore:null!==(s=e.view_more)&&void 0!==s&&s,common:e.common};t.data.otherDataList=[...t.data.otherDataList,i]},20:(e,t)=>{var a,s,r,i,o,n,d,l,c;const u=t.data.videoList.length;t.totalLength++;const _={type:e.type,items:[null!==(s=null===(a=e.user_live)||void 0===a?void 0:a.user_info.user_info.unique_id)&&void 0!==s?s:""],lives:[null!==(o=null===(i=null===(r=e.user_live)||void 0===r?void 0:r.live_info)||void 0===i?void 0:i.id_str)&&void 0!==o?o:""],position:u%6==0?u:6*Math.ceil(u/6),hasMore:null!==(n=e.view_more)&&void 0!==n&&n,common:e.common,teaParams:{search_result_id:null!==(c=null===(l=null===(d=e.user_live)||void 0===d?void 0:d.user_info)||void 0===l?void 0:l.user_info.uid)&&void 0!==c?c:""}};t.data.otherDataList=[...t.data.otherDataList,_]},61:(e,t)=>{var a,s,r,i;const o=t.data.videoList.length;t.totalLength++;const n={type:e.type,lives:null===(a=e.live_collection)||void 0===a?void 0:a.map((({id_str:e})=>e)),position:o%6==0?o:6*Math.ceil(o/6),hasMore:null!==(s=e.view_more)&&void 0!==s&&s,common:e.common,teaParams:{search_result_id:null!==(i=null===(r=e.common)||void 0===r?void 0:r.doc_id_str)&&void 0!==i?i:""}};t.data.otherDataList=[...t.data.otherDataList,n]}},U={1:(e,t,a)=>{var s,r,i;const{enter_from:o,totalLength:n,count:d,impr_id:l,videoCount:c,videoStart:u}=t;f.$G.handleSearchVideoImpression(Object.assign(Object.assign({},a),{enter_from:o,rank:u+c,item_rank:n+d,group_id:null===(s=e.item)||void 0===s?void 0:s.id,author_id:null===(i=null===(r=e.item)||void 0===r?void 0:r.author)||void 0===i?void 0:i.id,impr_id:l})),t.count++,t.videoCount++},4:(e,t,a)=>{var s;const{enter_from:r,userStart:i,userCount:o,totalLength:n,count:d,impr_id:l}=t;return null===(s=e.user_list)||void 0===s||s.forEach((e=>{var s;const c=Object.assign(Object.assign({},a),{search_result_id:e.user_info.uid});f.$G.handleSearchImpression(Object.assign({enter_from:r,rank:i+o,item_rank:n+d,impr_id:l},c));const u=null!==(s=e.user_info.room_id_str)&&void 0!==s?s:String(e.user_info.room_id);Boolean(Number(u))&&O.lu.handleLiveShow(Object.assign({room_id:u,anchor_id:e.user_info.uid,action_type:"click",enter_from_merge:"general_search",enter_method:"others_photo"},c)),t.count++,t.userCount++})),t},61:(e,t,a)=>{var s,r,i;const{enter_from:o}=t,n=Object.assign(Object.assign({},a),{search_result_id:null!==(r=null===(s=e.common)||void 0===s?void 0:s.doc_id_str)&&void 0!==r?r:"",enter_from:o,token_type:"live_card",is_aladdin:1,rank:0});f.$G.handleSearchImpression(n),null===(i=e.live_collection)||void 0===i||i.forEach(((e,t)=>{f.$G.handleSearchImpression(Object.assign(Object.assign({},n),{aladdin_words:e.title,aladdin_rank:t,list_result_type:"live",list_item_id:e.id_str,realtime_watch_user:e.user_count}))})),t.count++},20:(e,t,a)=>{var s,r,i,o,n;const{enter_from:d,impr_id:l}=t,{user_info:c,live_info:u}=null!==(s=null==e?void 0:e.user_live)&&void 0!==s?s:{},_=Object.assign(Object.assign({},a),{search_result_id:null!==(r=null==c?void 0:c.user_info.uid)&&void 0!==r?r:""}),h=Object.assign(Object.assign({},_),{user_name:null===(i=null==c?void 0:c.user_info)||void 0===i?void 0:i.nickname,user_tag:"",enter_from:d,token_type:"hot_user",is_aladdin:1,rank:0});f.$G.handleSearchImpression(Object.assign(Object.assign({},h),{impr_id:l})),f.$G.handleSearchImpression(Object.assign(Object.assign({},h),{list_result_type:"live",list_item_id:null!==(o=null==u?void 0:u.id_str)&&void 0!==o?o:""}));const p=null==u?void 0:u.id_str;p&&O.lu.handleLiveShow(Object.assign(Object.assign({},_),{room_id:p,anchor_id:null!==(n=null==c?void 0:c.user_info.uid)&&void 0!==n?n:"",action_type:"click",enter_from_merge:"general_search",enter_method:"others_photo"})),t.count++}};let B=class extends o.E{constructor(e,t,a,s,r,i,o,n,d,l){super(),this.service=e,this.user=t,this.seoModule=a,this.itemList=s,this.liveList=r,this.videoMask=i,this.bizContext=o,this.videoPlayerJotai=n,this.personalization=d,this.t=l,this.defaultState={showTabs:!0,general:$,user:V,video:V,live:V,searchReminderData:null,searchGlobalParams:D}}setSearchResult(e,t){const{key:a,result:s}=null!=t?t:{};e[a]=s}setSearchReminderData(e,t){e.searchReminderData=t.data}addSearchResult(e,t){var a,s,r,i,o;const{key:n,result:d}=null!=t?t:{};if(!e[n])return e[n]=d,e;e[n]=Object.assign(Object.assign(Object.assign({},e[n]),d),{items:null===(s=null===(a=e[n])||void 0===a?void 0:a.items)||void 0===s?void 0:s.concat(d.items),preloadList:null===(i=null===(r=e[n])||void 0===r?void 0:r.preloadList)||void 0===i?void 0:i.concat(null!==(o=d.preloadList)&&void 0!==o?o:[])})}addTopSearchResult(e,t){var a,s;const r=e.general;null===(a=t.data)||void 0===a||a.forEach((e=>{e.type&&q[e.type](e,r)})),e.general=Object.assign(Object.assign({},e.general),{hasMore:Boolean(t.has_more),cursor:null!==(s=t.cursor)&&void 0!==s?s:0,data:Object.assign({},r.data),rid:t.rid,preloadList:r.preloadList})}setSearchLoading(e,t){const{key:a,loading:s}=null!=t?t:{};e[a].loading=s}setIsGoToHashtag(e,t){const{key:a,isGoToHashtag:s}=null!=t?t:{};e[a].isGoToHashtag=s}setShowTabs(e,t){e.showTabs=t}setSearchGlobalParams(e,t){e.searchGlobalParams=Object.assign(Object.assign({},e.searchGlobalParams),t)}setSearchPrecheck(e,t){const{key:a,value:s}=null!=t?t:{};e[a].searchPrecheck=s}setKeyword(e,t){const{key:a,keyword:s}=t;e[a].keyword=s}resetSearchResult(e){e.general=$,e.user=V,e.video=V,e.live=V}getTopSearch(e){return e.pipe((0,h.E)(this.state$,this.videoMask.state$,this.bizContext.state$,this.personalization.state$,this.videoPlayerJotai.state$),(0,p.T)((([e,t,a,s,{isSearchPersonalized:r},i])=>({query:e,state:t.general,videoMaskState:a,bizContextState:s,searchGlobalParams:t.searchGlobalParams,nonPersonalized:r?void 0:1,currentVideo:i.currentVideo}))),(0,g.n)((e=>{var t=e.query,{teaParams:a,abTestVersion:s,user:r,language:o,hasSearchLive:n}=t,d=(0,i.__rest)(t,["teaParams","abTestVersion","user","language","hasSearchLive"]),{state:l,state:{cursor:_,data:h,rid:g},videoMaskState:S,searchGlobalParams:k,nonPersonalized:f,currentVideo:O}=e;let j=(0,c.of)({});d.keyword&&!(0,L.fU)()&&(j=this.service.getTopSearch(Object.assign(Object.assign({},d),{offset:_,search_id:g,web_search_code:this.getWebSearchCode(s),is_non_personalized_search:f})));const P=Date.now();return j.pipe((0,p.T)((e=>{var t,a;return Object.assign(e,{data:null!==(a=null===(t=e.data)||void 0===t?void 0:t.map((e=>{var t,a,s,r,i,o;switch(e.type){case 20:return n?Object.assign(e,{user_live:{live_info:JSON.parse(null!==(s=null===(a=null===(t=e.user_live)||void 0===t?void 0:t.live_info)||void 0===a?void 0:a.raw_data)&&void 0!==s?s:"{}"),user_info:null===(r=e.user_live)||void 0===r?void 0:r.user_info}}):null;case 61:return n?Object.assign(e,{live_collection:null===(o=null===(i=e.live_collection)||void 0===i?void 0:i.live_list)||void 0===o?void 0:o.map((({raw_data:e="{}"})=>JSON.parse(e)))}):null;case 4:case 1:return e;default:return null}})).filter((e=>Boolean(e))))&&void 0!==a?a:[]})})),this.handleTopSearchReport({state:l,keyword:d.keyword,isSendSearch:0===_,teaParams:a,requestStart:P,searchGlobalParams:k,groupId:null==O?void 0:O.id}),(0,v.Z)((e=>{var t,a,i,n,_,h;let p=!1;const v=null===(t=null==e?void 0:e.global_doodle_config)||void 0===t?void 0:t.forbid_search_type;(1===v||0===v&&0===(null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.length))&&(p=!0);const m=this.seoModule.setSearchSEOProps(e,{language:o},{pathname:w.OZ.searchHome,input_keyword:d.keyword}),{has_more:y,data:b=[],extra:k={},search_nil_info:f,suicide_prevent:O,search_nil_text:j,status_code:L,log_pb:P}=e,T=[0,203,403].includes(L)?0:L,{logid:A}=k,F=null!==(i=null!=g?g:A)&&void 0!==i?i:"",E=f&&[11,13].includes(null!==(n=f.text_type)&&void 0!==n?n:0);if(!b.length&&!y&&!E)return this.generateErrorState({search_nil_info:f,search_nil_text:j,suicide_prevent:O,state:l,key:"general",keyword:d.keyword,pathname:w.OZ.searchHome,action$s:[m]});const I=[],C=[],R={hasMore:Boolean(y),statusCode:T,itemList:[],rid:F,log_pb:P},M={hasMore:Boolean(y),statusCode:T,liveList:[],rid:F};let x=null;E&&(x={type:null!==(_=null==f?void 0:f.text_type)&&void 0!==_?_:11,data:Object.assign(Object.assign({},O),{et_search_id:F})}),b.forEach((e=>{var t,a,s,r,i;switch(e.type){case 1:R.itemList.push(e.item);break;case 4:const o=Object.assign(Object.assign({},e),{items:[]}),{user_list:n=[]}=e;n.forEach((({user_info:e={}})=>{const{user:t,stats:a}=this.userConvertor(e,F,null==P?void 0:P.impr_id),{unique_id:s=""}=e;I.push(t),C.push(a),o.items.push(s)}));break;case 20:if(null===(a=null===(t=e.user_live)||void 0===t?void 0:t.user_info)||void 0===a?void 0:a.user_info){const{user_live:{user_info:{user_info:t}}}=e,{user:a,stats:s}=this.userConvertor(t,F,null==P?void 0:P.impr_id);I.push(a),C.push(s)}(null===(r=null===(s=e.user_live)||void 0===s?void 0:s.live_info)||void 0===r?void 0:r.id_str)&&M.liveList.push(e.user_live.live_info);break;case 61:null===(i=e.live_collection)||void 0===i||i.forEach((e=>{e.id_str&&M.liveList.push(e)}))}})),(1===(null==r?void 0:r.photoSensitiveVideosSetting)||!r&&1===S.photoSensitiveVideosSetting)&&(e.data=null===(h=e.data)||void 0===h?void 0:h.filter((e=>{var t;return 4===e.type||4!==(null===(t=e.item)||void 0===t?void 0:t.maskType)})));const z=(0,c.of)(this.user.getActions().multiSetUser(I),this.user.getActions().multiSetUserStats(C),this.itemList.getActions().setList({response:R,key:"search_top",abTestVersion:s,user:r,language:o}),this.liveList.getActions().setList({response:M,key:"search_top",abTestVersion:s,user:r,language:o}),this.getActions().addTopSearchResult(Object.assign(Object.assign({},e),{rid:F})),this.getActions().setSearchPrecheck({key:"general",value:x}),this.getActions().setIsGoToHashtag({key:"general",isGoToHashtag:p}),this.getActions().setSearchGlobalParams({preSearchId:F}));return(0,u.h)(z,m)})),this.catchError({isEmpty:Boolean(h.videoList.length||h.otherDataList.length),key:"general",keyword:d.keyword,state:l,teaParams:a,isSendSearch:0===_}),(0,m.Z)(this.getActions().setSearchLoading({key:"general",loading:!0}),this.getActions().setShowTabs(!0),this.getActions().setKeyword({key:"general",keyword:d.keyword})),(0,y.q)(this.getActions().setSearchLoading({key:"general",loading:!1}),this.terminate()),(0,b.Q)(this.getAction$().dispose))})))}getUserSearch(e){return e.pipe((0,h.E)(this.state$,this.bizContext.state$,this.personalization.state$,this.videoPlayerJotai.state$),(0,p.T)((([e,t,a,{isSearchPersonalized:s},r])=>({query:e,state:t.user,bizContextState:a,currentVideo:r.currentVideo,searchGlobalParams:t.searchGlobalParams,nonPersonalized:s?void 0:1}))),(0,g.n)((e=>{var t=e.query,{teaParams:a,abTestVersion:s,language:r,user:o}=t,n=(0,i.__rest)(t,["teaParams","abTestVersion","language","user"]),{state:d,state:{cursor:l,items:_,rid:h},searchGlobalParams:p,nonPersonalized:g,currentVideo:k}=e;let j=(0,c.of)({});n.keyword&&!(0,L.fU)()&&(j=this.service.getUserSearch(Object.assign(Object.assign({},n),{cursor:l,search_id:h,web_search_code:this.getWebSearchCode(s),is_non_personalized_search:g})));const P=Date.now();return j.pipe((0,S.M)((e=>{var t,s;const{user_list:r=[],log_pb:i,extra:o}=e,{impr_id:d}=null!=i?i:{},{logid:c}=null!=o?o:{},u=null!==(t=null!=h?h:c)&&void 0!==t?t:"";if(r.length){const e=_.length;r.forEach(((t,a)=>{var s;f.$G.handleSearchImpression({search_type:"user",enter_from:"search_result",rank:e+a,search_keyword:n.keyword,search_result_id:t.user_info.uid,impr_id:d,search_id:u});const r=null!==(s=t.user_info.room_id_str)&&void 0!==s?s:String(t.user_info.room_id);Boolean(Number(r))&&O.lu.handleLiveShow({room_id:r,anchor_id:t.user_info.uid,action_type:"click",enter_from_merge:"search_user",enter_method:"others_photo",search_type:"user",search_id:u,search_keyword:n.keyword,search_result_id:t.user_info.uid,rank:e+a,impr_id:d})}))}else f.$G.handleSearchResultEmpty({search_keyword:n.keyword,impr_id:d,search_id:u});0===l&&a&&f.$G.handleSearch(Object.assign(Object.assign({},a),{search_id:u,search_keyword:n.keyword,impr_id:d,duration:Date.now()-P,pre_search_id:p.preSearchId,group_id:null!==(s=null==k?void 0:k.id)&&void 0!==s?s:void 0}))})),(0,v.Z)((e=>{var t,a,s;const i=this.seoModule.setSearchSEOProps(e,{language:r},{pathname:w.OZ.searchUser,input_keyword:n.keyword}),{has_more:o,cursor:l,user_list:_=[],extra:p,search_nil_info:g,suicide_prevent:v,search_nil_text:m,log_pb:y}=e,b=null!==(t=null!=h?h:null==p?void 0:p.logid)&&void 0!==t?t:"",S=g&&[11,13].includes(null!==(a=g.text_type)&&void 0!==a?a:0);let k=null,f=null;if(S&&(f={type:null!==(s=null==g?void 0:g.text_type)&&void 0!==s?s:11,data:Object.assign(Object.assign({},v),{et_search_id:b})},k=(0,c.of)(this.getActions().setSearchPrecheck({key:"user",value:f}))),!_.length&&!o&&!S)return this.generateErrorState({res:e,search_nil_info:g,search_nil_text:m,suicide_prevent:v,state:d,key:"user",keyword:n.keyword,pathname:w.OZ.searchUser,action$s:[i]});if(_.length){const e=[],t=[],a=_.map((({user_info:a})=>{const{user:s,stats:r}=this.userConvertor(a,b,null==y?void 0:y.impr_id);return e.push(s),t.push(r),s.uniqueId})),s=(0,c.of)(this.user.getActions().multiSetUser(e),this.user.getActions().multiSetUserStats(t),this.getActions().addSearchResult({key:"user",result:{hasMore:Boolean(o),keyword:n.keyword,cursor:l,error:null,items:a,loading:!1,rid:b,preloadList:[]}}),this.getActions().setSearchGlobalParams({preSearchId:b}));return k?(0,u.h)(i,s,k):(0,u.h)(i,s)}return k?(0,u.h)(i,k):i})),this.catchError({isEmpty:Boolean(_.length),key:"user",keyword:n.keyword,state:d,teaParams:a,isSendSearch:0===l}),(0,m.Z)(this.getActions().setSearchLoading({key:"user",loading:!0}),this.getActions().setShowTabs(!0),this.getActions().setKeyword({key:"user",keyword:n.keyword})),(0,y.q)(this.getActions().setSearchLoading({key:"user",loading:!1}),this.terminate()),(0,b.Q)(this.getAction$().dispose))})))}getVideoSearch(e){return e.pipe((0,h.E)(this.state$,this.videoMask.state$,this.bizContext.state$,this.personalization.state$,this.videoPlayerJotai.state$),(0,p.T)((([e,t,a,s,{isSearchPersonalized:r},i])=>({query:e,state:t.video,searchGlobalParams:t.searchGlobalParams,videoMaskState:a,bizContextState:s,nonPersonalized:r?void 0:1,currentVideo:i.currentVideo}))),(0,g.n)((e=>{var t=e.query,{teaParams:a,abTestVersion:s,language:r,user:o,filterId:n}=t,d=(0,i.__rest)(t,["teaParams","abTestVersion","language","user","filterId"]),{state:l,state:{cursor:_,items:h,rid:p},videoMaskState:g,searchGlobalParams:k,currentVideo:O,nonPersonalized:j}=e;let P=(0,c.of)({});d.keyword&&!(0,L.fU)()&&(P=this.service.getVideoSearch(Object.assign(Object.assign({},d),{offset:_,count:20,search_id:p,web_search_code:this.getWebSearchCode(s),is_non_personalized_search:j})));const T=Date.now();return P.pipe((0,S.M)((e=>{var t,s;const{item_list:r=[],log_pb:i,extra:o}=e,n=null!==(t=null!=p?p:null==o?void 0:o.logid)&&void 0!==t?t:"";if(r.length){const e=h.length;r.forEach(((t,a)=>{var s;f.$G.handleSearchVideoImpression({search_type:"video",enter_from:"search_result",group_id:null==t?void 0:t.id,author_id:null===(s=null==t?void 0:t.author)||void 0===s?void 0:s.id,rank:e+a,search_keyword:d.keyword,impr_id:null==i?void 0:i.impr_id,search_id:n})}))}else f.$G.handleSearchResultEmpty({search_keyword:d.keyword,impr_id:null==i?void 0:i.impr_id,search_id:n});0===_&&a&&f.$G.handleSearch(Object.assign(Object.assign({},a),{search_id:n,search_keyword:d.keyword,impr_id:null==i?void 0:i.impr_id,duration:Date.now()-T,pre_search_id:k.preSearchId,group_id:null!==(s=null==O?void 0:O.id)&&void 0!==s?s:void 0}))})),(0,v.Z)((e=>{var t,a,i,_,h;const v=this.seoModule.setSearchSEOProps(e,{language:r},{pathname:w.OZ.searchVideo,input_keyword:d.keyword}),{has_more:m,cursor:y,item_list:b=[],extra:S,search_nil_info:k,suicide_prevent:f,search_nil_text:O,status_code:j,log_pb:L}=e,P=[0,203,403].includes(j)?0:j,T=k&&[11,13].includes(null!==(t=k.text_type)&&void 0!==t?t:0),A=null!==(a=null!=p?p:null==S?void 0:S.logid)&&void 0!==a?a:"";if(!b.length&&!m&&!T)return this.generateErrorState({search_nil_info:k,search_nil_text:O,suicide_prevent:f,state:l,key:"video",keyword:d.keyword,pathname:w.OZ.searchVideo,action$s:[v]});let F=[];const E=b.filter((e=>e.id!==n));F=1===(null==o?void 0:o.photoSensitiveVideosSetting)||!o&&1===g.photoSensitiveVideosSetting?E.filter((e=>4!==(null==e?void 0:e.maskType))).map((({id:e})=>e)):E.map((({id:e})=>e));const I=null!==(i=E.map((e=>{const{video:{id:t,playAddr:a=""}}=e;return{id:t,url:a}})))&&void 0!==i?i:[];let C=null;T&&(C={type:null!==(_=null==k?void 0:k.text_type)&&void 0!==_?_:11,data:Object.assign(Object.assign({},f),{et_search_id:null!==(h=null==S?void 0:S.logid)&&void 0!==h?h:""})});const R=(0,c.of)(this.itemList.getActions().setList({response:{itemList:E,hasMore:Boolean(m),statusCode:P,log_pb:L},key:"search_video",abTestVersion:s,language:r,user:o}),this.getActions().addSearchResult({key:"video",result:{hasMore:Boolean(m),keyword:d.keyword,cursor:null!=y?y:0,error:null,items:F,loading:!1,rid:null!=p?p:null==S?void 0:S.logid,preloadList:I}}),this.getActions().setSearchPrecheck({key:"video",value:C}),this.getActions().setSearchGlobalParams({preSearchId:A}));return(0,u.h)(R,v)})),this.catchError({isEmpty:Boolean(h.length),state:l,keyword:d.keyword,teaParams:a,key:"video",isSendSearch:0===_}),(0,m.Z)(this.getActions().setSearchLoading({key:"video",loading:!0}),this.getActions().setShowTabs(!0),this.getActions().setKeyword({key:"video",keyword:d.keyword})),(0,y.q)(this.getActions().setSearchLoading({key:"video",loading:!1}),this.terminate()),(0,b.Q)(this.getAction$().dispose))})))}getLiveSearch(e){return e.pipe((0,h.E)(this.state$,this.bizContext.state$,this.personalization.state$,this.videoPlayerJotai.state$),(0,p.T)((([e,t,a,{isSearchPersonalized:s},r])=>({query:e,state:t.live,searchGlobalParams:t.searchGlobalParams,bizContextState:a,nonPersonalized:s?void 0:1,currentVideo:r.currentVideo}))),(0,g.n)((e=>{var t=e.query,{teaParams:a,abTestVersion:s,language:r,user:o}=t,n=(0,i.__rest)(t,["teaParams","abTestVersion","language","user"]),{state:d,state:{cursor:l,items:_,rid:h},searchGlobalParams:g,currentVideo:k,nonPersonalized:O}=e;let j=(0,c.of)({});n.keyword&&!(0,L.fU)()&&(j=this.service.getLiveSearch(Object.assign(Object.assign({},n),{offset:l,count:20,search_id:h,web_search_code:this.getWebSearchCode(s),is_non_personalized_search:O})));const P=Date.now(),T=j.pipe((0,p.T)((e=>{var t;return Object.assign(Object.assign({},e),{data:null===(t=e.data)||void 0===t?void 0:t.map((e=>{var t,a;return JSON.parse(null!==(a=null===(t=e.live_info)||void 0===t?void 0:t.raw_data)&&void 0!==a?a:"{}")}))})})));return T.pipe((0,S.M)((e=>{var t,s;const{data:r=[],log_pb:i,extra:o}=e,d=null!==(t=null!=h?h:null==o?void 0:o.logid)&&void 0!==t?t:"";if(r.length){const e=_.length;r.forEach((({user_count:t=0,like_count:a=0,id_str:s},r)=>{const o=t<=50&&a>t;f.$G.handleSearchImpression({search_id:d,search_result_id:s,enter_from:"search_result",search_keyword:n.keyword,token_type:"live_card",is_aladdin:0,rank:e+r,result_source:"search",room_tag:"",like_number:o?a:"",realtime_watch_user:o?"":t,search_type:"live",impr_id:null==i?void 0:i.impr_id})}))}else f.$G.handleSearchResultEmpty({search_keyword:n.keyword,impr_id:null==i?void 0:i.impr_id,search_id:d});0===l&&a&&f.$G.handleSearch(Object.assign(Object.assign({},a),{search_id:d,search_keyword:n.keyword,impr_id:null==i?void 0:i.impr_id,duration:Date.now()-P,pre_search_id:g.preSearchId,group_id:null!==(s=null==k?void 0:k.id)&&void 0!==s?s:void 0}))})),(0,v.Z)((e=>{var t,a,i,l;const _=this.seoModule.setSearchSEOProps(e,{language:r},{pathname:w.OZ.searchLive,input_keyword:n.keyword}),{has_more:p,cursor:g,data:v=[],extra:m,search_nil_info:y,suicide_prevent:b,search_nil_text:S,status_code:k}=e,f=[0,203,403].includes(k)?0:k,O=y&&[11,13].includes(null!==(t=y.text_type)&&void 0!==t?t:0),j=null!==(a=null!=h?h:null==m?void 0:m.logid)&&void 0!==a?a:"";if(!v.length&&!p&&!O)return this.generateErrorState({search_nil_info:y,search_nil_text:S,suicide_prevent:b,state:d,key:"live",keyword:n.keyword,pathname:w.OZ.searchLive,action$s:[_]});let L=null;O&&(L={type:null!==(i=null==y?void 0:y.text_type)&&void 0!==i?i:11,data:Object.assign(Object.assign({},b),{et_search_id:null!==(l=null==m?void 0:m.logid)&&void 0!==l?l:""})});const P=(0,c.of)(this.liveList.getActions().setList({response:{liveList:v,hasMore:Boolean(p),statusCode:f},key:"search_live",abTestVersion:s,language:r,user:o}),this.getActions().addSearchResult({key:"live",result:{hasMore:Boolean(p),keyword:n.keyword,cursor:null!=g?g:0,error:null,items:v.map((e=>e.id_str)),loading:!1,rid:null!=h?h:null==m?void 0:m.logid}}),this.getActions().setSearchPrecheck({key:"live",value:L}),this.getActions().setSearchGlobalParams({preSearchId:j}));return(0,u.h)(P,_)})),this.catchError({isEmpty:Boolean(_.length),state:d,keyword:n.keyword,teaParams:a,key:"video",isSendSearch:0===l}),(0,m.Z)(this.getActions().setSearchLoading({key:"live",loading:!0}),this.getActions().setShowTabs(!0),this.getActions().setKeyword({key:"live",keyword:n.keyword})),(0,y.q)(this.getActions().setSearchLoading({key:"live",loading:!1}),this.terminate()),(0,b.Q)(this.getAction$().dispose))})))}handleTopSearchReport({state:{data:e,totalLength:t,rid:a},isSendSearch:s,teaParams:r,keyword:i,requestStart:o,searchGlobalParams:n,groupId:d}){return(0,S.M)((l=>{var c;const{data:u=[],log_pb:_,extra:h={}}=l,{logid:p}=h,g=null!==(c=null!=a?a:p)&&void 0!==c?c:"",{impr_id:v}=null!=_?_:{};if(u.length){const a=e.videoList.length,s={enter_from:"general_search",userStart:t-e.videoList.length,totalLength:t,keyword:i,impr_id:v,searchId:g,videoStart:a,count:0,userCount:0,videoCount:0},r={search_type:"general",search_id:g,search_keyword:i};u.forEach((e=>{var t,a;null===(a=U[null!==(t=null==e?void 0:e.type)&&void 0!==t?t:""])||void 0===a||a.call(U,e,s,r)}))}else f.$G.handleSearchResultEmpty({search_keyword:i,impr_id:v,search_id:g});s&&r&&f.$G.handleSearch(Object.assign(Object.assign({},r),{search_id:g,search_keyword:i,impr_id:v,duration:Date.now()-o,pre_search_id:n.preSearchId,group_id:null!=d?d:void 0}))}))}catchError({isEmpty:e,teaParams:t,keyword:a,key:s,state:r,isSendSearch:i}){return(0,k.W)((()=>e?(j.F.open({content:this.t("server_error_title"),duration:3,widthType:"half"}),(0,c.of)(this.noop())):(i&&t&&f.$G.handleSearch(Object.assign(Object.assign({},t),{search_id:"",search_keyword:a})),(0,c.of)(this.getActions().setSearchResult({key:s,result:Object.assign(Object.assign({},r),{keyword:a,error:{type:-1}})})))))}generateErrorState(e){const{search_nil_info:t,search_nil_text:a,state:s,key:r,keyword:i,actions:o=[],action$s:n=[]}=e,{text_type:d}=null!=t?t:{text_type:10},l={type:d||10};12===d&&(l.extra=a);const _=(0,c.of)(this.getActions().setSearchResult({key:r,result:Object.assign(Object.assign({},s),{keyword:i,error:l})}),...o);return(0,u.h)(_,...n)}userConvertor(e,t,a){var s;return{user:(0,T.bg)(e,{search_id:t,impr_id:a}),stats:{uniqueId:null!==(s=e.unique_id)&&void 0!==s?s:"",stats:(0,A.sg)(e,!0)}}}getWebSearchCode(e){var t,a;const{parameters:s={}}=null!=e?e:{},{search_add_live:r,search_server:i}=s,o={tiktok:{client_params_x:{search_engine:{}},search_server:{}}};return"v2"===(null==r?void 0:r.vid)&&(o.tiktok.client_params_x.search_engine.ies_mt_user_live_video_card_use_libra=1,o.tiktok.client_params_x.search_engine.mt_search_general_user_live_card=1),Object.keys(null!==(t=null==i?void 0:i.vid)&&void 0!==t?t:{}).length>0&&(o.tiktok.search_server=null!==(a=null==i?void 0:i.vid)&&void 0!==a?a:{}),JSON.stringify(o)}};(0,i.__decorate)([(0,n.uk)(),(0,i.__metadata)("design:type",_.c)],B.prototype,"dispose",void 0),(0,i.__decorate)([(0,n.h5)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"setSearchResult",null),(0,i.__decorate)([(0,n.h5)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"setSearchReminderData",null),(0,i.__decorate)([(0,n.h5)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"addSearchResult",null),(0,i.__decorate)([(0,n.h5)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"addTopSearchResult",null),(0,i.__decorate)([(0,n.h5)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"setSearchLoading",null),(0,i.__decorate)([(0,n.h5)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"setIsGoToHashtag",null),(0,i.__decorate)([(0,n.h5)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Boolean]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"setShowTabs",null),(0,i.__decorate)([(0,n.h5)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"setSearchGlobalParams",null),(0,i.__decorate)([(0,n.h5)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"setSearchPrecheck",null),(0,i.__decorate)([(0,n.h5)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"setKeyword",null),(0,i.__decorate)([(0,n.h5)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"resetSearchResult",null),(0,i.__decorate)([(0,n.Mj)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[_.c]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"getTopSearch",null),(0,i.__decorate)([(0,n.Mj)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[_.c]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"getUserSearch",null),(0,i.__decorate)([(0,n.Mj)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[_.c]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"getVideoSearch",null),(0,i.__decorate)([(0,n.Mj)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[_.c]),(0,i.__metadata)("design:returntype",void 0)],B.prototype,"getLiveSearch",null),B=(0,i.__decorate)([(0,d.n)("Search"),(0,i.__param)(9,(0,l.y)(P.hp)),(0,i.__metadata)("design:paramtypes",[z.S,C.U,I.E,M.O,E.F,R.w,F.$,G.Q,x.fu,Function])],B)},44494:(e,t,a)=>{a.d(t,{Z8:()=>j,Ag:()=>O,jE:()=>P,mT:()=>L,L_:()=>E,io:()=>A});var s=a(57432),r=a.n(s),i=a(4474),o=a(37801),n=a(94353),d=a(29690),l=a(10594),c=a(60652),u=a(70363),_=a(53577),h=a(95748),p=a(3732),g=a(40815),v=a(1983),m=a(84879),y=a(78116),b=a(53764),S=a(24643);let k=0;var w=a(55913);const f=(0,a(40099).memo)((function(e){var t;return(0,S.jsx)(w.j,{isColor:!0,showTick:null!==(t=e.isReposted)&&void 0!==t&&t,isStrong:!1,size:e.width})})),O={copy:"copy",whatsapp:"whatsapp",facebook:"facebook",twitter:"twitter",reddit:"reddit",pinterest:"pinterest",vk:"vk",sms:"sms",embed:"embed",telegram:"telegram",line:"line",linkedin:"linkedin",email:"email",message:"message",repost:"repost"},j=Object.assign(Object.assign({},O),{viber:"viber",kakaotalk:"kakaotalk",messenger:"messenger"}),L={facebook:"{Share to} Facebook",pinterest:"{Share to} Pinterest",twitter:"{Share to} Twitter",copy:"{copy_link}",embed:"{embed}",whatsapp:"{Share to} WhatsApp",reddit:"{Share to} Reddit",vk:"{Share to} VK",sms:"{Share to} Sms",telegram:"{Share to} Telegram",line:"{Share to} Line",linkedin:"{Share to} LinkedIn",email:"{Share to} Email",message:"{support_webapp_sharing_option_button}",repost:"{pcWeb_repost_btn}"},P={facebook:o.A,pinterest:n.A,twitter:d.A,copy:l.A,embed:c.A,whatsapp:u.A,reddit:_.A,vk:h.A,telegram:p.A,line:g.A,linkedin:v.A,email:m.A,message:y.A,sms:function({width:e="1em",height:t="1em",style:a={}}){return k++,(0,S.jsxs)("svg",{width:e,height:t,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:a,children:[(0,S.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.0002 47.001C36.7028 47.001 47.0002 36.7035 47.0002 24.001C47.0002 11.2984 36.7028 1.00098 24.0002 1.00098C11.2977 1.00098 1.00024 11.2984 1.00024 24.001C1.00024 36.7035 11.2977 47.001 24.0002 47.001Z",fill:`url(#sms_icon_paint0_linear_${k})`}),(0,S.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M36.6501 23.569C36.6501 29.3645 30.9865 34.0628 24.0001 34.0628C23.1537 34.0628 22.3267 33.9938 21.5269 33.8623C20.826 33.7948 20.4086 33.8602 19.689 34.0827C19.4224 34.1652 19.1109 34.3318 18.7539 34.5226C17.9542 34.9503 16.9262 35.5 15.6626 35.5C15.6388 35.5 15.7188 35.4207 15.8558 35.285C16.3095 34.8358 17.3876 33.7682 17.3876 32.9125V32.5167C13.7656 30.6708 11.3501 27.3539 11.3501 23.569C11.3501 17.7735 17.0137 13.0753 24.0001 13.0753C30.9865 13.0753 36.6501 17.7735 36.6501 23.569Z",fill:"white"}),(0,S.jsx)("defs",{children:(0,S.jsxs)("linearGradient",{id:`sms_icon_paint0_linear_${k}`,x1:"73.7964",y1:"64.0399",x2:"58.9088",y2:"-4.65515",gradientUnits:"userSpaceOnUse",children:[(0,S.jsx)("stop",{stopColor:"#43E6A2"}),(0,S.jsx)("stop",{offset:"1",stopColor:"#18D037"})]})})]})},repost:f},T="copy";function A({platform:e,url:t,targetDOM:a}){switch(e){case"facebook":return(0,i.stringifyUrl)({url:"https://www.facebook.com/sharer/sharer.php",query:{u:t,display:"popup",sdk:"joey"}});case"twitter":return(0,i.stringifyUrl)({url:"https://twitter.com/intent/tweet",query:{refer_source:t,text:t}});case"pinterest":return(0,i.stringifyUrl)({url:"https://pinterest.com/pin/create/button/",query:{url:t,media:"https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/share_img.png",desc:t}});case"whatsapp":return(0,i.stringifyUrl)({url:"https://wa.me/",query:{text:t}});case"reddit":return(0,i.stringifyUrl)({url:"https://www.reddit.com/submit",query:{url:t}});case"vk":return(0,i.stringifyUrl)({url:"https://vk.com/share.php",query:{url:t}});case"copy":return function(){var e;if(navigator.clipboard)return navigator.clipboard.writeText(t);{const s=document.createElement("input");let r=!1;s.style.fontSize="16px",a?a.appendChild(s):(null!==(e=document[null===b.e||void 0===b.e?void 0:b.e.fullscreenElement])&&void 0!==e?e:document.body).appendChild(s),s.value=t||"",s.select(),s.setSelectionRange(0,t.length),document.execCommand&&(r=document.execCommand(T)),s.remove()}};case"telegram":return(0,i.stringifyUrl)({url:"https://t.me/share/url",query:{url:t,text:t}});case"line":return(0,i.stringifyUrl)({url:"https://lineit.line.me/share/ui",query:{url:t,text:t}});case"linkedin":return(0,i.stringifyUrl)({url:"https://www.linkedin.com/sharing/share-offsite",query:{url:t}});case"email":return(0,i.stringifyUrl)({url:"mailto:",query:{subject:t,body:t}});case"embed":case"message":case"repost":return r();default:return"#"}}const F={pc:{US:["copy","sms","facebook","reddit","pinterest","twitter","whatsapp","embed"],RU:["copy","whatsapp","vk","facebook","twitter","embed"],UA:["copy","whatsapp","vk","facebook","twitter","embed"],JP:["copy","twitter","facebook","whatsapp","embed"],default:["copy","whatsapp","facebook","twitter","embed"]},mobile:{US:["copy","facebook","reddit","pinterest","twitter","whatsapp","embed"],RU:["copy","whatsapp","vk","sms","facebook","twitter","embed"],UA:["copy","whatsapp","vk","sms","facebook","twitter","embed"],JP:["copy","twitter","facebook","sms","whatsapp","embed"],default:["copy","whatsapp","sms","facebook","twitter","embed"]}};function E({region:e,isMobile:t=!1,enableRepost:a=!1}){const s=t?"mobile":"pc",r=F[s][e]||F[s].default;return a?["repost",...r]:r}var I;!function(e){e[e.Video=0]="Video",e[e.Creator=1]="Creator",e[e.Music=2]="Music",e[e.Tag=3]="Tag"}(I||(I={}))},22884:(e,t,a)=>{a.d(t,{Gr:()=>g,Jq:()=>c,f7:()=>p,pF:()=>l});var s=a(58632),r=a(71111),i=a(31209),o=a(44494),n=a(84908),d=a(58305);const l="l_s_platform",c="l_s_user",u={platformId:o.Ag.copy,user:{id:"",uniqueId:"",nickname:"",avatarThumb:"",avatarMedium:"",avatarLarger:"",signature:"",relation:-1}},_=()=>(0,s.__awaiter)(void 0,void 0,void 0,(function*(){const e=Object.assign({},u);if("undefined"==typeof window||"undefined"==typeof document)return e;try{if(e.platformId=(0,d._S)(l,o.Ag.copy),e.user.id=(0,d._S)(c,""),e.user.id&&!e.user.avatarThumb){const t=yield function(e){return(0,s.__awaiter)(this,void 0,void 0,(function*(){try{const t=yield(0,n.Gp)().getUserDetail({userId:e});return 0===t.statusCode&&t.userInfo?t.userInfo.user:(console.warn(`Warn: Unable to get last shared friend info for user ${e}`,t),null)}catch(e){return console.error("Error fetching user details:",e),null}}))}(e.user.id);if(!t)return console.error("Unable to get last shared friend info, default to copy method!"),e.platformId=o.Ag.copy,e;e.user=Object.assign({},t)}}catch(t){return console.error("getDefaultState() failed for getting shared info..."),e}return e})),h=(0,r.atom)(u);h.debugLabel="lastSharedAtom";const{useServiceDispatchers:p,useServiceState:g}=(0,i.i)(h,((e,t)=>({initLastSharedAtom:()=>(0,s.__awaiter)(void 0,void 0,void 0,(function*(){const{platformId:a,user:s}=e(h);if(a&&s.id&&s.avatarThumb)return;const r=yield _();t(h,(e=>Object.assign(Object.assign({},e),r)))})),updateLastSharedInfo:e=>{var a,s;t(h,(t=>Object.assign(Object.assign({},t),{platformId:(null==e?void 0:e.platformId)||o.Ag.copy,user:(null==e?void 0:e.user)||t.user}))),(0,d.AP)(l,e.platformId),e.user&&(0,d.AP)(c,null!==(s=null===(a=e.user)||void 0===a?void 0:a.id)&&void 0!==s?s:"")}})))},42713:(e,t,a)=>{a.d(t,{lu:()=>l});var s,r,i,o,n,d=a(93608);!function(e){e.LiveShow="livesdk_live_show",e.LiveRecPlay="livesdk_rec_live_play",e.LiveWindowDuration="livesdk_live_window_duration_v2"}(s||(s={})),function(e){e.Click="click",e.Draw="draw"}(r||(r={})),function(e){e.General="general_search",e.SearchResult="search_result",e.SearchUser="search_user"}(i||(i={})),function(e){e.OthersPhoto="others_photo",e.Cover="live_cover",e.Cell="live_cell"}(o||(o={})),function(e){e.AutoMatic="automatic",e.Hover="hover"}(n||(n={}));const l={handleLiveShow:e=>{d.f.event("livesdk_live_show",e)},handleLiveRecPlay:e=>{d.f.event("livesdk_rec_live_play",e)},handleLiveWindowDuration:e=>{d.f.event("livesdk_live_window_duration_v2",e)}}}}]);