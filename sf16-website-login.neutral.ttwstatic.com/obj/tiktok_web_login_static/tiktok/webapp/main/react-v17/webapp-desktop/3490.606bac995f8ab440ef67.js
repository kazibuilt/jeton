"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3490],{12016:(e,o,t)=>{t.d(o,{w:()=>s});var r=t(24643),i=t(40099),n=t(58542),a=t(26263);const s=e=>{const o=(0,a.Y)(e),[t,s]=(0,i.useState)(o.getLocalStorage(!0));return{hideTooltip:o=>{null==o||o(),(0,a.Y)(e).setLocalStorage(!1),s(!1)},OneTimeTooltip:e=>(0,r.jsx)(n.N0Y,Object.assign(Object.assign({},e),{visible:t}))}}},76579:(e,o,t)=>{t.d(o,{$7:()=>s,Ru:()=>l,W6:()=>d});var r=t(60484),i=t(71281),n=t(49057);const a="abTestVersion",s=()=>{var e;const{abTestVersion:o}=(0,r.L$)((0,n.W)((()=>[a]),[]));return{livePreviewAb:null!==(e=(0,i.qt)(o,"live_preview_web"))&&void 0!==e?e:"v1"}},l=()=>{var e;const{abTestVersion:o}=(0,r.L$)((0,n.W)((()=>[a]),[]));return{livePreviewSonAb:null!==(e=(0,i.qt)(o,"live_preview_web_son"))&&void 0!==e?e:"v1"}},d=()=>{var e;const{abTestVersion:o}=(0,r.L$)((0,n.W)((()=>[a]),[]));return"v1"===(null!==(e=(0,i.V7)(o,"live_survey_open"))&&void 0!==e?e:"v0")}},78580:(e,o,t)=>{t.d(o,{E:()=>s,l:()=>a});var r=t(40099),i=t(76579),n=t(37725);const a=()=>{const e=(0,n.eX)(),o=(0,n.RW)();return{shouldShowLiveSurvey:e,handleHideLiveSurvey:(0,r.useCallback)((()=>{o.handleShowLiveSurvey(!1)}),[])}},s=()=>(0,i.W6)()},47832:(e,o,t)=>{t.d(o,{gw:()=>A,uU:()=>L,xP:()=>I});var r,i=t(40099),n=t(93608);!function(e){e.SurveyIconShow="desktop_web_survey_show_icon",e.SurveyPopupShow="desktop_web_survey_show",e.SurveyIconClick="desktop_web_survey_click_icon",e.SurveyCtaClick="desktop_web_survey_click_join",e.SurveyCloseClick="desktop_web_survey_click_not_now"}(r||(r={}));const a={handleSurveyPopupShow:()=>{n.f.event("desktop_web_survey_show")},handleSurveyIconShow:()=>{n.f.event("desktop_web_survey_show_icon")},handleSurveyIconClick:()=>{n.f.event("desktop_web_survey_click_icon")},handleSurveyCtaClick:()=>{n.f.event("desktop_web_survey_click_join")},handleSurveyCloseClick:()=>{n.f.event("desktop_web_survey_click_not_now")}};var s=t(60484),l=t(49057),d=t(48615),c=t(32125),p=t(88920),u=t(58305),h=t(71111),g=t(31209),m=t(35626),v=t.n(m),x=t(98200);const b=1/0,y=(0,h.atom)(JSON.parse((0,u._S)("PC_APP_SURVEY")||"{}")),_=(0,h.atom)((e=>e(y)),((e,o,t)=>{const r=e(y),i="function"==typeof t?t(r):Object.assign(Object.assign({},r),t);var n;v()(r,i)||(o(y,i),n=i,(0,u.AP)("PC_APP_SURVEY",JSON.stringify(n)))}));_.debugLabel="surveyPersistedAtom";const f=(0,h.atom)(!1),w=(0,h.atom)(-1),k=(0,h.atom)(!1),C=(0,h.atom)({link:"",shouldShowSurvey:!1}),S=(0,h.atom)((e=>({surveyPopActive:e(f),surveyConfig:e(C),initialized:e(k)})),((e,o,t)=>{const r=(0,x.ev)();o(f,t),e(f)?(a.handleSurveyPopupShow(),r.changeCurrentType(x.RD.SurveyEntrance),o(_,(e=>{var o;return{count:(null!==(o=e.count)&&void 0!==o?o:0)+1,hasShown:!0}}))):r.changeCurrentType(x.RD.None)}));S.debugLabel="surveyAtom";const{useAtomService:j,useServiceDispatchers:P,useServiceState:T}=(0,g.i)(S,((e,o)=>({startTimeout(){e(k)||(o(k,!0),a.handleSurveyIconShow());const t=e(w),{hasShown:r,count:i=0}=e(_);!r&&-1===t&&i<b&&o(w,window.setTimeout((()=>o(S,!0)),3e4))},clearTimeout(){const t=e(w);window.clearTimeout(t),o(w,-1)},setSurveyPopActive(e){o(S,e)},setSurveyConfig(e){o(C,e)}})));function I(){const[{surveyPopActive:e},{setSurveyPopActive:o,startTimeout:t,clearTimeout:r}]=j((e=>({surveyPopActive:e.surveyPopActive})),c.bN),n=(0,i.useCallback)((()=>{a.handleSurveyCloseClick(),o(!1)}),[]),s=(0,i.useCallback)((()=>{a.handleSurveyIconClick(),o((e=>!e)),r()}),[]),l=(0,i.useCallback)((()=>{a.handleSurveyCtaClick(),o(!1)}),[]);return(0,i.useEffect)((()=>{t()}),[]),{surveyPopActive:e,handleToggleShow:s,handleHideSurvey:n,handleClickCTA:l}}function L(){var e,o;const{user:t}=(0,s.L$)((0,l.W)((()=>["user"]),[])),r=null!==(e=null==t?void 0:t.hasLivePermission)&&void 0!==e&&e,{config:n}=(0,s.L$)((0,d.U)((()=>["config"]),[])),{desktopWebSurveyLink:a}=(0,s.L$)(n),c=P(),{shouldShowSurvey:u,isNewUser:h}=(0,p.wX)(),g=null!==(o=null==a?void 0:a[h?"new":"old"])&&void 0!==o?o:"",m=u&&r;return(0,i.useEffect)((()=>{c.setSurveyConfig({link:g,shouldShowSurvey:m})}),[c,g,m]),{link:g,shouldShowSurvey:m}}const A=()=>T((e=>e.surveyConfig.link),c.bN)},16236:(e,o,t)=>{t.d(o,{SP:()=>bo});var r=t(58632),i=t(24643),n=t(40099),a=t(41271),s=t(93608),l=t(38893),d=t(96141),c=t(47172),p=t(90159),u=t(58305),h=t(78662),g=t(47236);const m=(0,g.Ay)({resolved:{},chunkName:()=>"live-survey",isReady(e){const o=this.resolve(e);return!0===this.resolved[o]&&!t.m[o]},importAsync:()=>t.e(4816).then(t.bind(t,25199)),requireAsync(e){const o=this.resolve(e);return this.resolved[o]=!1,this.importAsync(e).then((e=>(this.resolved[o]=!0,e)))},requireSync(e){const o=this.resolve(e);return t(o)},resolve:()=>25199});var v=t(78580),x=t(88920),b=t(60484),y=t(13492),_=t(48615),f=t(49057),w=t(92843),k=t(98200),C=t(16229),S=t(73635),j=t(50475),P=t(77976),T=t(32125),I=t(84987);const L={id:"pc-a05d3271",use:"pc-a05d3271-usage",viewBox:"0 0 21 19",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 19" id="pc-a05d3271"><path fill="currentColor" d="M12.601 17h2.52a.84.84 0 1 1 0 1.68h-9.24a.84.84 0 1 1 0-1.68h2.1v-2.1h-6.3A1.68 1.68 0 0 1 0 13.22V1.88C0 .952.754.199 1.68.199h17.642c.927 0 1.68.753 1.68 1.68V13.22c0 .927-.753 1.68-1.68 1.68h-6.72zm-.84 0v-2.1h-2.94V17zM1.681 1.88v11.34h17.641V1.88H1.68z" /></symbol>'};function A(e){const o=(0,n.useContext)(I.X);return(0,n.useLayoutEffect)((()=>(o.add(L),()=>{o.remove("pc-a05d3271")})),[]),(0,i.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,i.jsx)("use",{xlinkHref:"#pc-a05d3271"},void 0)}),void 0)}var E=t(25616),B=t(45297),D=t(20157),R=t(5441),W=t(84506),$=t(65467),O=t(62186),z=t(72153);const F=(0,O.default)("div",{target:"ejkrawn0"})({display:"flex",position:"relative",marginBottom:"12px"},"label:DivPromotionContainer;"),G=(0,O.default)("button",{target:"ejkrawn1"})(z.WA,(({isExpand:e,theme:o})=>{const t=(0,z.t7)(o.direction,"end");return[(0,z.zy)({theme:o,typography:"P3",fontWeight:"bold",color:"TextSecondary",fontFamily:"TikTokFont"}),{position:e?"absolute":"relative",right:0,bottom:0,padding:"0 8px",minWidth:"90px",height:"32px",boxShadow:`0 2px 8px ${o.colors.ShadowSecondary}`,borderRadius:"52px",cursor:"pointer",lineHeight:"30px",textAlign:"center",whiteSpace:"nowrap",borderWidth:"1px",borderStyle:"solid",borderColor:o.colors.LineSecondary2,backgroundColor:o.colors.BGSecondary,":hover":{borderColor:o.colors.LinePrimary,backgroundColor:o.colors.BGTertiary},":active":{borderColor:o.colors.LinePrimary,backgroundColor:o.colors.BGInput},transition:"transform 0.3s cubic-bezier(.4,.14,.3,1)",transformOrigin:`${t} bottom`,transform:e?"scale(0)":"none"}]}),"label:ButtonGetAppText;"),M=(0,O.default)("div",{target:"ejkrawn3"})((({isExpand:e,theme:o})=>{const t=(0,z.t7)(o.direction,"end");return[(0,z.zy)({theme:o,typography:"P2",fontWeight:"bold"}),{position:e?"relative":"absolute",bottom:"-1px",background:o.colors.BGSecondary,boxShadow:`0 2px 8px ${o.colors.ShadowSecondary}`,border:`1px solid ${o.colors.LineSecondary3}`,borderRadius:"8px",transition:"all 0.3s cubic-bezier(.4,.14,.3,1)",transformOrigin:`${t} bottom`,transform:e?"none":"scale(0)"},(0,z.mp)({direction:o.direction,end:"-1px"})]}),"label:DivExpandContainer;"),N=(0,O.default)("div",{target:"ejkrawn4"})((({theme:{direction:e}})=>(0,z.mp)({direction:e,end:"16px"})),{position:"absolute",top:16,cursor:"pointer"},"label:DivXMarkWrapper;"),H=(0,O.default)("div",{target:"ejkrawn5"})((({theme:{direction:e}})=>(0,z.mp)({direction:e,marginEnd:48,marginStart:16})),"label:DivExpandWrapper;"),U=(0,O.default)("div",{target:"ejkrawn6"})((({theme:{colors:e}})=>({margin:"6px 0",display:"flex",flexDirection:"row",padding:"8px",borderRadius:"8px",cursor:"pointer",":hover":{background:e.BGView}})),"label:DivItemContainer;"),q=(0,O.default)("span",{target:"ejkrawn7"})((({theme:{direction:e}})=>(0,z.mp)({direction:e,marginStart:"8px"})),{whiteSpace:"nowrap"},"label:SpanText;"),V=(0,O.default)("div",{target:"ejkrawn8"})((({theme:{colors:e,direction:o}})=>[{width:"calc(100% - 16px)",height:"1px",position:"relative",background:e.LineSecondary2,transform:"scaleY(0.5)"},(0,z.mp)({direction:o,start:"8px"})]),"label:DivSplit;"),Y=()=>(0,n.useMemo)((()=>"undefined"!=typeof window&&(Boolean(navigator.standalone)||window.matchMedia("(display-mode: standalone), (display-mode: minimal-ui)").matches)),[]),Q=(0,n.memo)((function({isInDynamicBottomRightExperiment:e}){const o=(0,E.s)(),{hideModal:t,showModal:r}=(0,D.g)(),[{isExpand:a,isModalShow:s,isPwaInstallable:l},p]=(0,d.nO)((e=>({isExpand:e.isExpand,isModalShow:e.isModalShow,isPwaInstallable:e.isPwaInstallable})),T.bN),{isElectronApp:h}=(0,R.B)(),{isDesktopTestV1:g}=(0,W._j)(),m=!h&&g,v=(0,n.useCallback)((()=>{p.handleShowSnack(!1),p.setIsExpand(!0)}),[p]),x=(0,n.useCallback)((()=>{p.setIsExpand(!1),(0,u._S)(B.v1)||(0,u.AP)(B.v1,"1")}),[p]),b=(0,n.useCallback)((()=>{s||(r(),p.setIsModalShow(!0))}),[p,s,r]),y=(0,n.useCallback)((()=>{t(),p.setIsModalShow(!1)}),[p,t]),_=(0,n.useCallback)((()=>{l?v():b()}),[v,b,l]),f=(0,n.useCallback)((()=>{b(),x(),p.handleClickDownload()}),[p,x,b]),w=(0,n.useCallback)((()=>{x(),p.handleInstallationClick()}),[p,x]),k=Y(),{search:C}=(0,c.useLocation)();if((0,n.useMemo)((()=>"twa"===(0,u.Hd)(B.O_)||"twa"===new URLSearchParams(C).get("source")),[C]))return null;if(!m)return(0,i.jsx)($.u,{onClose:y,visible:s});const I=(0,P.w)(G);return(0,i.jsxs)(F,{children:[(0,i.jsx)(I,{isExpand:a,onClick:_,etClick:{etName:"click_get_app_for_pc",etParams:{enter_method:"right_corner_button"}},children:o("get_app")}),(0,i.jsxs)(M,{isExpand:a,children:[(0,i.jsx)(N,{onClick:x,children:(0,i.jsx)(S.A,{width:20,height:20})}),(0,i.jsxs)(H,{children:[!e&&!k&&l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(U,{onClick:w,"data-e2e":"pwa-pc",children:[(0,i.jsx)(A,{width:"21",height:"21"}),(0,i.jsx)(q,{children:o("get_tt_desktop")})]}),(0,i.jsx)(V,{})]}),(0,i.jsxs)(U,{onClick:f,"data-e2e":"pwa-mobile",children:[(0,i.jsx)(j.A,{width:21,height:21}),(0,i.jsx)(q,{children:o("get_tt_app")})]})]})]}),(0,i.jsx)($.u,{onClose:y,visible:s})]})})),X=(0,g.Ay)({resolved:{},chunkName:()=>"survey",isReady(e){const o=this.resolve(e);return!0===this.resolved[o]&&!t.m[o]},importAsync:()=>Promise.all([t.e(9443),t.e(3653)]).then(t.bind(t,52074)),requireAsync(e){const o=this.resolve(e);return this.resolved[o]=!1,this.importAsync(e).then((e=>(this.resolved[o]=!0,e)))},requireSync(e){const o=this.resolve(e);return t(o)},resolve:()=>52074});var K=t(47832),J=t(44445),Z=t(2584);const ee=(0,O.default)("button",{target:"ejylfo50"})(z.WA,(({theme:{colors:e}})=>({cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"52px",background:e.Primary,boxShadow:`0 2px 8px ${e.ShadowSecondary}`,":hover":{background:"linear-gradient(0deg, rgba(0, 0, 0, 0.06), rgba(0, 0, 0, 0.06)), #FE2C55"},":active":{background:"linear-gradient(0deg, rgba(0, 0, 0, 0.12), rgba(0, 0, 0, 0.12)), #FE2C55"}})),"label:ButtonIconContainer;"),oe=(0,n.memo)((function(){const e=(0,E.s)(),o=(0,n.useCallback)((()=>{(0,u.a6)(),Z.O.handleToTop()}),[]);return(0,i.jsx)(ee,{onClick:o,"aria-label":e("accessibilityLabels_forYou_scroll_btn"),children:(0,i.jsx)(J.A,{width:"16",height:"16",fill:"#FFF"})})}));var te=t(46682),re=t(64162),ie=t(4126),ne=t(93995),ae=t(23999),se=t(87933),le=t(26324),de=t(72916),ce=t(8536),pe=t(74690),ue=t(80339),he=t(76435),ge=t(55322),me=t(38203),ve=t(39228);let xe=class{constructor(e){this.fetch=e}fetchProjectListInfo(e){return this.fetch.get("/api/v1/web/project/list/",{query:e,baseUrlType:2})}};xe=(0,r.__decorate)([(0,me._)(),(0,r.__metadata)("design:paramtypes",[ve.pM])],xe);let be=class extends re.E{constructor(e){super(),this.service=e,this.defaultState={inProgress:!1,loading:!0,projectList:[],hideProjectIds:[]}}setLoading(e,o){e.loading=o}removeProjectByIndex(e,o){var t,r;const i=null===(t=null==e?void 0:e.projectList)||void 0===t?void 0:t[o];(null==i?void 0:i.projectID)&&(e.hideProjectIds.push(null==i?void 0:i.projectID),null===(r=e.projectList)||void 0===r||r.splice(o,1))}setProjectList(e,o){var t,r,i;e.projectList=null!==(r=null===(t=o.infos)||void 0===t?void 0:t.filter((o=>{const t=e.hideProjectIds.includes(o.projectID),r=o.taskInProgress>0,i=[4,99].includes(o.status);return!t&&r&&!i})))&&void 0!==r?r:[],e.inProgress=Boolean(null===(i=e.projectList)||void 0===i?void 0:i.length)}fetchProjectList(e){return e.pipe((0,de.n)((()=>this.service.fetchProjectListInfo({}).pipe((0,ce.Z)((e=>(0,ae.of)(this.getActions().setProjectList(e)))),(0,pe.Z)(this.getActions().setLoading(!0)),(0,ue.q)(this.getActions().setLoading(!1)),(0,ge.n)({})))))}refreshData(e){return e.pipe((()=>(0,se.O)(500,15e3).pipe((0,de.n)((()=>(0,ae.of)(this.getActions().fetchProjectList({})))),(0,he.Q)(this.dispose$))))}};(0,r.__decorate)([(0,ie.uk)(),(0,r.__metadata)("design:type",le.c)],be.prototype,"dispose$",void 0),(0,r.__decorate)([(0,ie.h5)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[Object,Boolean]),(0,r.__metadata)("design:returntype",void 0)],be.prototype,"setLoading",null),(0,r.__decorate)([(0,ie.h5)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[Object,Number]),(0,r.__metadata)("design:returntype",void 0)],be.prototype,"removeProjectByIndex",null),(0,r.__decorate)([(0,ie.h5)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[Object,Object]),(0,r.__metadata)("design:returntype",void 0)],be.prototype,"setProjectList",null),(0,r.__decorate)([(0,ie.Mj)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[le.c]),(0,r.__metadata)("design:returntype",void 0)],be.prototype,"fetchProjectList",null),(0,r.__decorate)([(0,ie.Mj)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[le.c]),(0,r.__metadata)("design:returntype",void 0)],be.prototype,"refreshData",null),be=(0,r.__decorate)([(0,ne.n)("uploadProgressModule"),(0,r.__metadata)("design:paramtypes",[xe])],be);var ye=t(75771),_e=t.n(ye),fe=t(5819),we=t(75431);const ke=(0,O.default)("div",{target:"e10yvdyi0"})((({theme:e})=>({width:"404px",height:"87px",marginBottom:"12px",boxShadow:`0px 2px 12px ${e.colors.SDTertiary}`,borderRadius:"8px",backgroundColor:e.colors.BGPrimary,padding:"19px",position:"relative",cursor:"pointer",borderWidth:e.isDark?"1px":0,borderStyle:"solid",borderColor:e.colors.BGTertiary2})),"label:DivUploadProgressContainer;"),Ce=(0,O.default)("div",{target:"e10yvdyi1"})({display:"flex",flexDirection:"row"},"label:DivRowContainer;"),Se=(0,O.default)("div",{target:"e10yvdyi2"})((({theme:{colors:e}})=>({position:"absolute",width:"32px",height:"48px",left:"22px",top:" 16px",background:e.TextQuaternary,borderRadius:"2px"})),"label:DivCoverShadowTop;"),je=(0,we.AH)({height:"52px",width:"38px",borderRadius:"2px",zIndex:"1"},"label:coverBaseStyle;"),Pe=(0,O.default)("div",{target:"e10yvdyi3"})(je,(({isEmpty:e,theme:{colors:o}})=>({display:"flex",justifyContent:"center",alignItems:"center",background:e?o.BGPlaceholderOpaque:o.Primary2})),"label:DivProjectCover;"),Te=(0,O.default)("img",{target:"e10yvdyi4"})({maxWidth:"100%",maxHeight:"100%"},"label:ImgProjectCover;"),Ie=(0,O.default)("div",{target:"e10yvdyi5"})({display:"flex",flexDirection:"column",justifyContent:"start",marginLeft:"16px"},"label:DivMidColumn;"),Le=(0,O.default)("p",{target:"e10yvdyi6"})((({theme:e,error:o})=>[(0,z.zy)({theme:e,fontFamily:"TikTokFont"}),{color:o?e.colors.Negative:e.colors.TextPrimary,textAlign:"left",fontWeight:"600",fontSize:"14px",marginTop:"6px",lineHeight:"22px"}]),"label:PUploadingProgressTitle;"),Ae=(0,O.default)("div",{target:"e10yvdyi9"})((({theme:{colors:e}})=>({marginTop:"12px",height:"4px",width:"278px",backgroundColor:e.LineSecondary})),"label:DivProgressBarParent;"),Ee=(0,O.default)("div",{target:"e10yvdyi10"})((({progress:e,theme:{colors:o}})=>({height:"100%",width:e,backgroundColor:o.Primary})),"label:DivProgressBarChild;"),Be=({index:e,projectInfo:o,handleCloseCard:t})=>{var r;const a=(0,E.s)(),s=(0,n.useCallback)((o=>{null==o||o.stopPropagation(),t(e)}),[e]),{taskFailed:l,lastPostProgress:d}=o,c=`${d}%`,p=null===(r=_e()(null==o?void 0:o.configs,{type:100}))||void 0===r?void 0:r.payload,u=!p,h=`data:image/jpeg;base64,${p}`,g=l>0;return(0,i.jsxs)(ke,{children:[(0,i.jsx)(fe.Mt,{onClick:s,children:(0,i.jsx)(S.A,{})}),(0,i.jsxs)(Ce,{children:[(0,i.jsx)(Se,{}),(0,i.jsx)(Pe,{isEmpty:u,children:!u&&(0,i.jsx)(Te,{src:h})}),(0,i.jsxs)(Ie,{children:[(0,i.jsx)(Le,{error:g,children:g?a("Uploading Failed"):`${a("Uploading")}... ${c}`}),(0,i.jsx)(Ae,{children:(0,i.jsx)(Ee,{progress:c})})]})]})]})},De=()=>{const[{projectList:e,inProgress:o,loading:t},r]=(0,te.S)(be,{selector:e=>({projectList:e.projectList,inProgress:e.inProgress,loading:e.loading}),dependencies:[]}),a=(0,n.useCallback)((e=>{r.removeProjectByIndex(e)}),[r]);return(0,n.useEffect)((()=>{r.refreshData()}),[r]),(0,n.useEffect)((()=>{o||t||r.dispose$()}),[o,t,r]),(0,i.jsx)(i.Fragment,{children:o&&(null==e?void 0:e.map(((e,o)=>(0,i.jsx)(Be,{handleCloseCard:a,index:o,projectInfo:e},e.projectID))))})};var Re=t(61886),We=t(12381);const $e=(0,O.default)("button",{target:"erjlxt90"})(z.WA,(({theme:e})=>{const o=(0,z.t7)(e.direction,"end");return[(0,z.zy)({theme:e,typography:"P4",fontWeight:"bold",color:"TextSecondary",fontFamily:"TikTokFont"}),{position:"relative",right:0,bottom:0,padding:"0 8px",minWidth:"90px",display:"flex",flexDirection:"row",gap:"4px",alignItems:"center",height:"32px",boxShadow:`0 2px 8px ${e.colors.ShadowSecondary}`,borderRadius:"52px",cursor:"pointer",lineHeight:"30px",textAlign:"center",whiteSpace:"nowrap",borderWidth:"1px",borderStyle:"solid",borderColor:e.colors.LineSecondary2,backgroundColor:e.colors.BGSecondary,":hover":{borderColor:e.colors.LinePrimary,backgroundColor:e.colors.BGTertiary},":active":{borderColor:e.colors.LinePrimary,backgroundColor:e.colors.BGInput},transition:"transform 0.3s cubic-bezier(.4,.14,.3,1)",transformOrigin:`${o} bottom`,transform:"none"}]}),"label:ButtonGetCoins;");var Oe=t(73580),ze=t(89001),Fe=t(12016),Ge=t(6585),Me=t(26290);const Ne={request_page:"webapp",entrance_style:"popup",show_page:"homepage_hot"},He=(0,n.memo)((function(){const e=(0,E.s)(),o=(0,Oe.Nj)(Re.y_),{hideTooltip:t,OneTimeTooltip:r}=(0,Fe.w)(Ge.H.GetCoinsKey),a=(0,n.useCallback)((()=>{o.handleLiveWebGetCoinClick(Ne),window.location.href=`/coin/${We.X0.FOR_YOU}?enter_from=web_homepage_hot`}),[o]);return(0,i.jsx)(F,{children:(0,i.jsx)(r,{content:(0,i.jsx)(Me.F.P1,{weight:"medium",children:e("Web_leftNav_getCoins_toolTip")}),children:(0,i.jsxs)($e,{onClick:a,onMouseLeave:()=>t(),children:[(0,i.jsx)(ze.Q,{size:14}),e("WebApp_coin_recharge_1")]})})})}));var Ue=t(16680),qe=t(31942);const Ve=(0,O.default)("button",{target:"eqxfx640"})(z.WA,(({minWidth:e,theme:o,isAnimating:t})=>{const r=(0,z.t7)(o.direction,"end");return[(0,z.zy)({theme:o,typography:"P4",fontWeight:"bold",color:"TextSecondary",fontFamily:"TikTokFont"}),Object.assign({position:"relative",right:0,bottom:0,padding:"0 8px",minWidth:`${e}px`,display:"flex",flexDirection:"row",gap:"4px",alignItems:"center",justifyContent:"center",height:"38px",boxShadow:`0 2px 8px ${o.colors.ShadowSecondary}`,borderRadius:"52px",cursor:"pointer",lineHeight:"30px",textAlign:"center",whiteSpace:"nowrap",borderWidth:"1px",borderStyle:"solid",borderColor:o.colors.LineSecondary2,backgroundColor:o.colors.BGSecondary,":hover":{borderColor:o.colors.LinePrimary,backgroundColor:o.colors.BGTertiary},":active":{borderColor:o.colors.LinePrimary,backgroundColor:o.colors.BGInput},transition:"all 0.1s ease-in-out",transformOrigin:`${r} bottom`,transform:"none"},t&&{width:"36px",minWidth:"36px",height:"36px",borderRadius:"50%",padding:0,fontSize:0,backgroundColor:o.colors.BGSecondary,svg:{opacity:t?0:1,transform:t?"scale(0)":"scale(1)",transition:"opacity 0.1s ease, transform 0.1s ease"}})]}),"label:ButtonAtBottom;"),Ye=(0,O.default)(S.A,{target:"eqxfx641"})("label:StyledIcon;"),Qe=(0,O.default)("div",{target:"eqxfx642"})((({theme:e,isAnimating:o})=>[Object.assign({position:"relative",right:0,bottom:0,padding:"0 8px",borderRadius:"50%",borderWidth:"1px",borderStyle:"solid",borderColor:e.colors.LineSecondary2,boxShadow:`0 2px 8px ${e.colors.ShadowSecondary}`,":hover":{borderColor:e.colors.LinePrimary,backgroundColor:e.colors.BGTertiary},":active":{borderColor:e.colors.LinePrimary,backgroundColor:e.colors.BGInput},cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1,width:"36px",height:"36px",background:e.colors.BGSecondary,[`${Ye}`]:{width:"16px",height:"16px"},transition:"all 0.1s ease-in-out"},o&&{width:"102px",borderRadius:"52px"})]),"label:DivCloseWrapper;");var Xe=t(96689),Ke=t(33805);const Je=(0,n.memo)((({isDefaultExpanded:e})=>{var o;const t=(0,E.s)(),[r,a]=(0,Ue.MR)((e=>e),T.bN),[l,d]=(0,n.useState)(!1),[c,p]=(0,n.useState)(!1),u=(0,Ke.oN)(null===(o=null===window||void 0===window?void 0:window.location)||void 0===o?void 0:o.pathname),h=(0,Xe.G)({modalConfig:{query:{enter_method:"qr_dynamic_popup"},popupType:"qr_bottom_right",loginPath:"/login/qrcode"}}),g=(0,n.useCallback)((()=>{p(!0),setTimeout((()=>{a.closeModal({enter_method:"click_x"}),a.setLoginModalShow(!1),p(!1)}),100)}),[]);(0,n.useEffect)((()=>{e&&"homepage_follow"!==u&&!r.loginModalShow&&h(),"homepage_follow"===u&&g()}),[]),(0,n.useEffect)((()=>{var e;e={enter_method:"bottom_right_button",page_name:u},s.f.sendEvent("qr_login_button_show",e)}),[]);const m=(0,n.useCallback)((()=>{var e;e={enter_method:"bottom_right_button",page_name:u},s.f.sendEvent("click_QR_login",e),d(!0),setTimeout((()=>{h(),d(!1)}),100)}),[]);return(0,i.jsxs)(F,{children:[!r.loginModalShow&&(0,i.jsxs)(Ve,{id:"button-at-bottom-right",minWidth:102,isAnimating:l,onClick:m,role:"button",tabIndex:0,children:[(0,i.jsx)(qe.z,{size:14}),t("desktopWeb_dynamicBottom_right_logIn")]}),r.loginModalShow&&(0,i.jsx)(Qe,{onClick:g,id:"close-button-at-bottom-right",isAnimating:c,role:"button",tabIndex:0,children:(0,i.jsx)(Ye,{})})]})}));var Ze=t(97320),eo=t(58542);const oo=(0,O.default)("div",{target:"efbmw0z0"})((({theme:e,popupLeft:o,popupTop:t})=>[{position:"fixed",left:`${o}px`,top:`${t}px`,width:"172px",padding:"16px",borderRadius:"12px",background:e.colors.BGSecondary,boxShadow:"0 4px 10px rgba(0, 0, 0, 0.1)",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"}]),"label:PromotionContainer;"),to=(0,O.default)("div",{target:"efbmw0z1"})((({theme:{colors:e,isDark:o}})=>[{width:"32px",height:"32px",color:o?e.TextSecondary:e.ConstBGInverse,marginBottom:"16px"}]),"label:IconWrapper;"),ro=(0,O.default)("div",{target:"efbmw0z2"})((({theme:e})=>{const o=(0,z.t7)(e.direction,"end");return[(0,z.zy)({theme:e,typography:"P3",fontWeight:"medium",color:"TextSecondary",fontFamily:"TikTokFont"}),{width:"150px",height:"48px",marginBottom:"24px",textAlign:"center",transformOrigin:`${o} bottom`,transform:"none"}]}),"label:PromotionText;"),io=(0,O.default)("button",{target:"efbmw0z3"})((({theme:{colors:e,isDark:o}})=>[{width:"128px",height:"32px",backgroundColor:o?"#fff":e.ConstBGInverse,color:o?e.ConstBGInverse:e.BGPrimary,borderRadius:"8px",fontSize:"14px",fontWeight:"bold",border:"none",cursor:"pointer"}]),"label:InstallButton;");var no=t(89311);const ao=(0,n.memo)((({isDefaultExpanded:e})=>{var o;const t=(0,d.ur)(),r=(0,Ke.oN)(null===(o=null===window||void 0===window?void 0:window.location)||void 0===o?void 0:o.pathname),[a,l]=(0,n.useState)(e&&"homepage_follow"!==r),[c,p]=(0,n.useState)(!1),[u,h]=(0,n.useState)(!1),{isRTL:g}=(0,no.m)(),m=(0,E.s)();let v;v=g?a?-20:-75:a?-155:-100;const x=a?-190:-188;(0,n.useEffect)((()=>{var e;e={page_name:r},s.f.sendEvent("install_tt_button_show",e),"homepage_follow"===r&&l(!1)}),[]);const b=(0,n.useCallback)((()=>{t.handleInstallationClick()}),[t]);return(0,i.jsx)(eo.Xwo,{noArrow:!0,open:a&&!u,trigger:(0,i.jsxs)(F,{children:[!a&&(0,i.jsxs)(Ve,{id:"pwa-button-at-bottom-right",minWidth:146,isAnimating:c,onClick:()=>{var e;e={page_name:r},s.f.sendEvent("install_tt_button_click",e),p(!0),setTimeout((()=>{l(!0),p(!1)}),100)},children:[(0,i.jsx)(Ze.a,{size:14}),m("desktopWeb_dynamicBottom_installTikTok")]}),a&&(0,i.jsx)(Qe,{id:"pwa-close-button-at-bottom-right",isAnimating:u,onClick:()=>{h(!0),setTimeout((()=>{l(!1),h(!1)}),20)},children:(0,i.jsx)(Ye,{})})]}),children:(0,i.jsxs)(oo,{popupLeft:v,popupTop:x,children:[(0,i.jsx)(to,{children:(0,i.jsx)(Ze.a,{size:40})}),(0,i.jsx)(ro,{children:m("desktopWeb_dynamicBottom_installTikTok_desc")}),(0,i.jsx)(io,{onClick:b,children:m("desktopWeb_dynamicBottom_installTikTok_Cta")})]})})})),so=(0,O.default)("div",{target:"ew8lpw50"})((({showTop:e,bottom:o=0,shouldHide:t})=>[{insetInlineEnd:"24px",position:"fixed",bottom:`${o}px`,zIndex:7,display:t?"none":"flex",flexDirection:"column",alignItems:"flex-end",marginBottom:"8px",transform:e?"none":"translateY(40px)",transition:"all 400ms cubic-bezier(0.65, 0, 0.35, 1)"}]),"label:DivFixedBottomContainer;");var lo=t(27008);const co=t.p+"f1c49ab5fa04e27c8c12.png",po=t.p+"14263eb8081d859f559d.png",uo=(0,O.default)("div",{target:"ea9a47v0"})({},"label:DivTitleContainer;"),ho=(0,O.default)("div",{target:"ea9a47v1"})({overflow:"hidden"},"label:DivQRCodeContainer;"),go=(0,O.default)("div",{target:"ea9a47v2"})((({theme:e})=>({backgroundImage:`url(${po})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",width:"232px",height:"274px",paddingInline:"1.25rem",paddingBlock:"1rem",display:"flex",flexDirection:"column",gap:".625rem",boxSizing:"border-box",alignItems:"center",backgroundColor:eo.Tj4.UIShapeNeutral,borderRadius:"16px",border:e.isDark?`0.5px solid ${eo.Tj4.UIImageOverlayWhiteA40}`:"none"})),"label:DivApkDownloadContainer;"),mo=(0,O.default)("div",{target:"ea9a47v3"})((({theme:e})=>[{display:"none","@media screen and (max-width: 1024px)":{display:"flex",cursor:"pointer",position:"absolute",top:"-.5rem",borderRadius:"50%",overflow:"hidden",height:"1.5rem",width:"1.5rem",backgroundColor:eo.Tj4.UIShapeNeutral,border:`0.5px solid ${eo.Tj4.UIImageOverlayWhiteA40}`,alignItems:"center",justifyContent:"center"}},"rtl"===e.direction?{left:"-.5rem"}:{right:"-.5rem"}]),"label:DivCloseButtonContainer;"),vo=(0,n.memo)((function({onClose:e}){return(0,i.jsx)(mo,{onClick:e,children:(0,i.jsx)(eo.m8I,{color:"UIShapeText1OnNeutral",size:"1rem"})})})),xo=(0,n.memo)((function({link:e,scanText:o,ecLevel:t}){const[r,a]=(0,n.useState)(!1),s=null!=o?o:"Scan QR code to download TikTok – Make Your Day";return r?null:(0,i.jsxs)(go,{"data-tux-color-scheme":"light",children:[(0,i.jsx)(vo,{onClose:()=>a(!0)}),(0,i.jsx)(eo.rxD,{direction:"column",gap:4,children:(0,i.jsx)(uo,{children:(0,i.jsx)(Me.F.P1,{weight:"medium",color:"UIShapeText1OnNeutral",children:s})})}),(0,i.jsx)(ho,{children:(0,i.jsx)(lo.QRCode,{value:e,size:156,logoImage:co,logoWidth:38,removeQrCodeBehindLogo:!0,quietZone:18,logoPadding:5,eyeRadius:8,qrStyle:"dots",style:{borderRadius:"8px"},ecLevel:null!=t?t:"Q"})})]})}));xo.defaultProps=Object.assign(Object.assign({},xo.defaultProps),{"data-e2e":"apk-download"});const bo=(0,n.memo)((function({pageType:e}){const{isInProductHoldout:o}=(0,x.Vv)(),t=(0,v.E)(),{isJustWatchedEnabled:g}=(0,x.Kg)(),{vid:S}=(0,x.vY)(),{removeShortcutPop:j}=(0,x.gR)(),P=(0,x.gg)(),{shouldShowApkDownload:I}=P,L=(0,r.__rest)(P,["shouldShowApkDownload"]),{isInDynamicBottomRightExperiment:A,isInDynamicBottomRightControl:E,isInDynamicBottomRightExpanded:B}=(0,x._o)(),{user:D}=(0,b.L$)((0,f.W)((()=>["user"]),[])),{isMobile:R}=(0,b.L$)((0,_.U)((()=>["isMobile"]),[])),{isCookieBannerShowing:W}=(0,a.P)(C.b),$=(0,k.si)(),{isCommentPanelActive:O}=(0,l.Cx)((e=>({isCommentPanelActive:e.isActive})),T.bN),[{isPwaInstallable:z}]=(0,d.nO)((e=>({isPwaInstallable:e.isPwaInstallable})),T.bN),[F,G]=(0,n.useState)(!1),[M,N]=(0,n.useState)(!1),[H,U]=(0,n.useState)(0),[q,V]=(0,n.useState)(!1),[J,Z]=(0,n.useState)(!1),ee=Y(),{shouldShowSurvey:te}=(0,K.uU)(),{pathname:re}=(0,c.useLocation)(),ie=(0,p._g)((()=>G(0!==(0,u.hY)())),[],200),ne=!M&&5!==e&&![k.RD.SurveyEntrance,k.RD.LiveSurvey].includes($.currentType)&&!j,ae=g&&(0,h.cj)(re);(0,n.useEffect)((()=>{s.f.getVarWithCb("tiktok_web",null,(e=>{1===(null==e?void 0:e.can_split_videos)&&V(!0)}))}),[]),(0,n.useEffect)((()=>{"v0"!==S&&(0,w.Q)().then((e=>{Z(e)}))}),[S]),(0,n.useEffect)((()=>{var e;if(!W)return void U(0);const o=document.querySelector("div[class*=DivCookieBannerContainer]"),t=null!==(e=null==o?void 0:o.offsetHeight)&&void 0!==e?e:0;U(t)}),[W]),(0,n.useEffect)((()=>(window.addEventListener("scroll",ie),()=>{window.removeEventListener("scroll",ie)})),[ie]);const se=(0,n.useCallback)((()=>{N(!0)}),[]),le=(0,n.useCallback)((()=>{V(!1)}),[]),de=(0,n.useCallback)((()=>A&&!E?D?J?(0,i.jsx)(He,{}):!ee&&z?(0,i.jsx)(ao,{isDefaultExpanded:B}):(0,i.jsx)(Q,{isInDynamicBottomRightExperiment:A}):(0,i.jsx)(Je,{isDefaultExpanded:B}):J?(0,i.jsx)(He,{}):(0,i.jsx)(Q,{isInDynamicBottomRightExperiment:A})),[D,J]);return I?(0,i.jsx)(so,{showTop:!o||F,bottom:H,shouldHide:O,children:(0,i.jsx)(xo,Object.assign({},L))}):(0,i.jsxs)(so,{showTop:!o||F,bottom:H,shouldHide:O,children:[ne&&(0,i.jsx)(y.S,{onClose:se}),D&&!R&&q&&(0,i.jsx)(De,{handleCloseWindow:le}),te&&(0,i.jsx)(X,{}),t&&(0,i.jsx)(m,{}),ae?null:de(),o&&!ae?(0,i.jsx)(oe,{}):null]})}))},16229:(e,o,t)=>{t.d(o,{b:()=>l});var r=t(58632),i=t(64162),n=t(4126),a=t(93995),s=t(26324);let l=class extends i.E{constructor(){super(),this.defaultState={isCookieBannerShowing:!1}}setCookieBannerShowing(e,o){e.isCookieBannerShowing=o}};(0,r.__decorate)([(0,n.uk)(),(0,r.__metadata)("design:type",s.c)],l.prototype,"dispose$",void 0),(0,r.__decorate)([(0,n.h5)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[Object,Boolean]),(0,r.__metadata)("design:returntype",void 0)],l.prototype,"setCookieBannerShowing",null),l=(0,r.__decorate)([(0,a.n)("FixBottomModule"),(0,r.__metadata)("design:paramtypes",[])],l)},92843:(e,o,t)=>{t.d(o,{Q:()=>s});var r=t(58632),i=t(12381),n=t(26325),a=t(39228);const s=({timeout:e}={})=>(0,r.__awaiter)(void 0,void 0,void 0,(function*(){const o=e=>(console.error(e),!1);try{const t=`${(0,n.$_)(4)}${i.$z.RECHARGE_CHECK_EXTERNAL_ENTRY}`,r={page_source:0},s=a.hd.post(t,{query:r}),l=e?new Promise(((o,t)=>setTimeout((()=>t(new Error("Timeout Error"))),e))):null,{data:d,status_code:c}=yield l?Promise.race([s,l]):s;return!d||c?o(`Check external entry api failed with status_code=${c}`):Boolean(d.show_external_entry)}catch(e){return o(`Check show get coins entrance failed ${e}`)}}))},12381:(e,o,t)=>{t.d(o,{$z:()=>r,X0:()=>i});const r={RECHARGE_CHECK_EXTERNAL_ENTRY:"/webcast/wallet_api_tiktok/recharge/check_external_entry"},i={FOR_YOU:"rLJKRPE"}}}]);