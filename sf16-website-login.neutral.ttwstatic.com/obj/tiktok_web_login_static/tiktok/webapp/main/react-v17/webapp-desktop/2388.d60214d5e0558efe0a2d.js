"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2388],{93749:(e,t,r)=>{r.d(t,{EE:()=>_.MultimediaComponentRef,EN:()=>_.ExtraMetricsParams,UX:()=>_.Nullable,ap:()=>_.AppLoggerParams,j7:()=>_.PlayerAttributes,rr:()=>E,xk:()=>L});var n=r(24643),i=r(93608),o=r(40099),a=r(35323),u=r(93987),l=r(12588),d=r(52961),s=r(33414),c=r(9470),p=r(52853),v=r(14583),y=r(37085),m=r(52794),f=r(95717),h=r(98730),b=r(91257),_=r(31031),g=r(90184);function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){P(e,t,r[t])}))}return e}const w={color:"#fff",backgroundColor:"#2a9d1f",position:"absolute",zIndex:2,top:"30px"},k="Metrics",C="PlayerCall",O="PlayerEvent",S="PlayerLife",L=(0,o.memo)((0,o.forwardRef)((function({bitrateInfo:e,defaultBitrate:t,duration:r,autoplay:_,loop:P,oncanplay:L,onplay:E,onwaiting:M,onended:V,ontimeupdate:R,onerror:j,onpause:D,onplaying:A,onbreak:x,onvolumechange:I,onVideoPlayEnd:B,teaParams:U,onAutoplayPrevented:F,mode:N,id:q,volume:Q,url:H,playbackRate:z,extraMetricsParams:Y,videoPlayReport:$,videoExperienceReport:G,appLoggerParams:J,muted:W,useHEVC:K=!1,hevcTest:X={vid:"v0",open:!1,closePreload:!1,qualityType:20,hevcQualityType:28},playbackAbTestInfo:Z=c.Ah,subtitleList:ee,curSubtitle:te,onSubtitleCallback:re=e=>{},renderState:ne=l.R.ACTIVE},ie){const oe=(0,o.useRef)(null),ae=(0,o.useRef)(),ue=(0,o.useRef)(null),le=(0,o.useRef)(ne),[de,se]=(0,o.useState)((new Date).getTime()),[ce,pe]=(0,o.useState)(),[ve,ye]=(0,o.useState)();(0,o.useEffect)((()=>{d.M.setHevcTestData(X),d.M.setABTest(Z);const{playerPreload:e}=Z;p._.updateMaxQueueCount((null==e?void 0:e.maxQueueCount)||3);const t=d.M.checkHevcResult(),{open:r,closePreload:n,qualityType:i,hevcQualityType:o}=t;var a;s.Tz.updateConfig({quality:i,hevcQuality:o}),n||null===(a=ue.current)||void 0===a||a.updatePreloadCodec(r?"h265":"h264")}),[X,Z]);const me=(0,o.useMemo)((()=>d.M.checkHevcResult()),[q]),fe=(0,o.useMemo)((()=>ee&&ee.length>0?ee:[]),[ee]);(0,o.useEffect)((()=>{var e;fe.length>0?(ae.current?ae.current.setSubTitles(fe):(ae.current=new s.SX({subTitlesList:fe}),ae.current.on("update",(e=>{re(e)})),ae.current.on("change",(e=>{re(e)})),ae.current.on("error",(e=>{re(e)}))),ue.current&&ae.current.attach(ue.current.element)):null===(e=ae.current)||void 0===e||e.switchOff()}),[fe,q]),(0,o.useEffect)((()=>{var e,t;te?null===(e=ae.current)||void 0===e||e.switch(te):null===(t=ae.current)||void 0===t||t.switchOff()}),[te,q]),(0,o.useEffect)((()=>{var e;let t=ne;ue.current?(ne===l.R.BACKUP&&(t=l.R.RETAIN),g.uk.updatePlayer(ue.current,t),t===l.R.ACTIVE&&_&&(ue.current.play(),ue.current.forceAutoplay=!1),t!==l.R.ACTIVE&&ue.current.pause()):ne===l.R.RETAIN&&(t=l.R.BACKUP),(0,v.Tb)(S,"renderStateChange",q,null===(e=ue.current)||void 0===e?void 0:e.uuid,`renderState:${ne} state:${t} muted:${W} volume:${Q} autoplay:${_}`),le.current=t}),[ne]);const he=(0,o.useMemo)((()=>(0,y.pQ)(e,t,q,r,_,N,null==Y?void 0:Y.pathId,U,Q,W,H,J,null==Y?void 0:Y.vqscore,me,de,Z)),[e,t,q,U,r,_,N,Q,H,J,Y,me,de,Z]),be=(0,o.useRef)(he);be.current=he;const _e=(0,o.useCallback)((()=>{var e,t,r,n;const i=null===(e=ue.current)||void 0===e?void 0:e.attributes;if(!i)return{};const o=i.currentSrc,a=null===(t=ue.current)||void 0===t?void 0:t.curDefinition;var u;return{buffered:i.buffered,currentTime:i.currentTime,ended:i.currentTime,currentSrc:o,duration:i.duration,readyState:i.readyState,networkState:i.networkState,error:"",playerType:null===(r=ue.current)||void 0===r?void 0:r.type,volume:i.volume,muted:i.muted,videoBitrate:null==a?void 0:a.bitrate,videoQuality:null==a?void 0:a.definition,codecType:null!==(u=null==a?void 0:a.codecType)&&void 0!==u?u:"h264",play_url:o,render_state:(null===(n=ue.current)||void 0===n?void 0:n.state)||""}}),[]),ge=(0,o.useMemo)((()=>{let e=null;return U&&(e=(0,m.JL)(U,Y)),e}),[U,Y,q]),Pe=(0,o.useRef)(ge);Pe.current=ge;const Te=(0,o.useMemo)((()=>{let e=null;if(q&&U){var t;const r=null===(t=ue.current)||void 0===t?void 0:t.attributes;e=(0,m.wH)(q,U,null==Y?void 0:Y.videoDimensionParams,N,r)}return e}),[q,U,Y,N,ue.current,q]),we=(0,o.useMemo)((()=>{var e;let t=null;if((0,v.Tb)(k,"videoParams preloaderInfo",null===(e=ue.current)||void 0===e?void 0:e.uuid,ce),U&&ue.current){const e=ue.current.curDefinition;t=(0,m._g)(q,U,e,ce,ue.current)}return t}),[q,U,ce,ue.current,q]),ke=(0,o.useMemo)((()=>{let e=!1;if(ue.current){const t=ue.current.curDefinition;e=(0,m.Vz)(t)}return e}),[]),Ce=(0,o.useCallback)((()=>{var e;if((0,a.uQ)(u.Y.VideoRequest),!Te||1===N)return;const t=(0,m.zH)(Te);(0,v.Tb)(k,"handleVideoRequest",null===(e=ue.current)||void 0===e?void 0:e.uuid,Te),i.f.event(f.zD.Request,t)}),[Te,N,q]),Oe=(0,o.useCallback)((e=>{var t;if(!Te||!U||!ue.current)return;const{curDefinition:r,attributes:n}=ue.current,o=(0,m.YU)(Te,r,U,ke,e.duration,n);(0,v.Tb)(k,"handleVideoRequestResponse",null===(t=ue.current)||void 0===t?void 0:t.uuid,e,o),i.f.event(f.zD.RequestResponse,o)}),[Te,ke,U,q]),Se=(0,o.useCallback)((e=>{if(!Te||1===N)return;const t=(0,m.eJ)(Te);t.block_type=(null==e?void 0:e.blockType)||0,i.f.event(f.zD.BlockStart,t)}),[Te,N,q]),Le=(0,o.useCallback)((e=>{var t,r;if(!Te||!we)return;const n=null===(t=ue.current)||void 0===t?void 0:t.attributes,o=(0,m.et)(Te,we,ke,e,n);(0,v.Tb)(k,"handlePlayFailed",null===(r=ue.current)||void 0===r?void 0:r.uuid,e,o),i.f.event(f.zD.PlayFailed,o)}),[Te,we,ke,q]),Ee=(0,o.useCallback)((e=>{var t;if(null==x||x(),!(Te&&we&&U&&ue.current&&1!==N))return;const{curDefinition:r,attributes:n}=ue.current,o=(0,m.tW)(Te,we,ke,r,U,e.currentTime,e.duration,e.pauseDuration,e.vqm,ue.current,n);(0,v.Tb)(k,"handlePlayEnded",null===(t=ue.current)||void 0===t?void 0:t.uuid,e,o);const a=(0,m.Ug)(ue.current),u=(l=T({vid:q,videoQuality:0,stayDuration:0,playPos:Math.round(1e3*e.currentTime)},a),d=null!=(d={logid:U.log_id||"none"})?d:{},Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(d)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(d)).forEach((function(e){Object.defineProperty(l,e,Object.getOwnPropertyDescriptor(d,e))})),l);var l,d;null==B||B(u),i.f.event(f.zD.PlayEnded,o)}),[Te,we,ke,U,N,q]),Me=(0,o.useCallback)((e=>{var t;if((0,a.uQ)(u.Y.VideoFirstFrame),!Te||1===N)return;const r=(0,m.YC)(Te,e.duration);(0,v.Tb)(k,"handleFirstFrame",null===(t=ue.current)||void 0===t?void 0:t.uuid,r);const n=(0,a.xt)();i.f.event(f.zD.FirstFrame,T({},r,n))}),[Te,N,q]),Ve=(0,o.useCallback)((t=>{var r,n;if(!Te||!we||1===N)return;const o=null===(r=ue.current)||void 0===r?void 0:r.attributes,a=(0,m.O6)(Te,we,ke,t,e,o);(0,v.Tb)(k,"handlePlayQuality",null===(n=ue.current)||void 0===n?void 0:n.uuid,t,we.preload_time),i.f.event(f.zD.PlayQuality,a)}),[Te,we,ke,N,q]),Re=(0,o.useCallback)((e=>{var t;if(!Te||!we||1===N)return;const r=null===(t=ue.current)||void 0===t?void 0:t.attributes,n=(0,m.aF)(Te,we,ke,e.duration,r);n.block_type=null==e?void 0:e.blockType,i.f.event(f.zD.Block,n)}),[Te,we,ke,N,q]),je=(0,o.useCallback)((e=>{e&&e.error&&i.f.event("video_mse_error",{code:e.error.errorCode||0,message:e.error.errorMessage||"",httpCode:e.error.httpCode||0,url:e.error.url,type:"running"})}),[ue.current,ve]),De=(0,o.useCallback)((e=>{D&&D(e);const t=_e();$&&Pe.current&&$.handlePause(T({},Pe.current,t))}),[$,D,ue.current,q]),Ae=(0,o.useCallback)((e=>{E&&E(e)}),[ue.current,ve]),xe=(0,o.useCallback)((e=>{(0,v.Tb)(O,"onWaiting"),M&&M(e);const t=_e();$&&Pe.current&&$.handleWaiting(T({},Pe.current,t))}),[$,M,ue.current,ve]),Ie=(0,o.useCallback)((e=>{R&&R(e);const t=_e();$&&Pe.current&&$.handleTimeUpdate(T({},Pe.current,t)),G&&!G.getFirstFrameReport()&&G.reportVideoFirstFrame(t.currentTime||0)}),[$,G,R,ue.current,ve]),Be=(0,o.useCallback)((e=>{j&&j(e),$&&Pe.current&&$.handleError(Pe.current)}),[$,j,ue.current,ve]),Ue=(0,o.useCallback)((e=>{var t;V&&V(e),$&&Pe.current&&$.handleEnded(Pe.current),P&&(null===(t=ue.current)||void 0===t||t.replay())}),[$,V,P,ue.current,ve]),Fe=(0,o.useCallback)((e=>{var t,r,n;if((0,v.Tb)(O,"onPlaying",null===(t=ue.current)||void 0===t?void 0:t.uuid),A&&A(e),!G)return;const i=(null===(n=be.current)||void 0===n||null===(r=n.extra)||void 0===r?void 0:r.url)||"";G.reportVideoInteract({endTime:Date.now(),videoSource:i})}),[G,A,ue.current,ve]),Ne=(0,o.useCallback)((()=>{}),[ue.current]),qe=(0,o.useCallback)((()=>{if(!ue.current)return;const{volume:e,muted:t}=ue.current;null==I||I(e,t)}),[ue.current,I]),Qe=(0,o.useCallback)((e=>{var t,r,n;if((0,v.Tb)(O,"onCanplay",null===(t=ue.current)||void 0===t?void 0:t.uuid),(0,a.uQ)(u.Y.VideoCanPlay),L&&L(e),!G||G.getCurrentPageReport())return;const i=(null===(n=be.current)||void 0===n||null===(r=n.extra)||void 0===r?void 0:r.url)||"";G.reportVideoFirstScreen({endTime:Date.now(),videoSource:i}),G.reportVideoAddition({endTime:Date.now(),videoSource:i})}),[G,L,ue.current,ve]),He=(0,o.useCallback)((()=>{var e;(0,v.Tb)(O,"onPlaybackInstanceChanged",null===(e=ue.current)||void 0===e?void 0:e.uuid),$&&Pe.current&&$.handlePlayTime(Pe.current)}),[$,ve]),ze=(0,o.useCallback)((e=>{var t,r,n;(0,v.Tb)(k,"onPreloaderInfoReady preloaderInfo",null===(t=ue.current)||void 0===t?void 0:t.uuid,e,"preloadConfig:",{maxQueueCount:null==Z||null===(r=Z.playerPreload)||void 0===r?void 0:r.maxQueueCount,preloadTime:null==Z||null===(n=Z.playerPreload)||void 0===n?void 0:n.preloadTime}),pe(e)}),[ue.current,ve]),Ye=(0,o.useCallback)((()=>{}),[]),$e=(0,o.useCallback)((e=>{var t;(0,v.Tb)(O,"handlerAutoplayPrevented",null===(t=ue.current)||void 0===t?void 0:t.uuid),null==F||F(e)}),[ue.current,ve]),Ge=(0,o.useCallback)((e=>{(0,v.Tb)(O,"handleContextMenu"),e.preventDefault()}),[ue.current,ve]);return(0,o.useEffect)((()=>{se((new Date).getTime()),Z.playerLogger&&g.uk.setCustomTracker({event:(e,t)=>{(0,v.Tb)("VodLogger",e,t),i.f.event(e,t)}})}),[ve]),(0,o.useEffect)((()=>()=>{var e;(0,v.Tb)(C,"releasePlayer metrics",q),(null===(e=ue.current)||void 0===e?void 0:e.metrics)&&ue.current.metrics.stop()}),[q]),(0,g.j9)("PlayEnded",Ee,"metrics",ue.current),(0,g.j9)("VideoRequest",Ce,"metrics",ue.current),(0,g.j9)("VideoRequestResponse",Oe,"metrics",ue.current),(0,g.j9)("BlockStart",Se,"metrics",ue.current),(0,g.j9)("Block",Re,"metrics",ue.current),(0,g.j9)("PlayQuality",Ve,"metrics",ue.current),(0,g.j9)("PlayFailed",Le,"metrics",ue.current),(0,g.j9)("FirstFrame",Me,"metrics",ue.current),(0,g.j9)("canplay",Qe,"event",ue.current),(0,g.j9)("canplaythrough",Ne,"event",ue.current),(0,g.j9)("play",Ae,"event",ue.current),(0,g.j9)("waiting",xe,"event",ue.current),(0,g.j9)("ended",Ue,"event",ue.current),(0,g.j9)("timeupdate",Ie,"event",ue.current),(0,g.j9)("error",Be,"event",ue.current),(0,g.j9)("pause",De,"event",ue.current),(0,g.j9)("playing",Fe,"event",ue.current),(0,g.j9)("playCatch",je,"event",ue.current),(0,g.j9)("autoplayPrevented",$e,"event",ue.current),(0,g.j9)("downloaderError",Ye,"event",ue.current),(0,g.j9)("volumechange",qe,"event",ue.current),(0,g.j9)("contextmenu",Ge,"element",ue.current),(0,o.useEffect)((()=>{var e,t,r,n,i,o,d;if(!(null===(t=be.current)||void 0===t||null===(e=t.extra)||void 0===e?void 0:e.url))return;const c=le.current;(0,v.Tb)(S,"usePlayer0",q,null===(r=ue.current)||void 0===r?void 0:r.uuid,c,W,Q,_,he.extra.url),ue.current||(ue.current=g.uk.usePlayer(be.current,c),ye(ue.current.uuid));const y=ue.current;if(!y||!oe.current||!y.element)return;ae.current&&ae.current.attach(y.element);let m=!1,f=!1;if(null===(n=be.current)||void 0===n?void 0:n.hevcResult){const{hevcResult:e}=be.current;m=e.open,f=e.closePreload,s.Tz.updateConfig({quality:e.qualityType,hevcQuality:e.hevcQualityType})}const h=p._.getXgPayloadsAll();return(0,v.Tb)(C,"xgPreloaderPayloads",q,null==U?void 0:U.log_id,h.map((e=>e.data.vid)),"preloadConfig",{maxQueueCount:null==Z||null===(i=Z.playerPreload)||void 0===i?void 0:i.maxQueueCount,preloadTime:null==Z||null===(o=Z.playerPreload)||void 0===o?void 0:o.preloadTime}),f||(y.updatePreloadCodec(m?"h265":"h264"),y.preloadResources(h)),c===l.R.ACTIVE&&(y.forceAutoplay=!0),y.muted=W||!1,y.volume=Q||1,null===(d=y.event)||void 0===d||d.on("preloaderInfoReady",ze),y.on("autoplay_was_prevented",$e),g.uk.mountDom(y,oe.current),()=>{var e,t,r,n;y&&y.element&&y.element.parentNode&&(null===(e=y.event)||void 0===e||e.off("preloaderInfoReady",ze),null==y||y.off("autoplay_was_prevented",$e),(0,v.Tb)(S,"releasePlayer",q,"removeChild",null===(t=ue.current)||void 0===t?void 0:t.uuid,`playerState:${c}`,he.extra.url),g.uk.releasePlayer(ue.current||null),ue.current=null,null===(r=ae.current)||void 0===r||r.detach(),null===(n=ae.current)||void 0===n||n.destroy(),ae.current=null,(0,a.uQ)(u.Y.PlayerDestroy))}}),[he.extra.url]),(0,o.useEffect)((()=>(window.multimediaPool=g.uk,d.M.setHevcEffectiveConditions((0,h.k)()),()=>{var e;(0,v.Tb)(S,"releasePlayer]111",q,null===(e=ue.current)||void 0===e?void 0:e.uuid,`playerState:${le.current}`),ue.current&&(g.uk.releasePlayer(ue.current),ue.current=null)})),[]),(0,o.useEffect)((()=>{const e=d.M.getInstance();e.channelInfo=(null==J?void 0:J.tea)||null;const{region:t="",webId:r="",isLogin:n=!1}=J||{};e.regionInfo={region:t,uid:r,isLogin:n},e.abTestVersion=(null==J?void 0:J.abTestVersion)||"",e.hevcAbVersion=(null==J?void 0:J.hevcAbTestVersion)||"",e.isTTP=null==J?void 0:J.isTTP}),[J]),(0,o.useEffect)((()=>{d.M.pageName=(null==Y?void 0:Y.pathId)||"",d.M.playMode=(0,m.AI)(N)}),[Y,N]),(0,o.useEffect)((()=>{const e=(0,y.J)(U);p._.updateDefaultDefinition(e)}),[U]),(0,o.useEffect)((()=>{ue.current&&z&&(ue.current.playbackRate=z)}),[z]),(0,o.useEffect)((()=>{ue.current&&ue.current.mute(W||!1)}),[W]),(0,o.useEffect)((()=>{ue.current&&Q&&(ue.current.volume=Q)}),[Q]),(0,o.useEffect)((()=>()=>{He()}),[He]),(0,o.useImperativeHandle)(ie,(()=>({play:()=>{var e;return(0,v.Tb)(C,"play",null===(e=ue.current)||void 0===e?void 0:e.uuid,le.current,le.current!==l.R.ACTIVE),ue.current&&le.current===l.R.ACTIVE?(g.uk.callPlay(),ue.current.play()):Promise.resolve()},replay:()=>{var e;(0,v.Tb)(C,"replay",null===(e=ue.current)||void 0===e?void 0:e.uuid,le.current),ue.current&&ue.current.replay()},pause:()=>{var e;(0,v.Tb)(C,"pause",null===(e=ue.current)||void 0===e?void 0:e.uuid,le.current),ue.current&&($&&$.triggerPause({enter_method:"click_pause",playMode:N||b.ey.OneColumn,group_id:q}),ue.current.pause())},load:e=>{var t;(0,v.Tb)(C,"load",null===(t=ue.current)||void 0===t?void 0:t.uuid,le.current),ue.current&&ue.current.load(e)},mute:e=>{var t;(0,v.Tb)(C,"mute",null===(t=ue.current)||void 0===t?void 0:t.uuid,le.current),ue.current&&ue.current.mute(e)},style:(e,t)=>{ue.current&&ue.current.style(e,t)},seek:e=>{var t;(0,v.Tb)(C,"seek",null===(t=ue.current)||void 0===t?void 0:t.uuid,le.current),ue.current&&ue.current.seek(e)},addSubtitle:(e,t)=>{ue.current&&ue.current.addSubtitle(e,t)},buffered:()=>ue.current&&ue.current.buffered()||new TimeRanges,getAttributes:()=>ue.current?ue.current.attributes:f.C7,getPlayerType:()=>ue.current?ue.current.type:"",getPlaybackQuality:()=>ue.current?ue.current.playbackQuality:f.EH,bindEvent:(e,t)=>{var r;(0,v.Tb)(C,"bindEvent",null===(r=ue.current)||void 0===r?void 0:r.uuid,le.current,e),ue.current&&ue.current.element&&ue.current.element.addEventListener(e,t)},enterFullscreen:e=>ue.current?ue.current.enterFullscreen(e):Promise.resolve(),exitFullscreen:e=>ue.current?ue.current.exitFullscreen(e):Promise.resolve(),updatePlayer:e=>{ue.current&&g.uk.updatePlayer(ue.current,e)},getVideoInfo:()=>we,setVolume:e=>{ue.current&&(ue.current.volume=e)},setPlaybackRate:e=>{ue.current&&(ue.current.playbackRate=e)}})),[we,$,N]),(0,n.jsx)("div",{className:"xgplayer-container tiktok-web-player playback_refactor",ref:oe,children:(0,n.jsx)("div",{children:(0,v.aZ)()?(0,n.jsx)("div",{className:"playeridtag",style:w,children:ve}):""})})})));function E(){return d.M.getDeviceScore()}},18072:(e,t,r)=>{r.d(t,{M2:()=>v,YE:()=>l,_B:()=>c,bn:()=>s,sD:()=>p});var n=r(71111),i=r(31209);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){o(e,t,r[t])}))}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const l={mobileDefaultMute:!1,forcePause:!1,forcePlay:!1,canRetry:!0},d=(0,n.atom)(l),{useServiceState:s,useServiceDispatchers:c,useAtomService:p}=(0,i.i)(d,((e,t)=>({setMobileDefaultMute(e){t(d,(t=>u(a({},t),{mobileDefaultMute:e})))},setForcePause(e){t(d,(t=>u(a({},t),{forcePause:e})))},setForcePlay(e){t(d,(t=>u(a({},t),{forcePlay:e})))},setCanRetry(e){t(d,(t=>u(a({},t),{canRetry:e})))}}))),v=()=>s((e=>e.mobileDefaultMute))},37085:(e,t,r)=>{r.d(t,{Dg:()=>g,J:()=>_,NL:()=>p,Q3:()=>c,Zo:()=>v,cU:()=>h,dS:()=>o.b,fU:()=>m,ji:()=>f,nS:()=>y,pQ:()=>P,t9:()=>b,yF:()=>T});var n=r(90184),i=r(9470),o=r(52961),a=r(42917),u=r(14583);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){l(e,t,r[t])}))}return e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const c={"v16-webapp.tiktok.com":"anonymous","v16m-webapp.tiktokcdn-us.com":"anonymous","v16-webapp-prime.tiktok.com":"use-credentials","v16-webapp-prime.us.tiktok.com":"use-credentials","v19-webapp-prime.us.tiktok.com":"use-credentials","v19-webapp-prime.tiktok.com":"use-credentials","v16-webapp-prime-test-ttp.us.tiktok.com":"use-credentials","v19-webapp-prime-test-ttp.us.tiktok.com":"use-credentials","v16-webapp-prime-test.tiktok.com":"use-credentials","v19-webapp-prime-test.tiktok.com":"use-credentials","webapp-va.tiktok.com":"use-credentials","webapp-sg.tiktok.com":"use-credentials","webapp-i18n.tiktok.com":"use-credentials","video-useast5.us.tiktok.com":"use-credentials"};function p(e){if(!e)return{};let t="";const r=new URL(e);return r.hostname&&(t=c[r.hostname]||""),"use-credentials"===t?{credentials:"include"}:{}}const v=!1;function y(){return new Promise((e=>{i.cp.isHEVCSupported&&i.cp.shouldUseHEVC?i.cp.checkHEVCWithPlaybackQuality("",.1,(t=>{e(t)})):e(!1)}))}function m(){return"undefined"==typeof window||"undefined"==typeof document}const f=()=>{var e;let t=!1;const{availHeight:r=0,availWidth:n=0}="undefined"!=typeof window&&(null===(e=window)||void 0===e?void 0:e.screen)||{};return r>0&&n/r>1&&(t=!0),t},h=e=>{const t=[],r=[];return e&&e.forEach((e=>{const n={qualityType:e.QualityType,gearName:e.GearName};e.CodecType.indexOf("h265")>=0?r.push(n):t.push(n)})),{h264Set:t,h265Set:r}};function b(e=[],t=!1,r=20,n=28){const i=T(e,"h264",r),o=T(e,"h265",n);let a=i;return!m()&&t&&o&&(a=o),{h264Source:i,h265Source:o,source:a}}function _(e){return e&&e.videoQuality&&e.definition?`${e.videoQuality}_${e.definition.substring(0,e.definition.length-1)}_0`:"unknown_definition_from_xgpreload_config"}function g(e=!0){return{enableSubtitle:!0,enablePreloader:!1,enableLogger:!1,mp4EncryptPlayer:{reqOptions:{timeout:5e3},chunkSize:209715,timeout:5e3,waitingInBufferTimeOut:1e4,waitingTimeOut:1e4,notDegradeErrorList:[],closeDowngrade:!1,minBufferLength:10,maxBufferLength:60,needPreloadRangeList:!0,needPreloadCheck:!1,needAutoBitrate:!0,removeBufferLen:60,resumePlayWaterLevel:0,segmentMinDuration:10,getRequestOptionsCallback:({url:e})=>p(e)},video:{codecType:"h264",definitionList:[],autoplay:e,volume:1},extra:{}}}function P(e=[],t=0,r,i=0,l=!0,v=0,y="",m,f,g,P,T,w,k,C,O){let S,L=P,E="h264",M="",V="",R="",j=!1,D="",A="",x="",I=t,B="";const U=`TT-vCache-${r}`,F=(0,n.xU)(U),N=(null==k?void 0:k.openSrc)&&(!F||"h265"===F.codecType);M=_(m);const{qualityType:q,hevcQualityType:Q}=k||{qualityType:20,hevcQualityType:28},H=b(e,N,q,Q),z=H.source,Y="h265"===(null==z?void 0:z.codecType)?H.h264Source:null,{h264Set:$,h265Set:G}=h(e),J=o.M.getABTest();let W=L;if(z&&(L=z.url.length>0?z.url[0].src:"",W=(0,u.Mc)(z.url,J.playerRetry),E=z.codecType,M=z.definition,I=z.bitrate,z.mvmaf&&(x=z.mvmaf.slice(1,-1),x=x.replace(/\\"/g,'"'))),L){const e=new URL(L);e.hostname&&(B=c[e.hostname]||"")}T&&(T.tea&&(S={channel:T.tea.channel,channel_domain:T.tea.domain,channel_type:T.tea.type}),T.region&&(V=T.region),T.webId&&(R=T.webId),void 0!==T.isLogin&&(j=T.isLogin),T.abTestVersion&&(D=T.abTestVersion),T.hevcAbTestVersion&&(A=T.hevcAbTestVersion));const K=p(L),X=(null==O?void 0:O.playerPreload)||{},Z=(null==T?void 0:T.extInfo)||{},ee=o.a.getHevcDisableInfo(),{gpuScoreData:te,deviceScore:re,shortData:ne}=o.b.markScore,{vendor:ie,gpu:oe}=te;return{enableSubtitle:!0,enablePreloader:!0,enableLogger:"three_column"!==o.M.playMode,preloader:s(d({minBufferLength:10,preloadCacheType:1,preloadMaxCacheCount:5,preloadTime:10,preloadSize:209715,segmentMinDuration:10,reqOptions:K},X),{getRequestOptionsCallback:({url:e})=>p(e)}),mp4EncryptPlayer:{closeDowngrade:!1,minBufferLength:10,maxBufferLength:30,needPreloadRangeList:!0,needPreloadCheck:!0,needAutoBitrate:!0,removeBufferLen:60,resumePlayWaterLevel:0,segmentMinDuration:10,reqOptions:K,getRequestOptionsCallback:({url:e})=>p(e)},logger:{appId:548444,line_app_id:1988,playMode:o.M.playMode,playerCoreVersion:"",codec_type:E,tag:o.M.pageName,preTag:o.M.prePageName,preSubtag:o.M.prePlayMode,vid:r,region:V,webId:R,isLogin:j,abTestVersion:D,hevcAbTestVersion:A,channelConfig:S,d_score:re,gpu:oe,switchPlayerTime:C,vendor:ie,bitrateSet:$,bitrateSetHevc:G,pIndex:(null==T?void 0:T.vIndex)||-1,ext:s(d({},Z,ee),{log_id:(null==m?void 0:m.log_id)||"none",is_ad:(null==m?void 0:m.isAd)?1:0}),deviceScore:ne,strategyVersion:a.v},video:{codecType:E,defaultBitrate:I,defaultDefinition:M,definitionList:[],duration:i,autoplay:l,volume:null!=f?f:.7,muted:g||!1,vqscore:null!=w?w:0,mvmaf:x},extra:{h264BitrateList:N?[Y]:[],url:L,actualUrl:W,vid:U,ignores:["play","start"],reqAuth:B,closeMSE:(0,u.nT)(F,J,!!(null==k?void 0:k.closePreload))},hevcResult:k}}function T(e=[],t,r){const n=e.filter((e=>e.CodecType.indexOf(t)>=0));n.sort(((e,t)=>e.Bitrate-t.Bitrate));let i=[];if(n.length>0&&(i=n.filter((e=>e.QualityType===r)),0===i.length&&i.push(n[0])),i.length>0){var o;const e=i[0],r=(null===(o=e.PlayAddr)||void 0===o?void 0:o.UrlList)||[];var a,u,l,d,s;if(r.length>0)return{bitrate:e.Bitrate,size:(null===(a=e.PlayAddr)||void 0===a?void 0:a.DataSize)||0,width:(null===(u=e.PlayAddr)||void 0===u?void 0:u.Width)||0,height:(null===(l=e.PlayAddr)||void 0===l?void 0:l.Height)||0,fileId:(null===(d=e.PlayAddr)||void 0===d?void 0:d.FileHash)||"",uri:(null===(s=e.PlayAddr)||void 0===s?void 0:s.Uri)||"",codecType:t,gearName:e.GearName,definition:e.GearName,qualityType:e.QualityType,mvmaf:e.MVMAF||"",url:r.map((e=>({src:e})))}}return null}},98730:(e,t,r)=>{r.d(t,{k:()=>i,s:()=>n});const n={Chrome:{cpuCore:6,dScore:0,score:0,gpuScore:6.5,hevcQualityType:28,checkLevel:2}};function i(){return n}},31031:(e,t,r)=>{r.d(t,{AI:()=>i.AI,Ah:()=>u.Ah,C7:()=>n.C7,Cc:()=>n.Cc,Dg:()=>o.Dg,EH:()=>n.EH,H4:()=>i.H4,J:()=>o.J,JL:()=>i.JL,L8:()=>i.L8,LA:()=>n.LA,Mc:()=>l.Mc,NL:()=>o.NL,O6:()=>i.O6,OF:()=>n.OF,OK:()=>i.OK,Q3:()=>o.Q3,Tb:()=>l.Tb,Ug:()=>i.Ug,Vb:()=>u.Vb,Vz:()=>i.Vz,YC:()=>i.YC,YU:()=>i.YU,YV:()=>n.YV,Zo:()=>o.Zo,_g:()=>i._g,_w:()=>a._,aF:()=>i.aF,aZ:()=>l.aZ,cU:()=>o.cU,cp:()=>u.cp,dS:()=>o.dS,eJ:()=>i.eJ,ef:()=>n.ef,et:()=>i.et,ey:()=>n.ey,fU:()=>o.fU,fn:()=>n.fn,hi:()=>n.hi,j9:()=>u.j9,ji:()=>o.ji,km:()=>d.k,n2:()=>i.n2,nS:()=>o.nS,nT:()=>l.nT,pM:()=>l.pM,pQ:()=>o.pQ,qJ:()=>n.qJ,qd:()=>n.qd,sT:()=>d.s,su:()=>n.su,t7:()=>u.t7,t9:()=>o.t9,tW:()=>i.tW,vX:()=>i.vX,wH:()=>i.wH,xU:()=>u.xU,yF:()=>o.yF,zD:()=>n.zD,zH:()=>i.zH});var n=r(95717),i=r(52794),o=r(37085),a=r(52853),u=r(9470),l=r(14583),d=r(98730)},52794:(e,t,r)=>{r.d(t,{AI:()=>v,H4:()=>p,JL:()=>C,L8:()=>s,O6:()=>w,OK:()=>l,Ug:()=>S,Vz:()=>f,YC:()=>T,YU:()=>_,_g:()=>m,aF:()=>k,eJ:()=>b,et:()=>g,n2:()=>d,tW:()=>P,vX:()=>O,wH:()=>y,zH:()=>h});var n=r(95717),i=r(91257),o=r(9470);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){a(e,t,r[t])}))}return e}const l=e=>e?e.map((e=>e.GearName||"")):null,d=e=>e?e.map((e=>e.QualityType&&e.Bitrate?`${e.QualityType}:${e.Bitrate}`:"")).filter((e=>!!e)):null,s=e=>{if(!e)return 0;let t=0;for(let r=0;r<e.length;r++)t+=e.end(r)-e.start(r);return Math.round(1e3*t)},c=new Map([[2,"adapt_lowest_1080p"],[3,"adapt_lower_1080p"],[4,"adapt_1080p"],[7,"adapt_lowest_1440p"],[10,"normal_720p"],[11,"low_720p"],[12,"adapt_high_720p"],[13,"adapt_higher_720p"],[14,"adapt_lower_720p"],[15,"adapt_lowest_720p"],[16,"higher_720p"],[17,"highest_720p"],[18,"adapt_720p"],[19,"adapt_low_720p"],[191,"lower_720p"],[20,"normal_540p"],[21,"adapt_lower_540p"],[22,"adapt_high_540p"],[23,"adapt_higher_540p"],[24,"lower_540p"],[25,"lowest_540p"],[26,"higher_540p"],[27,"highest_540p"],[28,"adapt_540p"],[29,"adapt_lowest_540p"],[291,"adapt_low_540p"],[30,"normal_480p"],[31,"low_480p"],[32,"high_480p"],[33,"medium_480p"],[34,"lower_480p"],[35,"lowest_480p"],[36,"higher_480p"],[37,"highest_480p"],[38,"adapt_480p"],[39,"adapt_lower_480p"],[391,"adapt_high_480p"],[40,"normal_360p"],[41,"low_360p"],[42,"high_360p"],[43,"medium_360p"],[44,"lower_360p"],[45,"lowest_360p"],[46,"higher_360p"],[47,"highest_360p"],[48,"adapt_360p"],[49,"adapt_lowest_360p"],[50,"adapt_high_360p"]]),p=(e,t)=>{if(!e)return t;if("string"==typeof e&&e.indexOf("xgpreload_config")>-1)return e;const r=Number(e);if(!c.has(r)){const t=String(e).match(/^([a-zA-Z]*)+_([0-9]+)_0$/i);return t?`${t[1]}_${t[2]}p`:`_${e}`}return c.get(r)};function v(e=0){return["one_column","three_column","browser_mode","swiper_mode","video_detail","pip","fullscreen","creator_tab","mini_player"][e]}function y(e,t,r,i,a){let u=n.qd.Public;t.forFriend&&(u=n.qd.Friend),t.secret&&(u=n.qd.Self);let l="";if(null==a?void 0:a.src){const e=/^(?:https?:\/\/)?([^\/\s:]+)/,t=a.src.match(e);l=t?t[1]:""}const d={group_id:e,author_id:t.author_id||"",play_mode:v(i),logo_type:"unwatermarked",item_status:u,play_url:a?a.src:"",host:l,aweme_type:t.aweme_type||0,pic_cnt:t.pic_cnt||0,playlist_id:t.playlist_id||"",popup_type:t.popup_type||"",size:t.size||0,watch_count_foru:1,watch_count_total:1,log_id:t.log_id||"none",is_ad:t.isAd};let s={};r&&(s={video_width:r.video_width||0,video_height:r.video_height||0,video_duration:r.video_duration||0});let c={};return c={cpu_core:o.cp.cpu,memory_size:o.cp.memory,HEVC_supported:o.cp.isHEVCSupported?1:0},Object.assign({},c,d,s)}function m(e,t,r,n,i){let o="",a=-1,u=-1,l="",d="mp4";const s=p(r.definition,t.definition);if(t.videoQuality&&s&&(o=`${t.videoQuality}_${s}`),(null==n?void 0:n.vid)==="TT-vCache-"+e&&(a=n.size,u=Math.floor(n.duration)),i){l="XG"===i.type?"xgplayer":"defaultPlayer";let e=i.getVideoDesc();e&&(d=e.videoType)}const c=(null==i?void 0:i.state)||"default";return{video_bitrate:r.bitrate||t.bitrate||0,video_format:t.format||"",codec_format:r.codecType||"h264",encoded_type:t.encodedType||"",bitrate_quality:t.videoQuality||"",video_quality:o,video_encodeUserTag:t.encodeUserTag||"",original_definition:t.definition||"",preload_size:a,preload_time:u,player_type:l,video_type:d,render_state:c}}function f(e){const t=e?e.codecType:"h264";return!!t&&t.indexOf("h265")>-1}function h(e){return e}function b(e){return e}function _(e,t,r,n,i,o){let a="";const u=p(t.definition,r.definition);let l;return r.videoQuality&&u&&(a=`${r.videoQuality}_${u}`),o&&(l=o.error),Object.assign({},{duration:Math.round(i),error_code:l?String(l.code):"",is_success:l?"0":"1",video_quality:a,is_bytevc1:n?1:0,isExpired:2,isSupportMP4:1},e)}function g(e,t,r,n,i){let o,a=0;i&&(o=i.error,a=i.duration);let u=n.code||0,l=n.message||"";return u<=0&&o&&(u=o.code,l=o.message),Object.assign({},t,{error_code:String(u),error_info:l,is_bytevc1:r?1:0,duration:Math.round(1e3*a),isExpired:n.isExpired||0,isSupportMP4:1,is_before:0===n.status?0:1,retry_c:n.retryCount||0,retry_l:n.retryList||[]},e)}function P(e,t,r,n,i,o,a,u,l,d,c){let p,v,y=0,m=0,f=1,h=!1;const b=a-u;c&&(p=c.error,y=c.duration,m=c.readyState,v=c.buffered,f=c.volume,h=c.muted);const _=Math.min(b,1e3*y);let g=n.bitrate;g<=0&&(g=i&&i.bitrate?i.bitrate:0);const P=g/8*(_/1e3);let T=0,w=0,k=0,C=0;if(d){const e=d.playbackQuality;e&&(T=e.droppedVideoFrames,w=e.totalVideoFrames,w&&(k=T/w),C=b)}return Object.assign({},t,{is_success:p?"0":"1",video_duration:Math.round(1e3*a),play_duration:Math.round(1e3*o),buffering:m<=2?1:0,duration:Math.round(b),wait_duration:0,cur_cache_duration:s(v),local_time_ms:Date.now(),volume_level:f,volume_change:0,muted:h?1:0,click_mute:0,session_order:0,play_size:Math.round(P),data_player_type:2,cache_size:0,cache_duration:0,cdn_size_video:0,is_bytevc1:r?1:0,drop_frame:T,total_play_frame:w,drop_frame_rate:k,drop_frame_duration:C,vqm:l},e)}function T(e,t){return Object.assign({},{feed_total:t},e)}function w(e,t,r,n,i,o){let a=0,u=!1;return o&&(a=o.duration,u=o.muted),Object.assign({},t,{duration:Math.round(n.duration),is_bytevc1:r?1:0,video_duration:Math.round(1e3*a),muted:u?1:0,bitrate_set:l(i),quality_bitrate:d(i),duration_from_load:Math.round(n.durationFromLoaded||0),duration_with_load:Math.round(n.durationWithLoaded||0),is_same:0,retry_c:n.retryCount||0,retry_l:n.retryList||[]},e)}function k(e,t,r,n,i){let o=0;return i&&(o=i.currentTime),Object.assign({},t,{duration:Math.round(n),is_bytevc1:r?1:0,position:Math.round(1e3*o),should_filter:"0",droppedRate:0,end_type:0},e)}function C(e,t){var r,n,o,a,l,d,s,c,p,v,y,m;return u({itemId:e.group_id||"",authorId:e.author_id||"",isScheduled:Boolean(e.is_scheduled),autoplayStatus:1,searchId:e.search_id,searchKeyword:e.search_keyword,searchResultId:e.search_result_id,questionId:e.question_id,playMode:t&&t.playModeForTea?t.playModeForTea:i.ey.OneColumn,isMute:!(!t||!t.mute),collectionId:e.collection_id,collectionName:e.collection_name,isPaidPartnership:Boolean(e.isPaidPartnership),poiId:e.poi_id,playlistId:e.playlist_id,popupType:e.popup_type,enterTab:e.enter_tab,diversifyId:e.diversify_id,enterMethod:"",isSubOnlyVideo:e.is_sub_only_video,isCopyrightMuted:!(!t||!t.itemMute),isPinnedItem:e.isPinnedItem,tab_name:e.tab_name,isAutoScroll:!(!t||!t.isAutoScroll),caption_mode:null==t||null===(r=t.claParams)||void 0===r?void 0:r.caption_mode,caption_language:null==t||null===(n=t.claParams)||void 0===n?void 0:n.caption_language,caption_options:null==t||null===(o=t.claParams)||void 0===o?void 0:o.caption_options,always_translate_post_mode:null==t||null===(a=t.claParams)||void 0===a?void 0:a.always_translate_post_mode,do_not_translate_mode:null==t||null===(l=t.claParams)||void 0===l?void 0:l.do_not_translate_mode,translate_into_mode:null==t||null===(d=t.claParams)||void 0===d?void 0:d.translate_into_mode,see_original_show:null==t||null===(s=t.claParams)||void 0===s?void 0:s.see_original_show,see_translation_show:null==t||null===(c=t.claParams)||void 0===c?void 0:c.see_translation_show,video_width:(null==t||null===(p=t.videoDimensionParams)||void 0===p?void 0:p.video_width)||0,video_height:(null==t||null===(v=t.videoDimensionParams)||void 0===v?void 0:v.video_height)||0,video_duration:(null==t||null===(y=t.videoDimensionParams)||void 0===y?void 0:y.video_duration)||0},null!==(m=null==t?void 0:t.videoContentParams)&&void 0!==m?m:{})}function O(e,t,r,n,i=!0){var o;return{itemId:i?t:null!==(o=e.group_id)&&void 0!==o?o:"",authorId:e.author_id,isScheduled:Boolean(e.is_scheduled),autoplayStatus:1,searchId:i?e.search_id:"",searchKeyword:i?e.search_keyword:"",searchResultId:i?e.search_result_id:"",playMode:n,isMute:r,fromTab:e.fromTab,hasSubtitle:e.hasSubtitle,captionsShowType:e.captionsShowType,isPaidPartnership:Boolean(e.isPaidPartnership),poiId:e.poi_id,isSubOnlyVideo:e.is_sub_only_video,isCopyrightMuted:e.isCopyrightMuted,isPinnedItem:e.isPinnedItem}}function S(e){var t,r;const n={isFinish:0,pt:0,vt:0,firstframeDuration:100,errorCode:0,errorMessage:"",codecType:"h264",resolution:"",url:""},i=null==e||null===(r=e.player)||void 0===r||null===(t=r.plugins)||void 0===t?void 0:t.xgVodLogger;return(null==i?void 0:i.getFinalInfo)?u({},n,i.getFinalInfo()):n}},9470:(e,t,r)=>{r.d(t,{Ah:()=>s,Vb:()=>i.Vb,cp:()=>u,j9:()=>l,t7:()=>a,xU:()=>d});var n=r(40099),i=r(33414),o=r(76299);const a=new i.Vb,u=new o.A;function l(e,t,r){t&&(0,n.useEffect)((()=>{if(!a[r])return;let n=null;return"metrics"===r||"event"===r?"PlayEnded"===e?a.metrics.bind(e,t):a[r].on(e,t):"element"===r&&a.element&&(n=e=>{t(e)},a.element.addEventListener(e,n)),()=>{a[r]&&("metrics"===r||"event"===r?"PlayEnded"===e?a.metrics.clear(e):a[r].off(e,t):"element"===r&&n&&a.element.removeEventListener(e,n))}}),[t])}function d(e){return a.player?a.player.getPreloadMeta(e):null}const s={playerDegrade:2,playerRetry:"v1",playerReuse:"v0",playerPreload:{vid:"v0",maxQueueCount:3,preloadMaxCacheCount:5,preloadTime:10,segmentMinDuration:10,minBufferLength:10,startPreloadControl:!1,startPreloadMinBuffer:0,startPreloadMinPosTime:0},playerLogger:0,bitrateSelect:{vid:"v0",qualityType:[],hevcQualityType:[]}}},90184:(e,t,r)=>{r.d(t,{j9:()=>o,uk:()=>i,xU:()=>a});var n=r(40099);const i=new(r(33414).SN)({enableReuse:!1,enableMultiple:!0,minBuffer:0,defaultMSE:!1});function o(e,t,r,i){t&&(0,n.useEffect)((()=>{if(!i)return;let n=null;const o=i.metrics,a=i.event;if("metrics"===r||"event"===r)"PlayEnded"===e?null==o||o.bind(e,t):"metrics"===r?null==o||o.on(e,t):null==a||a.on(e,t);else if("element"===r&&i.element){var u;n=e=>{t(e)},null===(u=i.element)||void 0===u||u.addEventListener(e,n)}return()=>{if(!i)return;const o=i.metrics,a=i.event;if("metrics"===r||"event"===r)"PlayEnded"===e?null==o||o.clear(e):"metrics"===r?null==o||o.off(e,t):null==a||a.off(e,t);else if("element"===r&&n){var u;null===(u=i.element)||void 0===u||u.removeEventListener(e,n)}}}),[t])}function a(e){return i.getPreloadMeta(e)}},52853:(e,t,r)=>{r.d(t,{_:()=>a});var n=r(37085);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}const a=new class{constructor(){this.updateDefaultDefinition=e=>{this.defaultDefinition=e},this.updateIndex=e=>{e<0||(this.index=e,this.range=[this.index+1,this.index+this.maxQueueCount+1])},this.updateIds=(e=[])=>{this.ids=e},this.getIds=()=>this.ids,this.updateItems=e=>{if(2!==this.range.length)return;this.ids.length||this.updateIds(Object.keys(e));const t=this.ids.slice(this.range[0],this.range[1]);this.h264Resources=[],this.h265Resources=[],this.resources=[],t.forEach(((t,r)=>{var i,a;const u=e[t];var l;const d=null!==(l=null==u||null===(i=u.video)||void 0===i?void 0:i.bitrateInfo)&&void 0!==l?l:[];let s=null,c=null;const p=[],v=[],y={vid:"TT-vCache-"+t,duration:(null==u||null===(a=u.video)||void 0===a?void 0:a.duration)||0,payload:[]};d.length?(d.forEach((e=>{var r,n,i,a,l,d;const s=null!==(d=null===(r=e.PlayAddr)||void 0===r?void 0:r.UrlList)&&void 0!==d?d:[null==u||null===(n=u.video)||void 0===n?void 0:n.playAddr];var c;const m={id:t,url:null!==(c=null===(i=e.PlayAddr)||void 0===i?void 0:i.UrlList)&&void 0!==c?c:[null==u||null===(a=u.video)||void 0===a?void 0:a.playAddr],definition:e.GearName,bitrate:e.Bitrate,duration:null==u||null===(l=u.video)||void 0===l?void 0:l.duration,codecType:e.CodecType.includes("h265")?"h265":"h264",vtype:"MP4",qualityType:e.QualityType||20};var f,h;"h264"===e.CodecType&&p.push(m),e.CodecType.indexOf("h265")>=0&&(m.codecType="h265",v.push(m)),y.payload.push((f=o({},m),h=null!=(h={url:s.map((e=>({src:e})))})?h:{},Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(h)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(h)).forEach((function(e){Object.defineProperty(f,e,Object.getOwnPropertyDescriptor(h,e))})),f))})),p.forEach(((e,t)=>{(0===t||s&&Math.abs(e.qualityType-25)<Math.abs(s.qualityType-25))&&(s=e)})),v.forEach(((e,t)=>{(0===t||c&&Math.abs(e.qualityType-25)<Math.abs(c.qualityType-25))&&(c=e)}))):u&&u.video&&(s={id:t,url:[u.video.playAddr],definition:(0,n.J)(u.video),bitrate:u.video.bitrate,duration:u.video.duration,codecType:"h264",qualityType:20,vtype:"MP4"},y.payload.push(s)),s&&this.h264Resources.push(s),c&&this.h265Resources.push(c),this.resources.push(y)}))},this.getResources=(e=!1)=>!(0,n.fU)()&&e?this.h265Resources:this.h264Resources,this.getXgPayloads=(e=!1)=>this.getResources(e).map(((e,t)=>{var r;return{order:t,data:{codecType:e.codecType,preloadTime:8,vid:"TT-vCache-"+e.id,payload:[{bitrate:e.bitrate,definition:e.definition,duration:e.duration,url:null===(r=e.url)||void 0===r?void 0:r.map((e=>({src:e})))}]}}})),this.getXgPayloadsAll=()=>{const{resources:e}=this;return e.map(((e,t)=>({order:t,data:o({},e)})))},this.updateMaxQueueCount=e=>{this.maxQueueCount=e},this.reset=()=>{this.ids=[],this.range=[],this.h264Resources=[],this.h265Resources=[],this.resources=[],this.index=0},this.setTemporaryCallback=()=>{(0,n.fU)()||window.videoChangedCallback||(window.videoChangedCallback=e=>{this.updateIndex(e)})},this.ids=[],this.maxQueueCount=3,this.range=[],this.h264Resources=[],this.h265Resources=[],this.resources=[],this.index=0,this.defaultDefinition="",this.updateIndex(0)}};a.setTemporaryCallback()},95717:(e,t,r)=>{r.d(t,{zD:()=>p,LA:()=>f,ey:()=>o.ey,Cc:()=>a.Cc,su:()=>g,OF:()=>n.VideoDimensionParams,qJ:()=>n.VideoPlayHandleParams,YV:()=>b,qd:()=>s,hi:()=>i.VideoStruct,ef:()=>l,C7:()=>m,EH:()=>y,fn:()=>u});var n={};r.r(n);var i={};r.r(i);var o=r(91257),a=r(33414);const u=()=>{};var l,d,s,c,p,v;(d=l||(l={}))[d.Yes=0]="Yes",d[d.No=1]="No",(c=s||(s={}))[c.Public=0]="Public",c[c.Self=1]="Self",c[c.Friend=2]="Friend",(v=p||(p={})).PlayQuality="video_play_quality",v.PlayEnded="video_play_end",v.PlayFailed="video_play_failed",v.BlockStart="video_block_start",v.Block="video_block",v.Request="video_request",v.RequestResponse="video_request_response",v.FirstFrame="first_feed_show_time";const y={corruptedVideoFrames:0,creationTime:0,droppedVideoFrames:0,totalVideoFrames:0},m={currentSrc:"",currentTime:0,duration:0,readyState:0,networkState:0,error:null};var f,h,b,_,g,P;(h=f||(f={})).NoInteract="failed because the user didn't interact with the document first.",h.Interrupted="request was interrupted by a call to pause",h.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context",h.FireFox="The play method is not allowed by the user agent or the platform in the current context, possibly because the user denied permission.",h.LoadInterrupt="request was interrupted by a new load request",h.Abort="The operation was aborted",(_=b||(b={})).LOAD="load",_.WAITING="waiting",_.PAUSE="pause",_.ENDED="ended",_.ERROR="error",_.PLAYING="playing",(P=g||(g={}))[P.NIL=-255]="NIL",P[P.UnknownError=-1]="UnknownError",P[P.Ok=0]="Ok",P[P.ReportLiveFailed=90002]="ReportLiveFailed",P[P.VerifyCode=1e4]="VerifyCode",P[P.VideoLikeFreq=2150]="VideoLikeFreq",P[P.VideoLikeFreq2=2210]="VideoLikeFreq2",P[P.VideoUnavailableDeleted=2054]="VideoUnavailableDeleted",P[P.AdVideoUnavailableChange=2752]="AdVideoUnavailableChange",P[P.CommentBanCode=22]="CommentBanCode",P[P.CommentLikePermissionDisable=3002043]="CommentLikePermissionDisable",P[P.SearchSensitiveCode=403]="SearchSensitiveCode",P[P.SearchYoungCode=203]="SearchYoungCode",P[P.SmsInvalidNumber=-1]="SmsInvalidNumber",P[P.SmsSlideVerify=-4]="SmsSlideVerify",P[P.FypVideoListLimit=10404]="FypVideoListLimit",P[P.ClientPageError=450]="ClientPageError",P[P.LiveNeedLogin=10119]="LiveNeedLogin",P[P.SharkBlock=10114]="SharkBlock",P[P.SharkSlide=10113]="SharkSlide",P[P.NetError=10111]="NetError",P[P.ServerErrorNot500=10101]="ServerErrorNot500",P[P.VideoRisk=10228]="VideoRisk",P[P.VideoRMask=10229]="VideoRMask",P[P.VideoRiskMask=10230]="VideoRiskMask",P[P.VideoNeedRecheck=10227]="VideoNeedRecheck",P[P.VideoUnshelveByMusic=10220]="VideoUnshelveByMusic",P[P.VideoNotExist=10204]="VideoNotExist",P[P.VideoAbnormal=10215]="VideoAbnormal",P[P.VideoLowAgeM=10213]="VideoLowAgeM",P[P.VideoLowAgeT=10214]="VideoLowAgeT",P[P.VideoFirstReviewUnshelve=10217]="VideoFirstReviewUnshelve",P[P.VideoPrivateByUser=10216]="VideoPrivateByUser",P[P.VideoGeofenceBlock=10231]="VideoGeofenceBlock",P[P.VideoPhoto=10239]="VideoPhoto",P[P.VideoFriendsOnly=10240]="VideoFriendsOnly",P[P.VideoDeleted=10241]="VideoDeleted",P[P.VideoUserBlockedByAuthor=10242]="VideoUserBlockedByAuthor",P[P.HashtagNotExist=10205]="HashtagNotExist",P[P.HashtagUnshelve=10212]="HashtagUnshelve",P[P.HashtagSensitivityWord=10211]="HashtagSensitivityWord",P[P.HashtagBlackList=10209]="HashtagBlackList",P[P.UserInboxFollowBan=24]="UserInboxFollowBan",P[P.UserNotExist=10202]="UserNotExist",P[P.UserBan=10221]="UserBan",P[P.UserPrivate=10222]="UserPrivate",P[P.UserNotLogin=10102]="UserNotLogin",P[P.UserFtc=10223]="UserFtc",P[P.UserUniqueSensitivity=10225]="UserUniqueSensitivity",P[P.QuestionNotAvailable=10236]="QuestionNotAvailable",P[P.MusicNotExist=10203]="MusicNotExist",P[P.MusicUnshelve=10218]="MusicUnshelve",P[P.MusicNoCopyright=10219]="MusicNoCopyright",P[P.MusicUnavailable=202001]="MusicUnavailable",P[P.GameNotExist=10224]="GameNotExist",P[P.LiveNotExist=10210]="LiveNotExist",P[P.GoLiveRoomBaned=10018]="GoLiveRoomBaned",P[P.GoLiveBaned=4003035]="GoLiveBaned",P[P.LiveRoomPrepare=30019]="LiveRoomPrepare",P[P.LiveRoomEnd=30003]="LiveRoomEnd",P[P.LiveRoomBan=30012]="LiveRoomBan",P[P.LiveNoGatedAuth=4003043]="LiveNoGatedAuth",P[P.LiveNoAgeGatedAuth=4003110]="LiveNoAgeGatedAuth",P[P.LivePaidEvent=4003072]="LivePaidEvent",P[P.LiveSubscriberOnly=4003135]="LiveSubscriberOnly",P[P.LiveSuicideCase=2403]="LiveSuicideCase",P[P.LiveSensitiveTitle=50004]="LiveSensitiveTitle",P[P.LiveRoomBaned=10018]="LiveRoomBaned",P[P.LiveEnterRoomNeedLogin=20003]="LiveEnterRoomNeedLogin",P[P.LiveAccountUnderRiskControl=20063]="LiveAccountUnderRiskControl",P[P.LiveHitBanStrategy=30009]="LiveHitBanStrategy",P[P.LiveOBSAccessRecalled=4003105]="LiveOBSAccessRecalled",P[P.EffectNotExist=10208]="EffectNotExist",P[P.PlaylistNotExist=10233]="PlaylistNotExist",P[P.PlaylistInTrill=10234]="PlaylistInTrill",P[P.VideoPlaylistUnavailable=10243]="VideoPlaylistUnavailable",P[P.VideoPlaylistIsEmpty=10244]="VideoPlaylistIsEmpty",P[P.PrivateAccountLimitByBC=3026002]="PrivateAccountLimitByBC"},14583:(e,t,r)=>{r.d(t,{Mc:()=>o,Tb:()=>u,aZ:()=>l,nT:()=>a,pM:()=>i});let n=-1;const i=function(e){return"number"==typeof e?e:"boolean"==typeof e?e?1:0:0===e.indexOf("v")&&2===e.length?parseInt(e[1],10):parseInt(e,10)};function o(e,t){const r=i(t||0);return e.length<1?"":e.length<2||r<=0?e[0].src:e}function a(e,t,r){if(r)return!0;const n=i(t.playerDegrade||0),o=i(t.playerRetry||0);return!e&&(n>=1||o>0)}function u(e,...t){n<0&&(n=location.search.includes("ttplayer_debug=1")?1:0),n&&console.log(`[MultiMedia][${e}]`,...t)}function l(){return n>0}},93987:(e,t,r)=>{var n;r.d(t,{Y:()=>n}),function(e){e.PlayerChange="player_change",e.PlayerDestroy="player_destroy",e.PlayerMounted="player_mounted",e.OneColumnRerender="one_column_rerender",e.BrowseModeRerender="browse_mode_rerender",e.VideoRequest="video_request",e.VideoCanPlay="video_can_play",e.VideoFirstFrame="video_first_frame"}(n||(n={}))},35323:(e,t,r)=>{r.d(t,{uQ:()=>i,xt:()=>u});var n=r(93987);function i(e){return performance.mark(e)}function o(e){const{start:t,end:r}=e;try{return performance.measure(`${t}-${r}`,t,r)}catch(e){}}function a(e){return e<0?0:e}function u(){var e,t;const r=[n.Y.PlayerDestroy,n.Y.PlayerMounted,n.Y.OneColumnRerender,n.Y.BrowseModeRerender,n.Y.VideoRequest,n.Y.VideoFirstFrame].map((e=>{var t,r;return a(null!==(r=null===(t=o({start:n.Y.PlayerChange,end:e}))||void 0===t?void 0:t.duration)&&void 0!==r?r:0)})),[i,u,l,d,s,c]=r;return{destroy_time:i,mounted_time:u,one_column_rerender_time:l,browse_mode_rerender_time:d,video_request_time:s,video_first_frame_time:c,player_first_frame_time:a(null!==(t=null===(e=o({start:n.Y.VideoRequest,end:n.Y.VideoFirstFrame}))||void 0===e?void 0:e.duration)&&void 0!==t?t:0)}}}}]);