"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[1261],{16085:(e,t,n)=>{n.d(t,{kh:()=>m,vZ:()=>v,Z9:()=>g});var a=n(21367),i=n(71111),s=n(31209),r=n(35043),o=n(38771),l=n(92597),_=n(63849);const c=(0,i.atom)(null);c.debugLabel="immersivePlayerItemListConfigAtom";const d=(0,i.atom)((e=>{const t=e(c);if(!t)return[];if("single"===t.mode){const n=(0,l.D)(t.itemListKey);return n?e(n).list:[]}return"id"===t.mode&&"user-playlist"===t.source?e(_.DB)[t.id].list:[]}),((e,t,n)=>{t(c,n)}));d.debugLabel="immersivePlayerItemListAtom";const u=(0,i.atom)({index:-1,isOpen:!1,isCommentsOpen:!1});u.debugLabel="immersivePlayerStateAtom";const h=(0,i.atom)((e=>{const t=e(u),n=e(d),a=e(c);return Object.assign({itemList:n,itemListSourceConfig:a},t)}),((e,t,n)=>{console.log("Tried to set immersivePlayerAtom with:",n)}));h.debugLabel="immersivePlayerAtom";const{useAtomService:v,useServiceState:g,useServiceDispatchers:m,getStaticApi:p}=(0,s.i)(h,((e,t)=>({syncStateToPlayerAtom({id:t}={}){var n;const i=e(c),{index:s}=e(h),l=null!=t?t:e(d)[s],_=null===(n=e(o.jD)[l])||void 0===n?void 0:n.currentTime,u={currentVideo:{index:s,id:l,mode:9},playProgress:null!=_?_:0,pageType:"single"===(null==i?void 0:i.mode)?r.FB[i.itemListKey]:999};(0,a.LM)().updateVideo(u),(0,o.Q3)().setVideoInfo({itemId:l,currentTime:_})},openImmersivePlayer({id:e,index:n,itemListSourceConfig:a,teaParams:i,isCommentsOpen:s}){t(c,a),t(u,{index:n,isOpen:!0,isCommentsOpen:s,teaParams:i}),this.syncStateToPlayerAtom({id:e})},closeImmersivePlayer(){this.syncStateToPlayerAtom(),t(u,{index:-1,isOpen:!1,isCommentsOpen:!1,teaParams:void 0}),t(c,null)},setIndex(e,n){t(u,(t=>Object.assign(Object.assign({},t),{index:e}))),this.syncStateToPlayerAtom({id:n})},setIsCommentsOpen(e){t(u,(t=>Object.assign(Object.assign({},t),{isCommentsOpen:e})))}})))},63849:(e,t,n)=>{n.d(t,{DB:()=>v,V6:()=>m});var a=n(57431),i=n(39785),s=n(39228),r=n(71111),o=n(14374),l=n(31209),_=n(89049),c=n(91286),d=function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function r(e){try{l(a.next(e))}catch(e){s(e)}}function o(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((a=a.apply(e,t||[])).next())}))};const u=(0,i.M)({csr:e=>d(void 0,void 0,void 0,(function*(){return s.hd.get("/api/mix/item_list/",{query:e,baseUrlType:2})}))}),h=(0,r.atom)(_.hA);h.debugLabel="activePlaylistItemListAtom";const v=(0,o._)((0,r.atom)({}),{rehydrationKey:"desktop.playlistPage.playlistItemList"});v.debugLabel="playlistItemListAtom";const{useAtomService:g,useServiceDispatchers:m,useServiceState:p}=(0,l.i)(v,((e,t)=>({fetchPlaylistItemList(n){var i;return d(this,void 0,void 0,(function*(){const s=e(v),{mixId:r,itemListKey:o}=n,l=o||r;if(!(l in s)||s[l].hasMore)try{const n=s[l],d=null!==(i=null==n?void 0:n.cursor)&&void 0!==i?i:"0",{language:g}=(0,a.x)(),m=yield u({mixId:r,language:g,cursor:d,aid:_.xE,count:_.vu});t(h,(e=>{var t;return null!==(t=s[l])&&void 0!==t?t:e})),(0,c.Tj)(e,t,h,l,m),t(v,(t=>Object.assign(Object.assign(Object.assign({},t),{[r]:e(h)}),o&&{[o]:e(h)})))}catch(e){(0,c.e_)(t,h)}else t(h,s[l])}))}})))},46803:(e,t,n)=>{n.d(t,{T:()=>s});var a=n(40099),i=n(25616);const s=(e="Webapp",t=!1)=>{const n=(0,i.s)(e),s=(0,a.useCallback)(((e,a)=>{const i=function(e,t=!1){if(!e||isNaN(e))return"";const n=new Date(Number(e)),a=new Date,i=Math.max(a.getTime()-n.getTime(),0);if(t){if(~~(i/c)>7)return{num:1,unit:"unit_week"}}else{if(n.getFullYear()!==a.getFullYear())return`${n.getFullYear()}-${n.getMonth()+1}-${n.getDate()}`;if(~~(i/c)>7)return`${n.getMonth()+1}-${n.getDate()}`}return 7==~~(i/c)?{num:1,unit:"unit_week"}:i>c?{num:~~(i/c),unit:"unit_day"}:i>_?{num:~~(i/_),unit:"unit_hr"}:i>l?{num:~~(i/l),unit:"unit_min"}:{num:1+~~(i/o),unit:"unit_sec"}}(e,t);if("string"==typeof i)return i;const{num:s,unit:r}=i;return a?`${s}${n(r)}`:n("time_ago",{num:s,unit:n(r)})}),[n,t]);return{t:n,timeTranslator:s}};var r;!function(e){e.Week="unit_week",e.Day="unit_day",e.Hour="unit_hr",e.Minute="unit_min",e.Second="unit_sec"}(r||(r={}));const o=1e3,l=60*o,_=60*l,c=24*_},81211:(e,t,n)=>{n.d(t,{U:()=>r});var a=n(4474),i=n(47172),s=n(34131);function r(e,t={}){var n;const{search:r}=(0,i.useLocation)(),o=(0,s.P)(e),l=t.disableAutoLang?"":null!==(n=(0,a.parse)(r).lang)&&void 0!==n?n:"";if("string"==typeof e){const{url:n,query:i}=(0,a.parseUrl)(e);return o?n:(0,a.stringifyUrl)({url:n,query:Object.assign({lang:l},i)},Object.assign({skipEmptyString:!0},t))}const{pathname:_="",search:c={},hash:d}=e,u=d?`#${d}`:"";return o?_:`${(0,a.stringifyUrl)({url:_,query:Object.assign({lang:l},c)},Object.assign({skipEmptyString:!0},t))}${u}`}},31355:(e,t,n)=>{n.d(t,{N_:()=>d});var a=n(44920),i=n(58632),s=n(24643),r=n(40099),o=n(47172),l=n(81211);const _=(0,r.forwardRef)((function(e,t){var{forceSSR:n=!1,to:a,replace:_,onClick:c,children:d,disableAutoLang:u,disabled:h,ariaLabel:v}=e,g=(0,i.__rest)(e,["forceSSR","to","replace","onClick","children","disableAutoLang","disabled","ariaLabel"]);const m=n,{autoOutlineStyle:p,className:f}=g,y=(0,i.__rest)(g,["autoOutlineStyle","className"]),b=(0,l.U)(a,{disableAutoLang:u}),S=(0,r.useMemo)((()=>{const e=[f,"link-a11y-focus"];return p&&e.push("auto-outline-style"),e.filter((e=>e)).join(" ")}),[p,f]),E=(0,r.useCallback)((e=>{if(h)return e.preventDefault(),void e.stopPropagation();null==c||c(e),m&&_&&(e.preventDefault(),e.stopPropagation(),location.replace(b))}),[h,c,m,_,b]);return m?(0,s.jsx)("a",Object.assign({ref:t,href:b},y,{onClick:E,"aria-label":v,className:S,children:d})):(0,s.jsx)(o.Link,Object.assign({ref:t,to:b},y,{onClick:E,"aria-label":v,className:S,children:d}))})),c=(0,r.memo)(_),d=(0,a.T)((e=>{var{to:t,disableAutoLang:n,ariaLabel:a,children:r}=e,o=(0,i.__rest)(e,["to","disableAutoLang","ariaLabel","children"]);const _=(0,l.U)(t,{disableAutoLang:n});return(0,s.jsx)("a",Object.assign({href:_},o,{"aria-label":a,children:r}))}),c,{feature:"simplify_link"})},34131:(e,t,n)=>{n.d(t,{F:()=>l,P:()=>o});var a=n(4474),i=n(70539),s=n(97086),r=n(78662);function o(e){var t,n,o,l,_,c,d;let u=!1;if(!(0,s.fU)())return!1;try{const{seoAbtest:s,isSearchEngineBot:h,featureFlags:v}=(0,i.w)();if(!h)return!1;const g=null!==(n="string"==typeof e?null===(t=(0,a.parseUrl)(e))||void 0===t?void 0:t.url:null==e?void 0:e.pathname)&&void 0!==n?n:"",m=Boolean((null==v?void 0:v.music_canonical_url)&&(0,r.Iy)(g)),p=Boolean((null==v?void 0:v.user_canonical_url)&&(0,r.cj)(g)),f=Boolean((null==v?void 0:v.hashtag_canonical_url)&&(0,r.Ke)(g)),y=null==s?void 0:s.parameters,b=function(e){try{return new URL(e).pathname}catch(t){return e}}(null!==(o=null==s?void 0:s.canonical)&&void 0!==o?o:""),S=null!==(_=null===(l=null==y?void 0:y.kep_canonical_abtest)||void 0===l?void 0:l.vid)&&void 0!==_?_:"v0",E=null!==(d=null===(c=null==y?void 0:y.video_canonical_abtest)||void 0===c?void 0:c.vid)&&void 0!==d?d:"v0",w="v1"===S&&(0,r.pz)(b),C="v1"===E&&(0,r.Fj)(b);u=(m||p||f)&&!(C||w)}catch(e){console.error("Error:  while geting Canonical Url Experiment get base bot/abtest result")}return u}function l({to:e,location:{search:t}={search:""}},n={}){var i;const s=null!==(i=(0,a.parse)(t).lang)&&void 0!==i?i:"",r=o(e);if("string"==typeof e){const{url:t,query:i}=(0,a.parseUrl)(e);return r?t:(0,a.stringifyUrl)({url:t,query:Object.assign({lang:s},i)},Object.assign({skipEmptyString:!0},n))}const{pathname:l="",search:_={},hash:c}=e,d=c?`#${c}`:"";return r?l:`${(0,a.stringifyUrl)({url:l,query:Object.assign({lang:s},_)},Object.assign({skipEmptyString:!0},n))}${d}`}},97164:(e,t,n)=>{n.d(t,{X:()=>a,d:()=>i});const a=e=>{try{let t=btoa(e);return t=t.replace(/=+$/,""),encodeURIComponent(t)}catch(e){return null}},i=e=>{try{const t=decodeURIComponent(e);let n="";const a=t.length%4;2===a?n="==":3===a&&(n="=");const i=atob(t+n);if(!i)throw Error();return i}catch(e){return null}}},60322:(e,t,n)=>{function a(e){var t,n;return null!==(n=null!==(t=e.displayName)&&void 0!==t?t:e.name)&&void 0!==n?n:"UnknownComponent"}n.d(t,{x:()=>a})},70539:(e,t,n)=>{n.d(t,{w:()=>i});var a=n(35267);const i=()=>{var e,t,n,i;const s=(0,a.yK)(),r=null!==(e=s._isSearchEngineBot)&&void 0!==e&&e,o=null!==(t=s._featureFlags)&&void 0!==t?t:{},l=null!==(n=s._cachedSEOABTest)&&void 0!==n?n:{};return{seoAbtest:null!==(i=Object.values(l)[0])&&void 0!==i?i:{},isSearchEngineBot:r,featureFlags:o}}},44920:(e,t,n)=>{n.d(t,{T:()=>l});var a=n(24643),i=n(40099),s=n(48615),r=n(60484),o=n(60322);function l(e,t,n){var l;const _=null===(l=null==n?void 0:n.shouldForwardRef)||void 0===l||l,c=(n,i)=>{const{isBot:o}=(0,r.L$)((0,s.U)((()=>["isBot"]),[]));return o?(0,a.jsx)(e,Object.assign({},n)):(0,a.jsx)(t,Object.assign({},n,{ref:i}))};return c.displayName=`withBotAltHOC(${(0,o.x)(t)})}`,_?(0,i.forwardRef)(c):c}},82535:(e,t,n)=>{n.d(t,{q:()=>o});var a=n(93608),i=n(92603),s=n(40040),r=n(48961);const o={handleEnterTagDetail:e=>{a.f.sendEvent("enter_tag_detail",e)},handleEnterMusicDetail:e=>{a.f.sendEvent("enter_music_detail",e)},handleDiscoveryPage:e=>{a.f.sendEvent("enter_discovery_page",e)},handleEnterTopic:e=>{a.f.sendEvent("enter_topics_page",e)},handleEnterTrending:e=>{a.f.sendEvent("enter_homepage_hot",e)},handleEnterUser:e=>{a.f.sendEvent("enter_personal_detail",e),void 0!==e.group_id?(0,i.J2)(s.DK,e.group_id):(0,i.X)(s.DK)},handleEnterProfile:e=>{a.f.sendEvent("enter_personal_homepage",e)},handleEnterVideo:e=>{a.f.sendEvent("enter_video_detail",e)},handleEnterQuestion:e=>{a.f.sendEvent("enter_qa_detail_page",e)},handleEnterSet:e=>{a.f.sendEvent("enter_setting_page",e)},handleEnterFollowing:e=>{a.f.sendEvent("enter_homepage_follow",e)},handleEnterSuicidePrevention:e=>{a.f.sendEvent("tns_show_ssh_tips_support_page",e)},handleEnterLive:e=>{a.f.sendEvent("enter_live_detail",e)},handleEnterBusiness:()=>{a.f.sendEvent("enter_business_suite")},handleEnterLiveDiscover:e=>{a.f.sendEvent("enter_live_discover",e)},handleEnterKeyboardShortcut:()=>{a.f.sendEvent("enter_keyboard_setting")},handleEnterMessage:e=>{a.f.sendEvent("enter_homepage_message",Object.assign({enter_method:"click_button"},e))},handleEnterMusicPlaylist:e=>{a.f.sendEvent("enter_live_discover",e)},handleEnterQADetailPage:e=>{a.f.sendEvent("enter_qa_detail_page",e)},handleEnterPoi:e=>{const{enter_method:t,play_mode:n,author_id:i,group_id:s,id:o,type:l,cityCode:_,countryCode:c,typeCode:d,isClaimed:u,ttTypeCode:h,ttTypeNameMedium:v,ttTypeNameSuper:g,ttTypeNameTiny:m}=e;a.f.sendEvent("enter_poi_detail",{enter_method:t,play_mode:n,author_id:i,group_id:s,poi_id:o,poi_detail_type:r.Af[null!=l?l:0],is_claimed:u?1:0,poi_city:_,poi_region_code:c,tt_poi_backend_type:`${g},${v},${m}|${h}`,poi_type_code:d})},handleEnterExplore:({enter_method:e})=>{a.f.sendEvent("enter_explore_page",{enter_method:e})},handleEnterFriends:({enter_method:e})=>{a.f.sendEvent("enter_friends_page",{enter_method:e})}}},30023:(e,t,n)=>{n.d(t,{YH:()=>c,t9:()=>_});var a,i,s,r,o,l=n(93608);!function(e){e.Show="livesdk_live_show",e.Duration="livesdk_live_window_duration_v2",e.StartPlay="livesdk_live_window_play",e.RecPlay="livesdk_rec_live_play",e.Follow="livesdk_follow",e.Unfollow="livesdk_unfollow"}(a||(a={})),function(e){e.OneColumn="one_column",e.BrowserMode="browser_mode",e.ImmersivePlayer="immersive_player"}(i||(i={})),function(e){e.PageMode="page_mode",e.BrowserMode="browser_mode"}(s||(s={})),function(e){e.Cell="live_cell",e.Head="live_head",e.Btn="live_btn",e.FollowingPreview="live_cover_preview",e.Like="live_fyp_like",e.Share="live_fyp_share"}(r||(r={})),function(e){e.FYP="homepage_hot",e.FollowingPage="homepage_follow"}(o||(o={}));const _={0:"video_live",1:"third_party",2:"media",3:"audio",4:"screen_share",5:"social_live",6:"live_studio"},c={handleLiveShow:e=>{l.f.event("livesdk_live_show",Object.assign({enter_from_merge:"homepage_hot",enter_method:"live_cell",action_type:"click",live_type:_[Number(e.live_room_mode)]},e))},handleLiveEntranceClick:e=>{l.f.event("livesdk_rec_live_play",Object.assign({enter_from_merge:"homepage_hot",action_type:"click",live_type:_[Number(e.live_room_mode)]},e))},handleLiveDuration:e=>{l.f.event("livesdk_live_window_duration_v2",Object.assign({enter_from_merge:"homepage_hot",action_type:"click",live_type:_[Number(e.live_room_mode)]},e))},handleFollow:e=>{l.f.event("livesdk_follow",Object.assign({enter_from_merge:"homepage_hot",action_type:"click",live_type:_[Number(e.live_room_mode)]},e))},handleUnFollow:e=>{l.f.event("livesdk_unfollow",Object.assign({enter_from_merge:"homepage_hot",action_type:"click",live_type:_[Number(e.live_room_mode)]},e))},handleStartPlay:e=>{l.f.event("livesdk_live_window_play",Object.assign({enter_from_merge:"homepage_hot",action_type:"click",live_type:_[Number(e.live_room_mode)]},e))}}},25754:(e,t,n)=>{n.d(t,{w:()=>s});var a,i=n(93608);!function(e){e.EnterChatList="enter_chat_list",e.LeaveChatList="leave_chat_list",e.LeaveChat="leave_chat",e.DeleteChat="delete_chat",e.AcceptStrangerChat="accept_stranger_chat",e.ReportStrangerChat="report_stranger_chat",e.DeleteStrangerChat="delete_stranger_chat",e.SendMessage="send_message",e.FailSendMessage="fail_send_message",e.LikeMessage="like_message",e.DeleteMessage="delete_message",e.ReportMessage="report_message",e.ChatSettingClick="chat_setting_click",e.ChatMuteClick="chat_mute_click",e.ChatTopClick="chat_top_click",e.EnterStrangerChatList="enter_stranger_chat_list",e.ChangeMessagePermission="change_message_permission",e.ChangeBrandMessageStatus="change_brand_message_status",e.EnterChat="enter_chat",e.ShareHeadShow="share_head_show",e.ShareVideoToChat="share_video_to_chat",e.SearchContact="search_contact",e.ShareVideo="share_video",e.MediaMessageShow="media_message_show",e.MediaMessageShowFail="media_message_show_fail",e.WebAppDmLcp="webapp_dm_lcp"}(a||(a={}));const s={handleEnterChatList:(e,t)=>{i.f.event("enter_chat_list",{num:e,enterMethod:t})},handleSendMessage:e=>{i.f.event("send_message",e)},handleFailSendMessage:e=>{i.f.event("fail_send_message",e)},handleShareHeadShow:e=>{i.f.event("share_head_show",e)},handleShareVideoToChat:e=>{i.f.event("share_video_to_chat",e)},handleSearchContact:()=>{i.f.event("search_contact",{action_type:"share"})},handleLeaveChatList:()=>{i.f.event("leave_chat_list")},handleEnterStrangerChatList:()=>{i.f.event("enter_stranger_chat_list")},handleChatSettingClick:e=>{i.f.event("chat_setting_click",{conversation_id:e,chat_type:"private"})},handleChatMuteClick:({to_status:e,conversation_id:t})=>{i.f.event("chat_mute_click",{to_status:e,conversation_id:t,chat_type:"private"})},handleChatTopClick:({to_status:e,conversation_id:t})=>{i.f.event("chat_top_click",{to_status:e,conversation_id:t,chat_type:"private"})},handleDeleteChat:({is_stranger:e,conversation_id:t})=>{i.f.event("delete_chat",{is_stranger:e?1:0,conversation_id:t,chat_type:"private"})},handleEnterChat:({relation_tag:e,is_stranger:t,conversation_id:n,chat_type:a})=>{i.f.event("enter_chat",{relation_tag:e,is_stranger:t?1:0,conversation_id:n,chat_type:a})},handleAcceptStrangerChat:()=>{i.f.event("accept_stranger_chat")},handleDeleteMessage:e=>{i.f.event("delete_message",Object.assign({},e))},handleReportMessage:e=>{i.f.event("report_message",Object.assign({},e))},handleLikeMessage:({conversation_id:e,to_user_id:t,chat_type:n})=>{i.f.event("like_message",{conversation_id:e,to_user_id:t,chat_type:n})},handleChangeMessagePermission:e=>{i.f.event("change_message_permission",{to_status:e})},handleChangeBrandMessageStatus:e=>{i.f.event("change_brand_message_status",{to_status:e})},handleLeaveChat:({relation_tag:e,is_stranger:t,conversation_id:n})=>{i.f.event("leave_chat",{relation_tag:e,is_stranger:t?1:0,conversation_id:n})},handleMediaMessageShow:e=>{i.f.event("media_message_show",e)},handleMediaMessageShowFail:e=>{i.f.event("media_message_show_fail",e)},handleReportMessagePageLcp:e=>{i.f.event("webapp_dm_lcp",{lcp:Math.floor(e.lcp),is_business_account:e.is_business_account?1:0})}}}}]);